"use strict";(()=>{var e={};e.id=929,e.ids=[929],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8126:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>u,patchFetch:()=>g,requestAsyncStorage:()=>c,routeModule:()=>h,serverHooks:()=>p,staticGenerationAsyncStorage:()=>l});var i={};s.r(i),s.d(i,{POST:()=>o});var a=s(9303),n=s(8716),r=s(670),m=s(7070);async function o(e){try{let{url:t,html:s}=await e.json();if(!s)return m.NextResponse.json({error:"HTML content is required"},{status:400});let i=[],a=[],n=s.match(/<img[^>]*>/gi)||[],r=0,o=n.length;for(let e of n)(!e.includes("alt=")||e.match(/alt=["']\s*["']/))&&r++;r>0?i.push({type:"images_missing_alt",severity:"high",count:r,message:`${r} of ${o} images missing alt text`,impact:"AI systems cannot understand image content without alt text"}):o>0&&a.push(`All ${o} images have alt text`);let h=s.match(/<h1[^>]*>/gi)||[],c=s.match(/<h2[^>]*>/gi)||[],l=s.match(/<h3[^>]*>/gi)||[];0===h.length?i.push({type:"missing_h1",severity:"high",message:"Page is missing an H1 heading",impact:"AI systems use H1 to understand the main topic"}):h.length>1?i.push({type:"multiple_h1",severity:"medium",count:h.length,message:`Page has ${h.length} H1 headings (should have exactly 1)`,impact:"Multiple H1s can confuse AI about the main topic"}):a.push("Page has exactly one H1 heading"),c.length>0&&a.push(`Page has ${c.length} H2 section headings`);let p=/<main[^>]*>/i.test(s),u=/<nav[^>]*>/i.test(s),g=/<article[^>]*>/i.test(s),d=/<header[^>]*>/i.test(s),y=/<footer[^>]*>/i.test(s),v=[{name:"main",present:p},{name:"nav",present:u},{name:"header",present:d},{name:"footer",present:y}].filter(e=>!e.present).map(e=>e.name);v.length>0?i.push({type:"missing_semantic_html",severity:"medium",missing:v,message:`Missing semantic elements: ${v.join(", ")}`,impact:"Semantic HTML helps AI understand page structure"}):a.push("Page uses semantic HTML elements (main, nav, header, footer)"),/<html[^>]*lang=["'][^"']+["']/i.test(s)?a.push("Page has language attribute set"):i.push({type:"missing_lang",severity:"medium",message:"HTML element missing lang attribute",impact:"AI needs language info for proper content processing"}),/<meta[^>]*name=["']description["'][^>]*content=["'][^"']+["']/i.test(s)?a.push("Page has meta description"):i.push({type:"missing_meta_description",severity:"high",message:"Page is missing meta description",impact:"Meta description is often used by AI for summarization"});let f=s.match(/<a[^>]*>[\s\S]*?<\/a>/gi)||[],x=0;for(let e of f)!e.replace(/<[^>]*>/g,"").trim()&&!e.includes("aria-label")&&x++;x>0&&i.push({type:"empty_links",severity:"medium",count:x,message:`${x} links have no accessible text`,impact:"AI cannot understand the purpose of links without text"});let P=i.filter(e=>"high"===e.severity).length,b=i.filter(e=>"medium"===e.severity).length,A=i.filter(e=>"low"===e.severity).length;return m.NextResponse.json({success:!0,url:t,score:Math.max(0,100-20*P-10*b-5*A),issues:i,passes:a,summary:{totalIssues:i.length,highSeverity:P,mediumSeverity:b,lowSeverity:A,totalImages:o,imagesWithAlt:o-r,headingStructure:{h1:h.length,h2:c.length,h3:l.length},semanticHtml:{main:p,nav:u,article:g,header:d,footer:y}}})}catch(e){return m.NextResponse.json({error:`Accessibility check failed: ${e instanceof Error?e.message:"Unknown error"}`},{status:500})}}let h=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/analysis/accessibility-check/route",pathname:"/api/analysis/accessibility-check",filename:"route",bundlePath:"app/api/analysis/accessibility-check/route"},resolvedPagePath:"/app/frontend/app/api/analysis/accessibility-check/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:p}=h,u="/api/analysis/accessibility-check/route";function g(){return(0,r.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:l})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[948,972],()=>s(8126));module.exports=i})();