"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/initial-scan/route";
exports.ids = ["app/api/initial-scan/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finitial-scan%2Froute&page=%2Fapi%2Finitial-scan%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finitial-scan%2Froute.ts&appDir=%2Fapp%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finitial-scan%2Froute&page=%2Fapi%2Finitial-scan%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finitial-scan%2Froute.ts&appDir=%2Fapp%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _app_frontend_app_api_initial_scan_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/initial-scan/route.ts */ \"(rsc)/./app/api/initial-scan/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/initial-scan/route\",\n        pathname: \"/api/initial-scan\",\n        filename: \"route\",\n        bundlePath: \"app/api/initial-scan/route\"\n    },\n    resolvedPagePath: \"/app/frontend/app/api/initial-scan/route.ts\",\n    nextConfigOutput,\n    userland: _app_frontend_app_api_initial_scan_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/initial-scan/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZpbml0aWFsLXNjYW4lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmluaXRpYWwtc2NhbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmluaXRpYWwtc2NhbiUyRnJvdXRlLnRzJmFwcERpcj0lMkZhcHAlMkZmcm9udGVuZCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGYXBwJTJGZnJvbnRlbmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ0w7QUFDeEU7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXVyby13ZWItZnJvbnRlbmQvPzdlNDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL2FwcC9mcm9udGVuZC9hcHAvYXBpL2luaXRpYWwtc2Nhbi9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvaW5pdGlhbC1zY2FuL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvaW5pdGlhbC1zY2FuXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9pbml0aWFsLXNjYW4vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvYXBwL2Zyb250ZW5kL2FwcC9hcGkvaW5pdGlhbC1zY2FuL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9pbml0aWFsLXNjYW4vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finitial-scan%2Froute&page=%2Fapi%2Finitial-scan%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finitial-scan%2Froute.ts&appDir=%2Fapp%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/initial-scan/route.ts":
/*!***************************************!*\
  !*** ./app/api/initial-scan/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ai */ \"(rsc)/../node_modules/ai/dist/index.mjs\");\n\n\n// API keys\n// const FIRECRAWL_API_KEY = \"fc-7fc5a013a18548f68c5267c5ba448bab\" // Removed FIRECRAWL_API_KEY - using direct fetch instead\nconst BROWSER_USER_AGENTS = [\n    \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\",\n    \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\",\n    \"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:121.0) Gecko/20100101 Firefox/121.0\",\n    \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.2 Safari/605.1.15\"\n];\nasync function fetchWithRetry(url, options = {}, maxRetries = 2) {\n    const timeout = options.timeout || 5000;\n    for(let attempt = 0; attempt <= maxRetries; attempt++){\n        const userAgent = BROWSER_USER_AGENTS[attempt % BROWSER_USER_AGENTS.length];\n        try {\n            const controller = new AbortController();\n            const timeoutId = setTimeout(()=>controller.abort(), timeout);\n            // Remove any external signal and timeout to prevent conflicts\n            const { signal: _externalSignal, timeout: _timeout, ...restOptions } = options;\n            let response;\n            try {\n                response = await fetch(url, {\n                    ...restOptions,\n                    headers: {\n                        ...options.headers,\n                        \"User-Agent\": userAgent,\n                        Accept: \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\",\n                        \"Accept-Language\": \"en-US,en;q=0.9\",\n                        \"Accept-Encoding\": \"gzip, deflate, br\"\n                    },\n                    signal: controller.signal,\n                    cache: \"no-store\"\n                });\n            } catch (fetchError) {\n                clearTimeout(timeoutId);\n                continue;\n            }\n            clearTimeout(timeoutId);\n            if (!response.ok) {\n                try {\n                    // Consume the body to prevent the runtime logging it\n                    await response.text();\n                } catch  {\n                // Ignore body consumption errors\n                }\n                // For 403/429, try with a different User-Agent\n                if (response.status === 403 || response.status === 429) {\n                    continue;\n                }\n                // For other non-OK responses (404, 500, etc), return null gracefully\n                return null;\n            }\n            return response;\n        } catch  {\n            continue;\n        }\n    }\n    return null;\n}\nasync function silentFetch(url, timeout = 3000) {\n    try {\n        const controller = new AbortController();\n        const timeoutId = setTimeout(()=>controller.abort(), timeout);\n        let response;\n        try {\n            response = await fetch(url, {\n                method: \"GET\",\n                headers: {\n                    \"User-Agent\": BROWSER_USER_AGENTS[0],\n                    Accept: \"*/*\",\n                    \"Accept-Language\": \"en-US,en;q=0.9\"\n                },\n                signal: controller.signal,\n                cache: \"no-store\"\n            });\n        } catch  {\n            clearTimeout(timeoutId);\n            return {\n                ok: false,\n                text: \"\",\n                contentType: \"\",\n                status: 0\n            };\n        }\n        clearTimeout(timeoutId);\n        if (response.status === 404) {\n            return {\n                ok: false,\n                text: \"\",\n                contentType: \"\",\n                status: 404\n            };\n        }\n        // For other non-OK responses, silently consume the body\n        if (!response.ok) {\n            try {\n                await response.text();\n            } catch  {\n            // Ignore\n            }\n            return {\n                ok: false,\n                text: \"\",\n                contentType: response.headers.get(\"content-type\") || \"\",\n                status: response.status\n            };\n        }\n        // Only read body for successful responses\n        const text = await response.text().catch(()=>\"\");\n        return {\n            ok: true,\n            text,\n            contentType: response.headers.get(\"content-type\") || \"\",\n            status: response.status\n        };\n    } catch  {\n        return {\n            ok: false,\n            text: \"\",\n            contentType: \"\",\n            status: 0\n        };\n    }\n}\n// Industry benchmarks for score context\nconst INDUSTRY_BENCHMARKS = {\n    ecommerce: {\n        average: 42,\n        top25: 68,\n        top10: 85\n    },\n    saas: {\n        average: 51,\n        top25: 72,\n        top10: 88\n    },\n    media: {\n        average: 38,\n        top25: 61,\n        top10: 79\n    },\n    local_business: {\n        average: 28,\n        top25: 52,\n        top10: 71\n    },\n    general: {\n        average: 35,\n        top25: 58,\n        top10: 78\n    }\n};\nfunction validateUrl(url) {\n    let validUrl = url.trim();\n    if (!validUrl.startsWith(\"http://\") && !validUrl.startsWith(\"https://\")) {\n        validUrl = \"https://\" + validUrl;\n    }\n    try {\n        new URL(validUrl);\n        return validUrl;\n    } catch  {\n        throw new Error(\"Invalid URL format\");\n    }\n}\n// Safe wrapper for async operations\nasync function safeCheck(fn, fallback) {\n    try {\n        return await fn();\n    } catch  {\n        return fallback;\n    }\n}\nasync function crawlWithFirecrawl(url) {\n    const problematicDomains = [\n        \"linkedin.com\",\n        \"facebook.com\",\n        \"instagram.com\",\n        \"twitter.com\",\n        \"x.com\",\n        \"tiktok.com\",\n        \"pinterest.com\",\n        \"reddit.com\",\n        \"amazon.com\",\n        \"xing.com\"\n    ];\n    const urlHost = new URL(url).hostname.toLowerCase();\n    const isProblematicDomain = problematicDomains.some((domain)=>urlHost.includes(domain));\n    if (isProblematicDomain) {\n        return await basicFetch(url);\n    }\n    try {\n        // Removed FIRECRAWL_API_KEY usage\n        const response = await fetch(\"https://api.firecrawl.dev/v1/scrape\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                // Authorization: `Bearer ${FIRECRAWL_API_KEY}`, // Removed FIRECRAWL_API_KEY\n                Authorization: `Bearer ${process.env.FIRECRAWL_API_KEY}`\n            },\n            body: JSON.stringify({\n                url,\n                formats: [\n                    \"html\",\n                    \"markdown\"\n                ],\n                includeTags: [\n                    \"title\",\n                    \"meta\",\n                    \"h1\",\n                    \"h2\",\n                    \"h3\",\n                    \"p\",\n                    \"script\",\n                    \"a\"\n                ],\n                waitFor: 3000\n            })\n        });\n        if (response.status === 403) {\n            return await basicFetch(url);\n        }\n        if (!response.ok) {\n            return await basicFetch(url);\n        }\n        const data = await response.json();\n        return {\n            status: \"found\",\n            html: data.data?.html || \"\",\n            markdown: data.data?.markdown || \"\",\n            metadata: data.data?.metadata || {},\n            links: data.data?.links || []\n        };\n    } catch  {\n        return await basicFetch(url);\n    }\n}\nasync function basicFetch(url) {\n    try {\n        const response = await fetch(url, {\n            headers: {\n                \"User-Agent\": \"Mozilla/5.0 (compatible; AIReadinessBot/1.0; +https://example.com/bot)\",\n                Accept: \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\",\n                \"Accept-Language\": \"en-US,en;q=0.5\"\n            },\n            signal: AbortSignal.timeout(10000),\n            redirect: \"follow\"\n        });\n        if (!response.ok) {\n            return {\n                status: \"check_failed\",\n                html: \"\",\n                markdown: \"\",\n                metadata: {},\n                links: [],\n                error: `HTTP ${response.status}: Could not access website`\n            };\n        }\n        const html = await response.text();\n        const titleMatch = html.match(/<title[^>]*>([^<]+)<\\/title>/i);\n        const descMatch = html.match(/<meta[^>]*name=[\"']description[\"'][^>]*content=[\"']([^\"']+)[\"']/i);\n        return {\n            status: \"found\",\n            html,\n            markdown: \"\",\n            metadata: {\n                title: titleMatch?.[1] || \"\",\n                description: descMatch?.[1] || \"\"\n            },\n            links: []\n        };\n    } catch (error) {\n        return {\n            status: \"check_failed\",\n            html: \"\",\n            markdown: \"\",\n            metadata: {},\n            links: [],\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\nasync function checkSeo(baseUrl) {\n    try {\n        const response = await fetchWithRetry(baseUrl, {\n            timeout: 10000\n        });\n        if (!response) {\n            return {\n                status: \"check_failed\",\n                error: \"Failed to fetch the homepage\"\n            };\n        }\n        if (!response.ok) {\n            return {\n                status: \"check_failed\",\n                error: `HTTP ${response.status}`\n            };\n        }\n        const html = await response.text();\n        const titleMatch = html.match(/<title>([\\s\\S]*)<\\/title>/i);\n        const descriptionMatch = html.match(/<meta name=\"description\" content=\"([\\s\\S]*?)\"/i);\n        const canonicalMatch = html.match(/<link rel=\"canonical\" href=\"([\\s\\S]*?)\"/i);\n        const ogTags = {};\n        const ogRegex = /<meta property=\"og:([^\"]+)\" content=\"([^\"]*)\"/gi;\n        let ogMatch;\n        while((ogMatch = ogRegex.exec(html)) !== null){\n            ogTags[ogMatch[1]] = ogMatch[2];\n        }\n        const twitterTags = {};\n        const twitterRegex = /<meta name=\"twitter:([^\"]+)\" content=\"([^\"]*)\"/gi;\n        let twitterMatch;\n        while((twitterMatch = twitterRegex.exec(html)) !== null){\n            twitterTags[twitterMatch[1]] = twitterMatch[2];\n        }\n        return {\n            status: \"found\",\n            title: titleMatch?.[1].trim() || \"\",\n            description: descriptionMatch?.[1].trim() || \"\",\n            canonical: canonicalMatch?.[1].trim() || \"\",\n            ogTags,\n            twitterTags\n        };\n    } catch (error) {\n        return {\n            status: \"check_failed\",\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\nasync function checkRobotsTxt(baseUrl) {\n    try {\n        const robotsUrl = new URL(\"/robots.txt\", baseUrl).toString();\n        const result = await silentFetch(robotsUrl, 5000);\n        if (!result.ok) {\n            if (result.status === 404) {\n                return {\n                    status: \"not_found\",\n                    content: \"\",\n                    hasSitemap: false,\n                    hasDisallow: false\n                };\n            }\n            return {\n                status: \"check_failed\",\n                content: \"\",\n                hasSitemap: false,\n                hasDisallow: false,\n                error: result.status ? `HTTP ${result.status}` : \"Failed to fetch robots.txt\"\n            };\n        }\n        const content = result.text;\n        const hasSitemap = content.toLowerCase().includes(\"sitemap:\");\n        const hasDisallow = content.toLowerCase().includes(\"disallow:\");\n        // Check for AI directives\n        let hasAiDirectives = false;\n        const blockedBots = [];\n        const allowedBots = [];\n        let currentBlock = null;\n        content.split(\"\\n\").forEach((line)=>{\n            line = line.trim();\n            if (!line || line.startsWith(\"#\")) return;\n            if (line.toLowerCase().startsWith(\"user-agent:\")) {\n                if (currentBlock) {\n                    if (currentBlock.userAgent.toLowerCase().includes(\"ai\") || currentBlock.userAgent.toLowerCase().includes(\"gpt\")) {\n                        hasAiDirectives = true;\n                        if (currentBlock.disallows.length > 0) {\n                            blockedBots.push(`${currentBlock.userAgent} (Disallowed: ${currentBlock.disallows.join(\", \")})`);\n                        }\n                        if (currentBlock.allows.length > 0) {\n                            allowedBots.push(`${currentBlock.userAgent} (Allowed: ${currentBlock.allows.join(\", \")})`);\n                        }\n                    }\n                }\n                currentBlock = {\n                    userAgent: line.substring(\"User-agent:\".length).trim(),\n                    disallows: [],\n                    allows: []\n                };\n            } else if (line.toLowerCase().startsWith(\"disallow:\") && currentBlock) {\n                currentBlock.disallows.push(line.substring(\"Disallow:\".length).trim());\n            } else if (line.toLowerCase().startsWith(\"allow:\") && currentBlock) {\n                currentBlock.allows.push(line.substring(\"Allow:\".length).trim());\n            }\n        });\n        if (currentBlock) {\n            if (currentBlock.userAgent.toLowerCase().includes(\"ai\") || currentBlock.userAgent.toLowerCase().includes(\"gpt\")) {\n                hasAiDirectives = true;\n                if (currentBlock.disallows.length > 0) {\n                    blockedBots.push(`${currentBlock.userAgent} (Disallowed: ${currentBlock.disallows.join(\", \")})`);\n                }\n                if (currentBlock.allows.length > 0) {\n                    allowedBots.push(`${currentBlock.userAgent} (Allowed: ${currentBlock.allows.join(\", \")})`);\n                }\n            }\n        }\n        return {\n            status: \"found\",\n            content,\n            hasSitemap,\n            hasDisallow,\n            hasAiDirectives,\n            blockedBots,\n            allowedBots\n        };\n    } catch (error) {\n        return {\n            status: \"check_failed\",\n            content: \"\",\n            hasSitemap: false,\n            hasDisallow: false,\n            hasAiDirectives: false,\n            blockedBots: [],\n            allowedBots: [],\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\nasync function checkSitemap(baseUrl) {\n    try {\n        const sitemapPaths = [\n            \"/sitemap.xml\",\n            \"/sitemap_index.xml\",\n            \"/sitemap/sitemap.xml\"\n        ];\n        for (const path of sitemapPaths){\n            const sitemapUrl = new URL(path, baseUrl).toString();\n            const result = await silentFetch(sitemapUrl, 5000);\n            if (!result.ok) {\n                continue;\n            }\n            const content = result.text;\n            if (content.includes(\"<urlset\") || content.includes(\"<sitemapindex\")) {\n                const urlMatches = content.match(/<loc>(.*?)<\\/loc>/g);\n                const urls = urlMatches?.map((m)=>m.replace(/<\\/?loc>/g, \"\")) || [];\n                return {\n                    status: \"found\",\n                    urlCount: urls.length,\n                    sitemapUrls: urls.slice(0, 10),\n                    url: sitemapUrl\n                };\n            }\n        }\n        return {\n            status: \"not_found\",\n            urlCount: 0,\n            sitemapUrls: []\n        };\n    } catch (error) {\n        return {\n            status: \"check_failed\",\n            urlCount: 0,\n            sitemapUrls: [],\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\nasync function checkRssFeed(baseUrl) {\n    const feedPaths = [\n        \"/feed\",\n        \"/rss\",\n        \"/feed.xml\",\n        \"/rss.xml\",\n        \"/atom.xml\"\n    ];\n    for (const path of feedPaths){\n        const feedUrl = new URL(path, baseUrl).toString();\n        const result = await silentFetch(feedUrl, 5000);\n        if (!result.ok) {\n            continue;\n        }\n        const content = result.text;\n        if (content.includes(\"<rss\") || content.includes(\"<feed\") || content.includes(\"<channel\")) {\n            const itemMatches = content.match(/<item>|<entry>/g);\n            return {\n                status: \"found\",\n                feedUrl,\n                itemCount: itemMatches?.length || 0\n            };\n        }\n    }\n    return {\n        status: \"not_found\",\n        itemCount: 0\n    };\n}\nasync function checkLlmsTxt(baseUrl) {\n    try {\n        const llmsUrl = new URL(\"/llms.txt\", baseUrl).toString();\n        const result = await silentFetch(llmsUrl, 5000);\n        if (!result.ok) {\n            return {\n                status: \"not_found\",\n                content: \"\",\n                hasInstructions: false\n            };\n        }\n        if (result.contentType.includes(\"text/html\")) {\n            return {\n                status: \"not_found\",\n                content: \"\",\n                hasInstructions: false\n            };\n        }\n        const content = result.text;\n        if (content.trim().startsWith(\"<!DOCTYPE\") || content.trim().startsWith(\"<html\") || content.trim().startsWith(\"<HTML\")) {\n            return {\n                status: \"not_found\",\n                content: \"\",\n                hasInstructions: false\n            };\n        }\n        const hasInstructions = content.length > 50 && (content.toLowerCase().includes(\"llm\") || content.toLowerCase().includes(\"ai\") || content.toLowerCase().includes(\"model\") || content.toLowerCase().includes(\"instruction\"));\n        return {\n            status: \"found\",\n            content,\n            hasInstructions\n        };\n    } catch  {\n        return {\n            status: \"not_found\",\n            content: \"\",\n            hasInstructions: false\n        };\n    }\n}\nasync function checkAiManifest(baseUrl) {\n    const manifestPaths = [\n        \"/.well-known/ai-manifest.json\",\n        \"/ai-manifest.json\",\n        \"/.well-known/ai-plugin.json\"\n    ];\n    for (const path of manifestPaths){\n        const manifestUrl = new URL(path, baseUrl).toString();\n        const result = await silentFetch(manifestUrl, 5000);\n        if (!result.ok) {\n            continue;\n        }\n        if (!result.contentType.includes(\"application/json\") && !result.contentType.includes(\"text/plain\")) {\n            continue;\n        }\n        const content = result.text;\n        if (content.trim().startsWith(\"<!DOCTYPE\") || content.trim().startsWith(\"<html\")) {\n            continue;\n        }\n        try {\n            const parsed = JSON.parse(content);\n            const version = parsed.api?.version || parsed.version;\n            return {\n                status: \"found\",\n                content,\n                version\n            };\n        } catch  {\n            continue;\n        }\n    }\n    return {\n        status: \"not_found\",\n        content: \"\"\n    };\n}\nasync function checkMcpConfig(baseUrl) {\n    const mcpPaths = [\n        \"/.well-known/mcp.json\",\n        \"/mcp.json\"\n    ];\n    for (const path of mcpPaths){\n        const mcpUrl = new URL(path, baseUrl).toString();\n        const result = await silentFetch(mcpUrl, 5000);\n        if (!result.ok) {\n            continue;\n        }\n        if (!result.contentType.includes(\"application/json\") && !result.contentType.includes(\"text/plain\")) {\n            continue;\n        }\n        const content = result.text;\n        if (content.trim().startsWith(\"<!DOCTYPE\") || content.trim().startsWith(\"<html\")) {\n            continue;\n        }\n        try {\n            const parsed = JSON.parse(content);\n            const tools = parsed.tools || [];\n            return {\n                status: \"found\",\n                content,\n                tools\n            };\n        } catch  {\n            continue;\n        }\n    }\n    return {\n        status: \"not_found\",\n        content: \"\"\n    };\n}\nasync function checkOpenApi(baseUrl) {\n    const openApiPaths = [\n        \"/openapi.json\",\n        \"/swagger.json\",\n        \"/api-docs\",\n        \"/api/openapi.json\",\n        \"/api/swagger.json\"\n    ];\n    for (const path of openApiPaths){\n        try {\n            const apiUrl = new URL(path, baseUrl).toString();\n            const result = await silentFetch(apiUrl, 5000);\n            if (!result.ok || !result.text) {\n                continue;\n            }\n            const contentType = result.contentType.toLowerCase();\n            if (contentType.includes(\"text/html\")) {\n                continue;\n            }\n            const content = result.text;\n            const trimmedContent = content.trim();\n            if (trimmedContent.startsWith(\"<!DOCTYPE\") || trimmedContent.startsWith(\"<html\") || trimmedContent.startsWith(\"<HTML\")) {\n                continue;\n            }\n            try {\n                const parsed = JSON.parse(content);\n                if (parsed.openapi || parsed.swagger) {\n                    return {\n                        status: \"found\",\n                        content,\n                        version: parsed.openapi || parsed.swagger\n                    };\n                }\n            } catch  {\n                continue;\n            }\n        } catch  {\n            continue;\n        }\n    }\n    return {\n        status: \"not_found\",\n        content: \"\"\n    };\n}\nfunction extractJsonLdSchemas(html) {\n    const schemas = [];\n    const types = [];\n    const scriptRegex = /<script[^>]*type=[\"']application\\/ld\\+json[\"'][^>]*>([\\s\\S]*?)<\\/script>/gi;\n    let match;\n    while((match = scriptRegex.exec(html)) !== null){\n        try {\n            const parsed = JSON.parse(match[1]);\n            schemas.push(parsed);\n            if (Array.isArray(parsed)) {\n                parsed.forEach((item)=>{\n                    if (item[\"@type\"]) {\n                        types.push(Array.isArray(item[\"@type\"]) ? item[\"@type\"].join(\", \") : item[\"@type\"]);\n                    }\n                });\n            } else if (parsed[\"@type\"]) {\n                types.push(Array.isArray(parsed[\"@type\"]) ? parsed[\"@type\"].join(\", \") : parsed[\"@type\"]);\n            } else if (parsed[\"@graph\"]) {\n                parsed[\"@graph\"].forEach((item)=>{\n                    if (item[\"@type\"]) {\n                        const itemType = item[\"@type\"];\n                        types.push(Array.isArray(itemType) ? itemType.join(\", \") : String(itemType));\n                    }\n                });\n            }\n        } catch  {\n        // Invalid JSON-LD\n        }\n    }\n    return {\n        types: [\n            ...new Set(types)\n        ],\n        schemas\n    };\n}\nfunction extractMetaTags(html) {\n    const metaTags = {};\n    const metaRegex = /<meta[^>]*>/gi;\n    let match;\n    while((match = metaRegex.exec(html)) !== null){\n        const nameMatch = match[0].match(/(?:name|property)=[\"']([^\"']+)[\"']/i);\n        const contentMatch = match[0].match(/content=[\"']([^\"']+)[\"']/i);\n        if (nameMatch && contentMatch) {\n            metaTags[nameMatch[1]] = contentMatch[1];\n        }\n    }\n    return metaTags;\n}\nfunction extractHeadings(html) {\n    const h1s = [];\n    const h2s = [];\n    const h3s = [];\n    const h1Regex = /<h1[^>]*>([\\s\\S]*?)<\\/h1>/gi;\n    const h2Regex = /<h2[^>]*>([\\s\\S]*?)<\\/h2>/gi;\n    const h3Regex = /<h3[^>]*>([\\s\\S]*?)<\\/h3>/gi;\n    let match;\n    while((match = h1Regex.exec(html)) !== null){\n        h1s.push(match[1].replace(/<[^>]+>/g, \"\").trim());\n    }\n    while((match = h2Regex.exec(html)) !== null){\n        h2s.push(match[1].replace(/<[^>]+>/g, \"\").trim());\n    }\n    while((match = h3Regex.exec(html)) !== null){\n        h3s.push(match[1].replace(/<[^>]+>/g, \"\").trim());\n    }\n    return {\n        h1: h1s,\n        h2: h2s,\n        h3: h3s\n    };\n}\nasync function analyzeContentWithAI(url, html, markdown, metadata) {\n    const content = markdown || html.replace(/<[^>]+>/g, \" \").substring(0, 15000);\n    const title = metadata.title || \"\";\n    const domain = new URL(url).hostname.replace(\"www.\", \"\");\n    const defaultResponse = {\n        topicRecognition: {\n            primaryTopic: \"Unknown\",\n            secondaryTopics: [],\n            industry: \"general\",\n            contentType: \"webpage\",\n            keywords: [],\n            entities: [],\n            targetAudience: \"General audience\"\n        },\n        contentGap: {\n            missingTopics: [],\n            missingQuestions: [],\n            contentScore: 50,\n            recommendations: [\n                \"Unable to analyze content\"\n            ]\n        },\n        napData: {\n            name: null,\n            address: null,\n            phone: null,\n            email: null,\n            isComplete: false\n        },\n        factCheck: {\n            claims: [],\n            overallCredibility: 50,\n            recommendations: []\n        },\n        userQuestions: []\n    };\n    if (content.trim().length < 100) {\n        return defaultResponse;\n    }\n    try {\n        const { text } = await (0,ai__WEBPACK_IMPORTED_MODULE_1__.generateText)({\n            model: \"anthropic/claude-sonnet-4-20250514\",\n            prompt: `You are an AI content analyzer. Analyze this website thoroughly.\n\nURL: ${url}\nDomain: ${domain}\nTitle: ${title}\nContent (first 12000 chars): ${content.substring(0, 12000)}\n\nIMPORTANT: Extract as much information as possible from the content. Even if information is limited, make educated guesses based on the domain name and any available text.\n\nRespond with ONLY a valid JSON object (no markdown, no explanation):\n{\n  \"topicRecognition\": {\n    \"primaryTopic\": \"main topic based on content and domain name\",\n    \"secondaryTopics\": [\"related topic 1\", \"related topic 2\"],\n    \"industry\": \"one of: ecommerce, saas, media, local_business, education, healthcare, finance, technology, general\",\n    \"contentType\": \"landing page, blog, product page, service page, corporate website, etc.\",\n    \"keywords\": [\"key\", \"words\", \"from\", \"content\"],\n    \"entities\": [{\"name\": \"company or brand name\", \"type\": \"organization\"}],\n    \"targetAudience\": \"who this website is for\"\n  },\n  \"contentGap\": {\n    \"missingTopics\": [\"important topics not covered\"],\n    \"missingQuestions\": [\"questions visitors might have that aren't answered\"],\n    \"contentScore\": 65,\n    \"recommendations\": [\"specific improvement suggestions\"]\n  },\n  \"napData\": {\n    \"name\": \"business name if found, otherwise null\",\n    \"address\": \"full address if found, otherwise null\",\n    \"phone\": \"phone number if found, otherwise null\",\n    \"email\": \"email if found, otherwise null\",\n    \"isComplete\": false\n  },\n  \"factCheck\": {\n    \"claims\": [{\"claim\": \"any factual claims made\", \"verifiable\": true, \"issue\": null}],\n    \"overallCredibility\": 70,\n    \"recommendations\": [\"how to improve credibility\"]\n  },\n  \"userQuestions\": [\"what would someone ask an AI about this business?\", \"another likely question\"]\n}`\n        });\n        let jsonText = text.trim();\n        if (jsonText.startsWith(\"```\")) {\n            jsonText = jsonText.replace(/^```(?:json)?\\n?/, \"\").replace(/\\n?```$/, \"\");\n        }\n        const jsonMatch = jsonText.match(/\\{[\\s\\S]*\\}/);\n        if (jsonMatch) {\n            jsonText = jsonMatch[0];\n        }\n        const parsed = JSON.parse(jsonText);\n        return {\n            topicRecognition: {\n                primaryTopic: parsed.topicRecognition?.primaryTopic || defaultResponse.topicRecognition.primaryTopic,\n                secondaryTopics: parsed.topicRecognition?.secondaryTopics || [],\n                industry: parsed.topicRecognition?.industry || \"general\",\n                contentType: parsed.topicRecognition?.contentType || \"webpage\",\n                keywords: parsed.topicRecognition?.keywords || [],\n                entities: parsed.topicRecognition?.entities || [],\n                targetAudience: parsed.topicRecognition?.targetAudience || \"General audience\"\n            },\n            contentGap: {\n                missingTopics: parsed.contentGap?.missingTopics || [],\n                missingQuestions: parsed.contentGap?.missingQuestions || [],\n                contentScore: parsed.contentGap?.contentScore || 50,\n                recommendations: parsed.contentGap?.recommendations || []\n            },\n            napData: {\n                name: parsed.napData?.name || null,\n                address: parsed.napData?.address || null,\n                phone: parsed.napData?.phone || null,\n                email: parsed.napData?.email || null,\n                isComplete: parsed.napData?.isComplete || false\n            },\n            factCheck: {\n                claims: parsed.factCheck?.claims || [],\n                overallCredibility: parsed.factCheck?.overallCredibility || 50,\n                recommendations: parsed.factCheck?.recommendations || []\n            },\n            userQuestions: parsed.userQuestions || []\n        };\n    } catch  {\n        return defaultResponse;\n    }\n}\nasync function buildCompanyProfile(url, html, markdown, metadata, napData, topicRecognition) {\n    const domain = new URL(url).hostname.replace(\"www.\", \"\");\n    const content = markdown || html.replace(/<[^>]+>/g, \" \").substring(0, 10000);\n    const title = metadata.title || \"\";\n    try {\n        const { text } = await (0,ai__WEBPACK_IMPORTED_MODULE_1__.generateText)({\n            model: \"anthropic/claude-sonnet-4-20250514\",\n            prompt: `Analyze this company/website to build a detailed profile for competitor identification.\n\nURL: ${url}\nDomain: ${domain}\nTitle: ${title}\nKnown Business Name: ${napData.name || \"Unknown\"}\nKnown Address: ${napData.address || \"Not found\"}\nKnown Phone: ${napData.phone || \"Not found\"}\nIndustry Hint: ${topicRecognition.industry}\nPrimary Topic: ${topicRecognition.primaryTopic}\n\nContent excerpt:\n${content.substring(0, 8000)}\n\nBuild a comprehensive company profile. Extract or infer:\n1. Company name (from content, domain, or NAP data)\n2. Industry/sector\n3. Main services or products offered\n4. Location (city, region/state, country) - extract from address, phone area code, content mentions\n5. Target market (B2B, B2C, local, regional, national, international)\n6. Unique selling points or differentiators\n7. Business type (service provider, retailer, manufacturer, agency, nonprofit, media, etc.)\n\nReturn ONLY valid JSON:\n{\n  \"companyName\": \"Company Name\",\n  \"industry\": \"specific industry like digital sustainability, web development, local plumbing\",\n  \"services\": [\"service 1\", \"service 2\", \"service 3\"],\n  \"location\": {\n    \"city\": \"City name or null\",\n    \"region\": \"State/Region or null\",\n    \"country\": \"Country or null\"\n  },\n  \"targetMarket\": \"local, regional, national, or international\",\n  \"uniqueSellingPoints\": [\"what makes them different\"],\n  \"businessType\": \"type of business\"\n}`\n        });\n        const cleaned = text.replace(/```json\\n?|\\n?```/g, \"\").trim();\n        const jsonMatch = cleaned.match(/\\{[\\s\\S]*\\}/);\n        const parsed = JSON.parse(jsonMatch ? jsonMatch[0] : cleaned);\n        return {\n            companyName: parsed.companyName || napData.name || domain,\n            industry: parsed.industry || topicRecognition.industry,\n            services: parsed.services || [],\n            location: {\n                city: parsed.location?.city || null,\n                region: parsed.location?.region || null,\n                country: parsed.location?.country || null\n            },\n            targetMarket: parsed.targetMarket || \"general\",\n            uniqueSellingPoints: parsed.uniqueSellingPoints || [],\n            businessType: parsed.businessType || \"business\"\n        };\n    } catch  {\n        return {\n            companyName: napData.name || domain,\n            industry: topicRecognition.industry,\n            services: [],\n            location: {\n                city: null,\n                region: null,\n                country: null\n            },\n            targetMarket: \"general\",\n            uniqueSellingPoints: [],\n            businessType: \"business\"\n        };\n    }\n}\nasync function identifyCompetitorsWithSearch(url, companyProfile) {\n    const domain = new URL(url).hostname.replace(\"www.\", \"\");\n    const locationParts = [\n        companyProfile.location.city,\n        companyProfile.location.region,\n        companyProfile.location.country\n    ].filter(Boolean).join(\", \");\n    const servicesStr = companyProfile.services.slice(0, 5).join(\", \") || companyProfile.industry;\n    const searchContext = `\nCompany Profile:\n- Name: ${companyProfile.companyName}\n- Domain: ${domain}\n- Industry: ${companyProfile.industry}\n- Services: ${servicesStr}\n- Location: ${locationParts || \"Not specified\"}\n- Target Market: ${companyProfile.targetMarket}\n- Business Type: ${companyProfile.businessType}\n- Unique Selling Points: ${companyProfile.uniqueSellingPoints.join(\", \") || \"Not specified\"}\n`;\n    console.log(\"[v0] Starting competitor search for:\", domain);\n    console.log(\"[v0] Company profile:\", JSON.stringify(companyProfile, null, 2));\n    try {\n        const { text } = await (0,ai__WEBPACK_IMPORTED_MODULE_1__.generateText)({\n            model: \"google/gemini-2.0-flash-001\",\n            providerOptions: {\n                google: {\n                    useSearchGrounding: true\n                }\n            },\n            prompt: `Find direct competitors for this company. Use web search to find REAL, currently active competitors.\n\n${searchContext}\n\nCOMPETITOR SEARCH CRITERIA:\n1. SAME LOCATION: If this is a local/regional business, find competitors in ${locationParts || \"the same area\"}\n2. SAME INDUSTRY: Must be in \"${companyProfile.industry}\" or closely related field\n3. SAME SERVICES: Offering similar services: ${servicesStr}\n4. SAME TARGET MARKET: Targeting ${companyProfile.targetMarket} customers\n5. SIMILAR SIZE: Similar business type (${companyProfile.businessType})\n\nFor each competitor, identify:\n- Their exact business name and website URL\n- What services they offer that compete\n- Why they are a direct competitor (be specific about overlap)\n- Competitor type: \"direct\" (same services, same location), \"indirect\" (related services), or \"aspirational\" (larger player in same industry)\n\nReturn ONLY valid JSON array with 3-5 competitors:\n[\n  {\n    \"name\": \"Competitor Company Name\",\n    \"url\": \"https://their-website.com\",\n    \"description\": \"What they do and their main services\",\n    \"reason\": \"Specific reason why they compete - mention shared location, services, or target market\",\n    \"competitorType\": \"direct\"\n  }\n]\n\nIMPORTANT:\n- Do NOT include ${domain} or ${companyProfile.companyName}\n- Only include REAL companies with working websites\n- Prioritize competitors in ${locationParts || \"the same geographic market\"} first\n- If local business, focus on LOCAL competitors`\n        });\n        console.log(\"[v0] Gemini competitor search raw response:\", text?.substring(0, 500));\n        let competitors = [];\n        try {\n            const parsed = JSON.parse(text || \"[]\");\n            competitors = Array.isArray(parsed) ? parsed : parsed.competitors || [];\n            console.log(\"[v0] Parsed competitors count:\", competitors.length);\n            console.log(\"[v0] Competitor URLs:\", competitors.map((c)=>c.url));\n        } catch (parseError) {\n            console.log(\"[v0] Failed to parse competitor JSON:\", parseError);\n            // Fallback to Claude if Gemini parsing fails\n            try {\n                const { text: claudeText } = await (0,ai__WEBPACK_IMPORTED_MODULE_1__.generateText)({\n                    model: \"anthropic/claude-sonnet-4-20250514\",\n                    prompt: `Based on your knowledge, identify direct competitors for this company.\n\n${searchContext}\n\nCOMPETITOR SEARCH CRITERIA:\n1. SAME LOCATION: If local/regional business in ${locationParts || \"unknown location\"}, find competitors in that area\n2. SAME INDUSTRY: Must be in \"${companyProfile.industry}\" industry\n3. SAME SERVICES: Offering similar: ${servicesStr}\n4. SAME TARGET: Targeting ${companyProfile.targetMarket} market\n\nFind 3-5 real competitors. For local businesses, prioritize local competitors.\n\nReturn ONLY valid JSON array:\n[\n  {\n    \"name\": \"Competitor Name\",\n    \"url\": \"https://competitor-website.com\",\n    \"description\": \"What they do\",\n    \"reason\": \"Why they compete - mention shared location/services/market\",\n    \"competitorType\": \"direct\"\n  }\n]\n\nDo NOT include ${domain}. Only real companies with actual websites.`\n                });\n                const cleaned = claudeText.replace(/```json\\n?|\\n?```/g, \"\").trim();\n                const jsonMatch = cleaned.match(/\\[[\\s\\S]*\\]/);\n                const parsedClaude = JSON.parse(jsonMatch ? jsonMatch[0] : cleaned);\n                competitors = Array.isArray(parsedClaude) ? parsedClaude : [];\n                console.log(\"[v0] Claude fallback competitors count:\", competitors.length);\n                console.log(\"[v0] Claude fallback competitor URLs:\", competitors.map((c)=>c.url));\n            } catch (claudeError) {\n                console.log(\"[v0] Claude fallback failed:\", claudeError instanceof Error ? claudeError.message : claudeError);\n                return [] // Return empty if both fail\n                ;\n            }\n        }\n        return competitors.slice(0, 5).map((c)=>({\n                name: c.name || \"Unknown\",\n                url: c.url || \"\",\n                description: c.description || \"\",\n                reason: c.reason || \"\",\n                competitorType: c.competitorType || \"direct\"\n            }));\n    } catch (error) {\n        console.log(\"[v0] Competitor search error:\", error instanceof Error ? error.message : error);\n        return [];\n    }\n}\nasync function preScanCompetitor(competitorUrl) {\n    const baseUrl = new URL(competitorUrl).origin;\n    let artifactCount = 0;\n    let reachable = false;\n    const checkEndpoints = [\n        {\n            path: \"/robots.txt\",\n            weight: 1\n        },\n        {\n            path: \"/sitemap.xml\",\n            weight: 1\n        },\n        {\n            path: \"/llms.txt\",\n            weight: 2\n        },\n        {\n            path: \"/.well-known/ai-manifest.json\",\n            weight: 2\n        },\n        {\n            path: \"/feed\",\n            weight: 1\n        },\n        {\n            path: \"/rss\",\n            weight: 1\n        }\n    ];\n    try {\n        const homeResult = await silentFetch(baseUrl, 4000);\n        reachable = homeResult.ok;\n        if (!reachable) {\n            return {\n                url: competitorUrl,\n                artifactCount: 0,\n                reachable: false\n            };\n        }\n        const results = await Promise.allSettled(checkEndpoints.map(async ({ path, weight })=>{\n            const result = await silentFetch(`${baseUrl}${path}`, 2500);\n            if (!result.ok) {\n                return 0;\n            }\n            if (path.includes(\".json\")) {\n                if (!result.contentType.includes(\"application/json\")) {\n                    return 0;\n                }\n                try {\n                    JSON.parse(result.text);\n                    return weight;\n                } catch  {\n                    return 0;\n                }\n            }\n            // Avoid counting HTML error pages as valid artifacts\n            if (!result.contentType.includes(\"text/html\") || path.includes(\".txt\")) {\n                return weight;\n            }\n            // For paths that might return HTML (like /feed), check content\n            if (path === \"/feed\" || path === \"/rss\") {\n                if (result.text.includes(\"<rss\") || result.text.includes(\"<feed\") || result.text.includes(\"<channel\")) {\n                    return weight;\n                }\n            }\n            return 0;\n        }));\n        artifactCount = results.reduce((sum, result)=>{\n            if (result.status === \"fulfilled\") {\n                return sum + result.value;\n            }\n            return sum;\n        }, 0);\n    } catch  {\n        return {\n            url: competitorUrl,\n            artifactCount: 0,\n            reachable: false\n        };\n    }\n    return {\n        url: competitorUrl,\n        artifactCount,\n        reachable\n    };\n}\nasync function scanCompetitorArtifacts(competitorUrl) {\n    console.log(\"[v0] Scanning competitor artifacts for:\", competitorUrl);\n    const defaultNotFound = {\n        jsonLdSchema: {\n            status: \"not_found\",\n            types: []\n        },\n        robotsTxt: {\n            status: \"not_found\",\n            hasAiDirectives: false\n        },\n        sitemap: {\n            status: \"not_found\",\n            urlCount: 0\n        },\n        rssFeed: {\n            status: \"not_found\"\n        },\n        llmsTxt: {\n            status: \"not_found\"\n        },\n        aiManifest: {\n            status: \"not_found\"\n        },\n        mcpConfig: {\n            status: \"not_found\"\n        },\n        openApi: {\n            status: \"not_found\"\n        },\n        crawlSuccess: false\n    };\n    try {\n        const [robotsResult, sitemapResult, llmsResult, aiManifestResult, mcpResult, openApiResult] = await Promise.all([\n            safeCheck(()=>checkRobotsTxt(competitorUrl), {\n                status: \"not_found\",\n                content: \"\",\n                hasSitemap: false,\n                hasDisallow: false,\n                hasAiDirectives: false,\n                blockedBots: [],\n                allowedBots: []\n            }),\n            safeCheck(()=>checkSitemap(competitorUrl), {\n                status: \"not_found\",\n                urlCount: 0,\n                sitemapUrls: []\n            }),\n            safeCheck(()=>checkLlmsTxt(competitorUrl), {\n                status: \"not_found\",\n                content: \"\",\n                hasInstructions: false\n            }),\n            safeCheck(()=>checkAiManifest(competitorUrl), {\n                status: \"not_found\",\n                content: \"\"\n            }),\n            safeCheck(()=>checkMcpConfig(competitorUrl), {\n                status: \"not_found\",\n                content: \"\"\n            }),\n            safeCheck(()=>checkOpenApi(competitorUrl), {\n                status: \"not_found\",\n                content: \"\"\n            })\n        ]);\n        console.log(\"[v0] Artifact results for\", competitorUrl, \":\", {\n            robots: robotsResult.status,\n            sitemap: sitemapResult.status,\n            llms: llmsResult.status\n        });\n        let rssStatus = \"not_found\";\n        let jsonLdTypes = [];\n        let htmlFetchSuccess = false;\n        try {\n            const response = await fetchWithRetry(competitorUrl, {\n                redirect: \"follow\",\n                timeout: 6000\n            }, 2) // Allow up to 2 retries for the main page\n            ;\n            if (response && response.ok) {\n                htmlFetchSuccess = true;\n                const htmlContent = await response.text();\n                console.log(\"[v0] HTML fetch success for\", competitorUrl, \"- content length:\", htmlContent.length);\n                const jsonLdData = extractJsonLdSchemas(htmlContent);\n                jsonLdTypes = jsonLdData.types;\n                const rssResult = await safeCheck(()=>checkRssFeed(competitorUrl), {\n                    status: \"not_found\",\n                    itemCount: 0\n                });\n                rssStatus = rssResult.status;\n            } else {\n                console.log(\"[v0] HTML fetch failed for\", competitorUrl, \"- response:\", response?.status);\n            }\n        } catch (htmlError) {\n            console.log(\"[v0] HTML fetch error for\", competitorUrl, \":\", htmlError instanceof Error ? htmlError.message : htmlError);\n        }\n        const anyArtifactFound = jsonLdTypes.length > 0 || robotsResult.status === \"found\" || sitemapResult.status === \"found\" || rssStatus === \"found\" || llmsResult.status === \"found\" || aiManifestResult.status === \"found\" || mcpResult.status === \"found\" || openApiResult.status === \"found\";\n        const crawlSuccess = anyArtifactFound || htmlFetchSuccess || robotsResult.status !== \"check_failed\";\n        console.log(\"[v0] Crawl success for\", competitorUrl, \":\", crawlSuccess, \"anyArtifactFound:\", anyArtifactFound);\n        return {\n            jsonLdSchema: {\n                status: jsonLdTypes.length > 0 ? \"found\" : \"not_found\",\n                types: jsonLdTypes\n            },\n            robotsTxt: {\n                status: robotsResult.status,\n                hasAiDirectives: robotsResult.hasAiDirectives\n            },\n            sitemap: {\n                status: sitemapResult.status,\n                urlCount: sitemapResult.urlCount\n            },\n            rssFeed: {\n                status: rssStatus\n            },\n            llmsTxt: {\n                status: llmsResult.status\n            },\n            aiManifest: {\n                status: aiManifestResult.status\n            },\n            mcpConfig: {\n                status: mcpResult.status\n            },\n            openApi: {\n                status: openApiResult.status\n            },\n            crawlSuccess\n        };\n    } catch (error) {\n        console.log(\"[v0] scanCompetitorArtifacts error for\", competitorUrl, \":\", error instanceof Error ? error.message : error);\n        return defaultNotFound;\n    }\n}\nfunction calculateScore(artifactChecks, aiAnalysis) {\n    let score = 0;\n    const maxScore = 100;\n    const jsonLd = artifactChecks.jsonLdSchema;\n    if (jsonLd?.status === \"found\") {\n        const types = jsonLd.types || [];\n        score += Math.min(20, 5 + types.length * 3);\n    }\n    const robots = artifactChecks.robotsTxt;\n    if (robots?.status === \"found\") {\n        score += 5;\n        if (robots.hasAiDirectives) score += 5;\n    }\n    const sitemap = artifactChecks.sitemap;\n    if (sitemap?.status === \"found\") {\n        score += 5;\n        if ((sitemap.urlCount || 0) > 10) score += 5;\n    }\n    const rss = artifactChecks.rssFeed;\n    if (rss?.status === \"found\") {\n        score += 5;\n    }\n    const llms = artifactChecks.llmsTxt;\n    if (llms?.status === \"found\") {\n        score += 15;\n    }\n    const aiManifest = artifactChecks.aiManifest;\n    if (aiManifest?.status === \"found\") {\n        score += 10;\n    }\n    const mcp = artifactChecks.mcpConfig;\n    if (mcp?.status === \"found\") {\n        score += 10;\n    }\n    const openApi = artifactChecks.openApi;\n    if (openApi?.status === \"found\") {\n        score += 10;\n    }\n    const analysis = aiAnalysis;\n    if (analysis?.contentGap?.contentScore) {\n        score += Math.round(analysis.contentGap.contentScore / 10);\n    }\n    return Math.min(maxScore, score);\n}\nconst KNOWN_BENCHMARK_SITES = [\n    {\n        url: \"https://stripe.com\",\n        name: \"Stripe\",\n        description: \"Payment processing platform with excellent technical SEO and AI readiness\",\n        reason: \"Industry leader in developer experience and technical documentation\"\n    },\n    {\n        url: \"https://vercel.com\",\n        name: \"Vercel\",\n        description: \"Cloud platform for frontend developers with strong AI optimization\",\n        reason: \"Known for excellent structured data and modern web practices\"\n    },\n    {\n        url: \"https://github.com\",\n        name: \"GitHub\",\n        description: \"Code hosting platform with comprehensive technical artifacts\",\n        reason: \"Industry standard for developer tools with extensive schema markup\"\n    }\n];\nasync function getBenchmarkCompetitor() {\n    // Try each known benchmark site until we find one that works\n    for (const site of KNOWN_BENCHMARK_SITES){\n        try {\n            const artifacts = await scanCompetitorArtifacts(site.url);\n            if (!artifacts.crawlSuccess) continue;\n            const foundCount = [\n                artifacts.jsonLdSchema.status === \"found\",\n                artifacts.robotsTxt.status === \"found\",\n                artifacts.sitemap.status === \"found\",\n                artifacts.rssFeed.status === \"found\",\n                artifacts.llmsTxt.status === \"found\",\n                artifacts.aiManifest.status === \"found\",\n                artifacts.mcpConfig.status === \"found\",\n                artifacts.openApi.status === \"found\"\n            ].filter(Boolean).length;\n            // Only use if at least 4 artifacts are found (50%)\n            if (foundCount >= 4) {\n                const score = calculateScore(artifacts, null);\n                return {\n                    name: site.name,\n                    url: site.url,\n                    description: site.description,\n                    reason: site.reason,\n                    artifactChecks: artifacts,\n                    score,\n                    isBenchmark: true,\n                    crawledSuccessfully: true,\n                    artifactsFoundCount: foundCount,\n                    artifactsFoundPercentage: Math.round(foundCount / 8 * 100)\n                };\n            }\n        } catch  {\n            continue;\n        }\n    }\n    return null;\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const url = validateUrl(body.url);\n        const baseUrl = new URL(url).origin;\n        const crawlResult = await crawlWithFirecrawl(url);\n        if (crawlResult.status === \"check_failed\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: crawlResult.error || \"Failed to crawl website\"\n            }, {\n                status: 400\n            });\n        }\n        const [robotsResult, sitemapResult, rssResult, llmsResult, aiManifestResult, mcpResult, openApiResult] = await Promise.all([\n            checkRobotsTxt(baseUrl),\n            checkSitemap(baseUrl),\n            checkRssFeed(baseUrl),\n            checkLlmsTxt(baseUrl),\n            checkAiManifest(baseUrl),\n            checkMcpConfig(baseUrl),\n            checkOpenApi(baseUrl)\n        ]);\n        const jsonLdData = extractJsonLdSchemas(crawlResult.html);\n        const metaTags = extractMetaTags(crawlResult.html);\n        const headings = extractHeadings(crawlResult.html);\n        const aiAnalysis = await analyzeContentWithAI(url, crawlResult.html, crawlResult.markdown, crawlResult.metadata);\n        const companyProfile = await buildCompanyProfile(url, crawlResult.html, crawlResult.markdown, crawlResult.metadata, aiAnalysis.napData, aiAnalysis.topicRecognition);\n        const competitorsList = await identifyCompetitorsWithSearch(url, companyProfile);\n        const preScanResults = await Promise.all(competitorsList.map((comp)=>preScanCompetitor(comp.url)));\n        const sortedCompetitors = competitorsList.map((comp, index)=>({\n                ...comp,\n                preScan: preScanResults[index]\n            })).sort((a, b)=>{\n            if (a.preScan.reachable !== b.preScan.reachable) {\n                return a.preScan.reachable ? -1 : 1;\n            }\n            return b.preScan.artifactCount - a.preScan.artifactCount;\n        });\n        const competitorResultsWithStats = await Promise.all(sortedCompetitors.map(async (comp)=>{\n            const artifacts = await scanCompetitorArtifacts(comp.url);\n            const compScore = calculateScore(artifacts, null);\n            const advantages = [];\n            if (artifacts.jsonLdSchema.status === \"found\" && jsonLdData.types.length === 0) {\n                advantages.push(`Has structured data (${artifacts.jsonLdSchema.types.join(\", \")})`);\n            }\n            if (artifacts.llmsTxt.status === \"found\" && llmsResult.status !== \"found\") {\n                advantages.push(\"Has llms.txt for AI instructions\");\n            }\n            if (artifacts.sitemap.status === \"found\" && sitemapResult.status !== \"found\") {\n                advantages.push(\"Has XML sitemap\");\n            }\n            if (artifacts.rssFeed.status === \"found\" && rssResult.status !== \"found\") {\n                advantages.push(\"Has RSS feed\");\n            }\n            if (artifacts.openApi.status === \"found\" && openApiResult.status !== \"found\") {\n                advantages.push(\"Has OpenAPI specification\");\n            }\n            const foundCount = [\n                artifacts.jsonLdSchema.status === \"found\",\n                artifacts.robotsTxt.status === \"found\",\n                artifacts.sitemap.status === \"found\",\n                artifacts.rssFeed.status === \"found\",\n                artifacts.llmsTxt.status === \"found\",\n                artifacts.aiManifest.status === \"found\",\n                artifacts.mcpConfig.status === \"found\",\n                artifacts.openApi.status === \"found\"\n            ].filter(Boolean).length;\n            const totalChecks = 8;\n            const foundPercentage = foundCount / totalChecks;\n            return {\n                name: comp.name,\n                url: comp.url,\n                description: comp.description,\n                reason: comp.reason,\n                score: compScore,\n                artifactChecks: artifacts,\n                advantages,\n                crawledSuccessfully: artifacts.crawlSuccess,\n                foundCount,\n                foundPercentage\n            };\n        }));\n        const benchmarkThreshold = 0.6;\n        const benchmarkCandidate = competitorResultsWithStats.filter((c)=>c.crawledSuccessfully && c.foundPercentage >= benchmarkThreshold).sort((a, b)=>b.foundCount - a.foundCount)[0];\n        let knownBenchmark = null;\n        if (!benchmarkCandidate || benchmarkCandidate.foundCount < 4) {\n            knownBenchmark = await getBenchmarkCompetitor();\n        }\n        const finalCompetitorResults = competitorResultsWithStats.map((comp)=>({\n                name: comp.name,\n                url: comp.url,\n                description: comp.description,\n                reason: comp.reason,\n                score: comp.score,\n                artifactChecks: comp.artifactChecks,\n                advantages: comp.advantages,\n                crawledSuccessfully: comp.crawledSuccessfully,\n                isBenchmark: !knownBenchmark && benchmarkCandidate?.url === comp.url,\n                artifactsFoundCount: comp.foundCount,\n                artifactsFoundPercentage: Math.round(comp.foundPercentage * 100)\n            }));\n        if (knownBenchmark) {\n            finalCompetitorResults.unshift({\n                name: knownBenchmark.name,\n                url: knownBenchmark.url,\n                description: knownBenchmark.description,\n                reason: knownBenchmark.reason,\n                score: knownBenchmark.score,\n                artifactChecks: knownBenchmark.artifactChecks,\n                advantages: [\n                    \"Reference benchmark demonstrating AI-ready artifacts\"\n                ],\n                crawledSuccessfully: true,\n                isBenchmark: true,\n                artifactsFoundCount: knownBenchmark.artifactsFoundCount,\n                artifactsFoundPercentage: knownBenchmark.artifactsFoundPercentage\n            });\n        }\n        const artifactChecks = {\n            jsonLdSchema: {\n                status: jsonLdData.types.length > 0 ? \"found\" : \"not_found\",\n                types: jsonLdData.types,\n                schemas: jsonLdData.schemas\n            },\n            robotsTxt: {\n                status: robotsResult.status,\n                content: robotsResult.content,\n                hasAiDirectives: robotsResult.hasAiDirectives,\n                blockedBots: robotsResult.blockedBots,\n                allowedBots: robotsResult.allowedBots,\n                error: robotsResult.error\n            },\n            sitemap: {\n                status: sitemapResult.status,\n                url: sitemapResult.url,\n                urlCount: sitemapResult.urlCount,\n                error: sitemapResult.error\n            },\n            rssFeed: {\n                status: rssResult.status,\n                url: rssResult.feedUrl,\n                itemCount: rssResult.itemCount,\n                error: rssResult.error\n            },\n            llmsTxt: {\n                status: llmsResult.status,\n                content: llmsResult.content,\n                hasInstructions: llmsResult.hasInstructions,\n                error: llmsResult.error\n            },\n            aiManifest: {\n                status: aiManifestResult.status,\n                content: aiManifestResult.content,\n                version: aiManifestResult.version,\n                error: aiManifestResult.error\n            },\n            mcpConfig: {\n                status: mcpResult.status,\n                content: mcpResult.content,\n                tools: mcpResult.tools,\n                error: mcpResult.error\n            },\n            openApi: {\n                status: openApiResult.status,\n                content: openApiResult.content,\n                version: openApiResult.version,\n                error: openApiResult.error\n            }\n        };\n        const score = calculateScore(artifactChecks, aiAnalysis);\n        const industry = aiAnalysis.topicRecognition.industry;\n        const benchmarks = INDUSTRY_BENCHMARKS[industry] || INDUSTRY_BENCHMARKS.general;\n        const findings = [];\n        if (artifactChecks.jsonLdSchema.status !== \"found\") {\n            const competitorsWithSchema = finalCompetitorResults.filter((c)=>c.artifactChecks.jsonLdSchema.status === \"found\");\n            findings.push({\n                id: \"no-schema\",\n                title: \"Missing JSON-LD Structured Data\",\n                category: \"schema\",\n                severity: \"critical\",\n                description: \"Your website lacks structured data markup that helps AI systems understand your content.\",\n                recommendation: \"Add JSON-LD schemas for Organization, Product, FAQ, or Article depending on your content type.\",\n                competitorNote: competitorsWithSchema.length > 0 ? `${competitorsWithSchema.length} of your competitors have structured data` : undefined,\n                checkStatus: artifactChecks.jsonLdSchema.status\n            });\n        }\n        if (artifactChecks.robotsTxt.status !== \"found\") {\n            findings.push({\n                id: \"no-robots\",\n                title: \"Missing robots.txt\",\n                category: \"technical\",\n                severity: \"warning\",\n                description: \"No robots.txt file found. This file helps control how AI crawlers access your site.\",\n                recommendation: \"Create a robots.txt file with appropriate directives for AI crawlers.\",\n                checkStatus: artifactChecks.robotsTxt.status\n            });\n        } else if (!artifactChecks.robotsTxt.hasAiDirectives) {\n            findings.push({\n                id: \"no-ai-directives\",\n                title: \"No AI Crawler Directives\",\n                category: \"technical\",\n                severity: \"suggestion\",\n                description: \"Your robots.txt doesn't specify rules for AI crawlers like GPTBot or Claude-Web.\",\n                recommendation: \"Add specific User-agent rules for AI crawlers to control how they index your content.\",\n                checkStatus: \"found\"\n            });\n        }\n        if (artifactChecks.sitemap.status !== \"found\") {\n            findings.push({\n                id: \"no-sitemap\",\n                title: \"Missing XML Sitemap\",\n                category: \"technical\",\n                severity: \"warning\",\n                description: \"No sitemap.xml found. Sitemaps help AI systems discover all your content.\",\n                recommendation: \"Generate and submit an XML sitemap to improve content discovery.\",\n                checkStatus: artifactChecks.sitemap.status\n            });\n        }\n        if (artifactChecks.llmsTxt.status !== \"found\") {\n            const competitorsWithLlms = finalCompetitorResults.filter((c)=>c.artifactChecks.llmsTxt.status === \"found\");\n            findings.push({\n                id: \"no-llms-txt\",\n                title: \"Missing llms.txt\",\n                category: \"ai\",\n                severity: \"critical\",\n                description: \"llms.txt is the emerging standard for providing instructions to AI language models.\",\n                recommendation: \"Create an llms.txt file to guide how AI systems represent your brand and content.\",\n                competitorNote: competitorsWithLlms.length > 0 ? `${competitorsWithLlms.length} competitors already have llms.txt` : undefined,\n                checkStatus: artifactChecks.llmsTxt.status\n            });\n        }\n        if (artifactChecks.rssFeed.status !== \"found\") {\n            findings.push({\n                id: \"no-rss\",\n                title: \"Missing RSS Feed\",\n                category: \"content\",\n                severity: \"suggestion\",\n                description: \"No RSS feed detected. RSS helps AI systems track your latest content updates.\",\n                recommendation: \"Add an RSS feed to syndicate your content to AI aggregators.\",\n                checkStatus: artifactChecks.rssFeed.status\n            });\n        }\n        if (aiAnalysis.contentGap.missingTopics.length > 0) {\n            findings.push({\n                id: \"content-gaps\",\n                title: \"Content Gaps Identified\",\n                category: \"content\",\n                severity: \"warning\",\n                description: `Missing coverage of: ${aiAnalysis.contentGap.missingTopics.slice(0, 3).join(\", \")}`,\n                recommendation: aiAnalysis.contentGap.recommendations[0] || \"Expand content to cover missing topics.\",\n                checkStatus: \"not_found\"\n            });\n        }\n        if (aiAnalysis.topicRecognition.industry === \"local_business\" && !aiAnalysis.napData.isComplete) {\n            const missing = [];\n            if (!aiAnalysis.napData.name) missing.push(\"business name\");\n            if (!aiAnalysis.napData.address) missing.push(\"address\");\n            if (!aiAnalysis.napData.phone) missing.push(\"phone\");\n            findings.push({\n                id: \"incomplete-nap\",\n                title: \"Incomplete Business Information (NAP)\",\n                category: \"local\",\n                severity: \"critical\",\n                description: `Missing: ${missing.join(\", \")}. Complete NAP data is essential for local AI visibility.`,\n                recommendation: \"Ensure your business name, address, and phone are clearly displayed and marked up with schema.\",\n                checkStatus: \"not_found\"\n            });\n        }\n        const opportunities = [];\n        if (artifactChecks.jsonLdSchema.status !== \"found\") {\n            opportunities.push({\n                id: \"add-schema\",\n                title: \"Add Structured Data\",\n                description: \"Implement JSON-LD schemas to boost AI understanding by up to 40%\",\n                impact: \"high\",\n                estimatedScoreGain: 20\n            });\n        }\n        if (artifactChecks.llmsTxt.status !== \"found\") {\n            opportunities.push({\n                id: \"add-llms-txt\",\n                title: \"Create llms.txt\",\n                description: \"Guide AI systems on how to represent your brand accurately\",\n                impact: \"high\",\n                estimatedScoreGain: 15\n            });\n        }\n        if (artifactChecks.openApi.status !== \"found\") {\n            opportunities.push({\n                id: \"add-openapi\",\n                title: \"Add OpenAPI Specification\",\n                description: \"Enable AI agents to interact with your services programmatically\",\n                impact: \"medium\",\n                estimatedScoreGain: 10\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            url,\n            crawledAt: new Date().toISOString(),\n            score,\n            benchmarks: {\n                industry: aiAnalysis.topicRecognition.industry,\n                average: benchmarks.average,\n                top25: benchmarks.top25,\n                top10: benchmarks.top10,\n                percentile: score >= benchmarks.top10 ? \"top10\" : score >= benchmarks.top25 ? \"top25\" : score >= benchmarks.average ? \"average\" : \"below_average\"\n            },\n            issues: {\n                critical: findings.filter((f)=>f.severity === \"critical\").length,\n                warnings: findings.filter((f)=>f.severity === \"warning\").length,\n                suggestions: findings.filter((f)=>f.severity === \"suggestion\").length\n            },\n            findings,\n            opportunities,\n            artifactChecks,\n            analysis: {\n                topicRecognition: aiAnalysis.topicRecognition,\n                contentGap: aiAnalysis.contentGap,\n                napData: aiAnalysis.napData,\n                factCheck: aiAnalysis.factCheck,\n                userQuestions: aiAnalysis.userQuestions\n            },\n            contentInfo: {\n                title: crawlResult.metadata.title || metaTags[\"og:title\"] || \"\",\n                description: metaTags.description || metaTags[\"og:description\"] || \"\",\n                headings,\n                metaTagCount: Object.keys(metaTags).length\n            },\n            competitors: finalCompetitorResults\n        });\n    } catch (error) {\n        console.error(\"Initial scan error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error instanceof Error ? error.message : \"An error occurred during the scan\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsaUJBQWlCLElBQUk7Z0JBQ25FNEk7Z0JBQ0E2QyxjQUFjQyxPQUFPQyxJQUFJLENBQUMzTCxVQUFVN0osTUFBTTtZQUM1QztZQUNBOE4sYUFBYTZGO1FBQ2Y7SUFDRixFQUFFLE9BQU9wUCxPQUFPO1FBQ2RrSixRQUFRbEosS0FBSyxDQUFDLHVCQUF1QkE7UUFDckMsT0FBT2pGLHFEQUFZQSxDQUFDMEUsSUFBSSxDQUN0QjtZQUNFd08sU0FBUztZQUNUak8sT0FBT0EsaUJBQWlCaEMsUUFBUWdDLE1BQU1NLE9BQU8sR0FBRztRQUNsRCxHQUNBO1lBQUUxRCxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25ldXJvLXdlYi1mcm9udGVuZC8uL2FwcC9hcGkvaW5pdGlhbC1zY2FuL3JvdXRlLnRzPzExN2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCJcbmltcG9ydCB7IGdlbmVyYXRlVGV4dCB9IGZyb20gXCJhaVwiXG5cbi8vIEFQSSBrZXlzXG4vLyBjb25zdCBGSVJFQ1JBV0xfQVBJX0tFWSA9IFwiZmMtN2ZjNWEwMTNhMTg1NDhmNjhjNTI2N2M1YmE0NDhiYWJcIiAvLyBSZW1vdmVkIEZJUkVDUkFXTF9BUElfS0VZIC0gdXNpbmcgZGlyZWN0IGZldGNoIGluc3RlYWRcblxuY29uc3QgQlJPV1NFUl9VU0VSX0FHRU5UUyA9IFtcbiAgXCJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIwLjAuMC4wIFNhZmFyaS81MzcuMzZcIixcbiAgXCJNb3ppbGxhLzUuMCAoTWFjaW50b3NoOyBJbnRlbCBNYWMgT1MgWCAxMF8xNV83KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIwLjAuMC4wIFNhZmFyaS81MzcuMzZcIixcbiAgXCJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0OyBydjoxMjEuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xMjEuMFwiLFxuICBcIk1vemlsbGEvNS4wIChNYWNpbnRvc2g7IEludGVsIE1hYyBPUyBYIDEwXzE1XzcpIEFwcGxlV2ViS2l0LzYwNS4xLjE1IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi8xNy4yIFNhZmFyaS82MDUuMS4xNVwiLFxuXVxuXG5hc3luYyBmdW5jdGlvbiBmZXRjaFdpdGhSZXRyeShcbiAgdXJsOiBzdHJpbmcsXG4gIG9wdGlvbnM6IFJlcXVlc3RJbml0ICYgeyB0aW1lb3V0PzogbnVtYmVyIH0gPSB7fSxcbiAgbWF4UmV0cmllcyA9IDIsXG4pOiBQcm9taXNlPFJlc3BvbnNlIHwgbnVsbD4ge1xuICBjb25zdCB0aW1lb3V0ID0gb3B0aW9ucy50aW1lb3V0IHx8IDUwMDBcblxuICBmb3IgKGxldCBhdHRlbXB0ID0gMDsgYXR0ZW1wdCA8PSBtYXhSZXRyaWVzOyBhdHRlbXB0KyspIHtcbiAgICBjb25zdCB1c2VyQWdlbnQgPSBCUk9XU0VSX1VTRVJfQUdFTlRTW2F0dGVtcHQgJSBCUk9XU0VSX1VTRVJfQUdFTlRTLmxlbmd0aF1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpXG4gICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgdGltZW91dClcblxuICAgICAgLy8gUmVtb3ZlIGFueSBleHRlcm5hbCBzaWduYWwgYW5kIHRpbWVvdXQgdG8gcHJldmVudCBjb25mbGljdHNcbiAgICAgIGNvbnN0IHsgc2lnbmFsOiBfZXh0ZXJuYWxTaWduYWwsIHRpbWVvdXQ6IF90aW1lb3V0LCAuLi5yZXN0T3B0aW9ucyB9ID0gb3B0aW9uc1xuXG4gICAgICBsZXQgcmVzcG9uc2U6IFJlc3BvbnNlXG4gICAgICB0cnkge1xuICAgICAgICByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICAgIC4uLnJlc3RPcHRpb25zLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIFwiVXNlci1BZ2VudFwiOiB1c2VyQWdlbnQsXG4gICAgICAgICAgICBBY2NlcHQ6IFwidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksKi8qO3E9MC44XCIsXG4gICAgICAgICAgICBcIkFjY2VwdC1MYW5ndWFnZVwiOiBcImVuLVVTLGVuO3E9MC45XCIsXG4gICAgICAgICAgICBcIkFjY2VwdC1FbmNvZGluZ1wiOiBcImd6aXAsIGRlZmxhdGUsIGJyXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgICAgIGNhY2hlOiBcIm5vLXN0b3JlXCIsXG4gICAgICAgIH0pXG4gICAgICB9IGNhdGNoIChmZXRjaEVycm9yKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpXG4gICAgICAgIC8vIE5ldHdvcmsgZXJyb3Igb3IgZmV0Y2ggcmVqZWN0aW9uIC0gY29udGludWUgdG8gbmV4dCBhdHRlbXB0XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpXG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBDb25zdW1lIHRoZSBib2R5IHRvIHByZXZlbnQgdGhlIHJ1bnRpbWUgbG9nZ2luZyBpdFxuICAgICAgICAgIGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAvLyBJZ25vcmUgYm9keSBjb25zdW1wdGlvbiBlcnJvcnNcbiAgICAgICAgfVxuICAgICAgICAvLyBGb3IgNDAzLzQyOSwgdHJ5IHdpdGggYSBkaWZmZXJlbnQgVXNlci1BZ2VudFxuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDMgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSA0MjkpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICAgIC8vIEZvciBvdGhlciBub24tT0sgcmVzcG9uc2VzICg0MDQsIDUwMCwgZXRjKSwgcmV0dXJuIG51bGwgZ3JhY2VmdWxseVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2VcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIEFueSBvdGhlciBlcnJvciAtIHRyeSBuZXh0IFVzZXItQWdlbnRcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGxcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2lsZW50RmV0Y2goXG4gIHVybDogc3RyaW5nLFxuICB0aW1lb3V0ID0gMzAwMCxcbik6IFByb21pc2U8eyBvazogYm9vbGVhbjsgdGV4dDogc3RyaW5nOyBjb250ZW50VHlwZTogc3RyaW5nOyBzdGF0dXM6IG51bWJlciB9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKVxuICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCB0aW1lb3V0KVxuXG4gICAgbGV0IHJlc3BvbnNlOiBSZXNwb25zZVxuICAgIHRyeSB7XG4gICAgICByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIlVzZXItQWdlbnRcIjogQlJPV1NFUl9VU0VSX0FHRU5UU1swXSxcbiAgICAgICAgICBBY2NlcHQ6IFwiKi8qXCIsXG4gICAgICAgICAgXCJBY2NlcHQtTGFuZ3VhZ2VcIjogXCJlbi1VUyxlbjtxPTAuOVwiLFxuICAgICAgICB9LFxuICAgICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgICBjYWNoZTogXCJuby1zdG9yZVwiLFxuICAgICAgfSlcbiAgICB9IGNhdGNoIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpXG4gICAgICByZXR1cm4geyBvazogZmFsc2UsIHRleHQ6IFwiXCIsIGNvbnRlbnRUeXBlOiBcIlwiLCBzdGF0dXM6IDAgfVxuICAgIH1cblxuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpXG5cbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgIHJldHVybiB7IG9rOiBmYWxzZSwgdGV4dDogXCJcIiwgY29udGVudFR5cGU6IFwiXCIsIHN0YXR1czogNDA0IH1cbiAgICB9XG5cbiAgICAvLyBGb3Igb3RoZXIgbm9uLU9LIHJlc3BvbnNlcywgc2lsZW50bHkgY29uc3VtZSB0aGUgYm9keVxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIC8vIElnbm9yZVxuICAgICAgfVxuICAgICAgcmV0dXJuIHsgb2s6IGZhbHNlLCB0ZXh0OiBcIlwiLCBjb250ZW50VHlwZTogcmVzcG9uc2UuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIikgfHwgXCJcIiwgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMgfVxuICAgIH1cblxuICAgIC8vIE9ubHkgcmVhZCBib2R5IGZvciBzdWNjZXNzZnVsIHJlc3BvbnNlc1xuICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCkuY2F0Y2goKCkgPT4gXCJcIilcblxuICAgIHJldHVybiB7XG4gICAgICBvazogdHJ1ZSxcbiAgICAgIHRleHQsXG4gICAgICBjb250ZW50VHlwZTogcmVzcG9uc2UuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIikgfHwgXCJcIixcbiAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHsgb2s6IGZhbHNlLCB0ZXh0OiBcIlwiLCBjb250ZW50VHlwZTogXCJcIiwgc3RhdHVzOiAwIH1cbiAgfVxufVxuXG50eXBlIENoZWNrU3RhdHVzID0gXCJmb3VuZFwiIHwgXCJub3RfZm91bmRcIiB8IFwiY2hlY2tfZmFpbGVkXCJcblxuaW50ZXJmYWNlIENvbXBldGl0b3JTY2FuUmVzdWx0IHtcbiAgbmFtZTogc3RyaW5nXG4gIHVybDogc3RyaW5nXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgc2NvcmU6IG51bWJlclxuICByZWFzb246IHN0cmluZ1xuICBhcnRpZmFjdENoZWNrczoge1xuICAgIGpzb25MZFNjaGVtYTogeyBzdGF0dXM6IENoZWNrU3RhdHVzOyB0eXBlczogc3RyaW5nW10gfVxuICAgIHJvYm90c1R4dDogeyBzdGF0dXM6IENoZWNrU3RhdHVzOyBoYXNBaURpcmVjdGl2ZXM6IGJvb2xlYW4gfVxuICAgIHNpdGVtYXA6IHsgc3RhdHVzOiBDaGVja1N0YXR1czsgdXJsQ291bnQ6IG51bWJlciB9XG4gICAgcnNzRmVlZDogeyBzdGF0dXM6IENoZWNrU3RhdHVzIH1cbiAgICBsbG1zVHh0OiB7IHN0YXR1czogQ2hlY2tTdGF0dXMgfVxuICAgIGFpTWFuaWZlc3Q6IHsgc3RhdHVzOiBDaGVja1N0YXR1cyB9XG4gICAgbWNwQ29uZmlnOiB7IHN0YXR1czogQ2hlY2tTdGF0dXMgfVxuICAgIG9wZW5BcGk6IHsgc3RhdHVzOiBDaGVja1N0YXR1cyB9XG4gIH1cbiAgYWR2YW50YWdlczogc3RyaW5nW11cbiAgY3Jhd2xlZFN1Y2Nlc3NmdWxseTogYm9vbGVhblxuICBpc0JlbmNobWFyaz86IGJvb2xlYW5cbiAgYXJ0aWZhY3RzRm91bmRDb3VudD86IG51bWJlclxuICBhcnRpZmFjdHNGb3VuZFBlcmNlbnRhZ2U/OiBudW1iZXJcbn1cblxuLy8gSW5kdXN0cnkgYmVuY2htYXJrcyBmb3Igc2NvcmUgY29udGV4dFxuY29uc3QgSU5EVVNUUllfQkVOQ0hNQVJLUyA9IHtcbiAgZWNvbW1lcmNlOiB7IGF2ZXJhZ2U6IDQyLCB0b3AyNTogNjgsIHRvcDEwOiA4NSB9LFxuICBzYWFzOiB7IGF2ZXJhZ2U6IDUxLCB0b3AyNTogNzIsIHRvcDEwOiA4OCB9LFxuICBtZWRpYTogeyBhdmVyYWdlOiAzOCwgdG9wMjU6IDYxLCB0b3AxMDogNzkgfSxcbiAgbG9jYWxfYnVzaW5lc3M6IHsgYXZlcmFnZTogMjgsIHRvcDI1OiA1MiwgdG9wMTA6IDcxIH0sXG4gIGdlbmVyYWw6IHsgYXZlcmFnZTogMzUsIHRvcDI1OiA1OCwgdG9wMTA6IDc4IH0sXG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlVXJsKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgbGV0IHZhbGlkVXJsID0gdXJsLnRyaW0oKVxuICBpZiAoIXZhbGlkVXJsLnN0YXJ0c1dpdGgoXCJodHRwOi8vXCIpICYmICF2YWxpZFVybC5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIikpIHtcbiAgICB2YWxpZFVybCA9IFwiaHR0cHM6Ly9cIiArIHZhbGlkVXJsXG4gIH1cbiAgdHJ5IHtcbiAgICBuZXcgVVJMKHZhbGlkVXJsKVxuICAgIHJldHVybiB2YWxpZFVybFxuICB9IGNhdGNoIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIFVSTCBmb3JtYXRcIilcbiAgfVxufVxuXG4vLyBTYWZlIHdyYXBwZXIgZm9yIGFzeW5jIG9wZXJhdGlvbnNcbmFzeW5jIGZ1bmN0aW9uIHNhZmVDaGVjazxUPihmbjogKCkgPT4gUHJvbWlzZTxUPiwgZmFsbGJhY2s6IFQpOiBQcm9taXNlPFQ+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgZm4oKVxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsbGJhY2tcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBjcmF3bFdpdGhGaXJlY3Jhd2wodXJsOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgc3RhdHVzOiBDaGVja1N0YXR1c1xuICBodG1sOiBzdHJpbmdcbiAgbWFya2Rvd246IHN0cmluZ1xuICBtZXRhZGF0YTogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgbGlua3M6IHN0cmluZ1tdXG4gIGVycm9yPzogc3RyaW5nXG59PiB7XG4gIGNvbnN0IHByb2JsZW1hdGljRG9tYWlucyA9IFtcbiAgICBcImxpbmtlZGluLmNvbVwiLFxuICAgIFwiZmFjZWJvb2suY29tXCIsXG4gICAgXCJpbnN0YWdyYW0uY29tXCIsXG4gICAgXCJ0d2l0dGVyLmNvbVwiLFxuICAgIFwieC5jb21cIixcbiAgICBcInRpa3Rvay5jb21cIixcbiAgICBcInBpbnRlcmVzdC5jb21cIixcbiAgICBcInJlZGRpdC5jb21cIixcbiAgICBcImFtYXpvbi5jb21cIixcbiAgICBcInhpbmcuY29tXCIsXG4gIF1cblxuICBjb25zdCB1cmxIb3N0ID0gbmV3IFVSTCh1cmwpLmhvc3RuYW1lLnRvTG93ZXJDYXNlKClcbiAgY29uc3QgaXNQcm9ibGVtYXRpY0RvbWFpbiA9IHByb2JsZW1hdGljRG9tYWlucy5zb21lKChkb21haW4pID0+IHVybEhvc3QuaW5jbHVkZXMoZG9tYWluKSlcblxuICBpZiAoaXNQcm9ibGVtYXRpY0RvbWFpbikge1xuICAgIHJldHVybiBhd2FpdCBiYXNpY0ZldGNoKHVybClcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gUmVtb3ZlZCBGSVJFQ1JBV0xfQVBJX0tFWSB1c2FnZVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCJodHRwczovL2FwaS5maXJlY3Jhd2wuZGV2L3YxL3NjcmFwZVwiLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgLy8gQXV0aG9yaXphdGlvbjogYEJlYXJlciAke0ZJUkVDUkFXTF9BUElfS0VZfWAsIC8vIFJlbW92ZWQgRklSRUNSQVdMX0FQSV9LRVlcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Byb2Nlc3MuZW52LkZJUkVDUkFXTF9BUElfS0VZfWAsIC8vIFVzZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpZiBhdmFpbGFibGVcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHVybCxcbiAgICAgICAgZm9ybWF0czogW1wiaHRtbFwiLCBcIm1hcmtkb3duXCJdLFxuICAgICAgICBpbmNsdWRlVGFnczogW1widGl0bGVcIiwgXCJtZXRhXCIsIFwiaDFcIiwgXCJoMlwiLCBcImgzXCIsIFwicFwiLCBcInNjcmlwdFwiLCBcImFcIl0sXG4gICAgICAgIHdhaXRGb3I6IDMwMDAsXG4gICAgICB9KSxcbiAgICB9KVxuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICByZXR1cm4gYXdhaXQgYmFzaWNGZXRjaCh1cmwpXG4gICAgfVxuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgcmV0dXJuIGF3YWl0IGJhc2ljRmV0Y2godXJsKVxuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiBcImZvdW5kXCIsXG4gICAgICBodG1sOiBkYXRhLmRhdGE/Lmh0bWwgfHwgXCJcIixcbiAgICAgIG1hcmtkb3duOiBkYXRhLmRhdGE/Lm1hcmtkb3duIHx8IFwiXCIsXG4gICAgICBtZXRhZGF0YTogZGF0YS5kYXRhPy5tZXRhZGF0YSB8fCB7fSxcbiAgICAgIGxpbmtzOiBkYXRhLmRhdGE/LmxpbmtzIHx8IFtdLFxuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGF3YWl0IGJhc2ljRmV0Y2godXJsKVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGJhc2ljRmV0Y2godXJsOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgc3RhdHVzOiBDaGVja1N0YXR1c1xuICBodG1sOiBzdHJpbmdcbiAgbWFya2Rvd246IHN0cmluZ1xuICBtZXRhZGF0YTogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgbGlua3M6IHN0cmluZ1tdXG4gIGVycm9yPzogc3RyaW5nXG59PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJVc2VyLUFnZW50XCI6IFwiTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IEFJUmVhZGluZXNzQm90LzEuMDsgK2h0dHBzOi8vZXhhbXBsZS5jb20vYm90KVwiLFxuICAgICAgICBBY2NlcHQ6IFwidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksKi8qO3E9MC44XCIsXG4gICAgICAgIFwiQWNjZXB0LUxhbmd1YWdlXCI6IFwiZW4tVVMsZW47cT0wLjVcIixcbiAgICAgIH0sXG4gICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoMTAwMDApLFxuICAgICAgcmVkaXJlY3Q6IFwiZm9sbG93XCIsXG4gICAgfSlcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogXCJjaGVja19mYWlsZWRcIixcbiAgICAgICAgaHRtbDogXCJcIixcbiAgICAgICAgbWFya2Rvd246IFwiXCIsXG4gICAgICAgIG1ldGFkYXRhOiB7fSxcbiAgICAgICAgbGlua3M6IFtdLFxuICAgICAgICBlcnJvcjogYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiBDb3VsZCBub3QgYWNjZXNzIHdlYnNpdGVgLFxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZXNwb25zZS50ZXh0KClcblxuICAgIGNvbnN0IHRpdGxlTWF0Y2ggPSBodG1sLm1hdGNoKC88dGl0bGVbXj5dKj4oW148XSspPFxcL3RpdGxlPi9pKVxuICAgIGNvbnN0IGRlc2NNYXRjaCA9IGh0bWwubWF0Y2goLzxtZXRhW14+XSpuYW1lPVtcIiddZGVzY3JpcHRpb25bXCInXVtePl0qY29udGVudD1bXCInXShbXlwiJ10rKVtcIiddL2kpXG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiBcImZvdW5kXCIsXG4gICAgICBodG1sLFxuICAgICAgbWFya2Rvd246IFwiXCIsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICB0aXRsZTogdGl0bGVNYXRjaD8uWzFdIHx8IFwiXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjTWF0Y2g/LlsxXSB8fCBcIlwiLFxuICAgICAgfSxcbiAgICAgIGxpbmtzOiBbXSxcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogXCJjaGVja19mYWlsZWRcIixcbiAgICAgIGh0bWw6IFwiXCIsXG4gICAgICBtYXJrZG93bjogXCJcIixcbiAgICAgIG1ldGFkYXRhOiB7fSxcbiAgICAgIGxpbmtzOiBbXSxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuICAgIH1cbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBjaGVja1NlbyhiYXNlVXJsOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgc3RhdHVzOiBDaGVja1N0YXR1c1xuICB0aXRsZT86IHN0cmluZ1xuICBkZXNjcmlwdGlvbj86IHN0cmluZ1xuICBjYW5vbmljYWw/OiBzdHJpbmdcbiAgb2dUYWdzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPlxuICB0d2l0dGVyVGFncz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz5cbiAgZXJyb3I/OiBzdHJpbmdcbn0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoV2l0aFJldHJ5KGJhc2VVcmwsIHtcbiAgICAgIHRpbWVvdXQ6IDEwMDAwLFxuICAgIH0pXG5cbiAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4geyBzdGF0dXM6IFwiY2hlY2tfZmFpbGVkXCIsIGVycm9yOiBcIkZhaWxlZCB0byBmZXRjaCB0aGUgaG9tZXBhZ2VcIiB9XG4gICAgfVxuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgcmV0dXJuIHsgc3RhdHVzOiBcImNoZWNrX2ZhaWxlZFwiLCBlcnJvcjogYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9YCB9XG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgIGNvbnN0IHRpdGxlTWF0Y2ggPSBodG1sLm1hdGNoKC88dGl0bGU+KFtcXHNcXFNdKik8XFwvdGl0bGU+L2kpXG4gICAgY29uc3QgZGVzY3JpcHRpb25NYXRjaCA9IGh0bWwubWF0Y2goLzxtZXRhIG5hbWU9XCJkZXNjcmlwdGlvblwiIGNvbnRlbnQ9XCIoW1xcc1xcU10qPylcIi9pKVxuICAgIGNvbnN0IGNhbm9uaWNhbE1hdGNoID0gaHRtbC5tYXRjaCgvPGxpbmsgcmVsPVwiY2Fub25pY2FsXCIgaHJlZj1cIihbXFxzXFxTXSo/KVwiL2kpXG5cbiAgICBjb25zdCBvZ1RhZ3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fVxuICAgIGNvbnN0IG9nUmVnZXggPSAvPG1ldGEgcHJvcGVydHk9XCJvZzooW15cIl0rKVwiIGNvbnRlbnQ9XCIoW15cIl0qKVwiL2dpXG4gICAgbGV0IG9nTWF0Y2hcbiAgICB3aGlsZSAoKG9nTWF0Y2ggPSBvZ1JlZ2V4LmV4ZWMoaHRtbCkpICE9PSBudWxsKSB7XG4gICAgICBvZ1RhZ3Nbb2dNYXRjaFsxXV0gPSBvZ01hdGNoWzJdXG4gICAgfVxuXG4gICAgY29uc3QgdHdpdHRlclRhZ3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fVxuICAgIGNvbnN0IHR3aXR0ZXJSZWdleCA9IC88bWV0YSBuYW1lPVwidHdpdHRlcjooW15cIl0rKVwiIGNvbnRlbnQ9XCIoW15cIl0qKVwiL2dpXG4gICAgbGV0IHR3aXR0ZXJNYXRjaFxuICAgIHdoaWxlICgodHdpdHRlck1hdGNoID0gdHdpdHRlclJlZ2V4LmV4ZWMoaHRtbCkpICE9PSBudWxsKSB7XG4gICAgICB0d2l0dGVyVGFnc1t0d2l0dGVyTWF0Y2hbMV1dID0gdHdpdHRlck1hdGNoWzJdXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogXCJmb3VuZFwiLFxuICAgICAgdGl0bGU6IHRpdGxlTWF0Y2g/LlsxXS50cmltKCkgfHwgXCJcIixcbiAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbk1hdGNoPy5bMV0udHJpbSgpIHx8IFwiXCIsXG4gICAgICBjYW5vbmljYWw6IGNhbm9uaWNhbE1hdGNoPy5bMV0udHJpbSgpIHx8IFwiXCIsXG4gICAgICBvZ1RhZ3MsXG4gICAgICB0d2l0dGVyVGFncyxcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogXCJjaGVja19mYWlsZWRcIixcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuICAgIH1cbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBjaGVja1JvYm90c1R4dChiYXNlVXJsOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgc3RhdHVzOiBDaGVja1N0YXR1c1xuICBjb250ZW50OiBzdHJpbmdcbiAgaGFzU2l0ZW1hcDogYm9vbGVhblxuICBoYXNEaXNhbGxvdzogYm9vbGVhblxuICBlcnJvcj86IHN0cmluZ1xuICBoYXNBaURpcmVjdGl2ZXM/OiBib29sZWFuXG4gIGJsb2NrZWRCb3RzPzogc3RyaW5nW11cbiAgYWxsb3dlZEJvdHM/OiBzdHJpbmdbXVxufT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJvYm90c1VybCA9IG5ldyBVUkwoXCIvcm9ib3RzLnR4dFwiLCBiYXNlVXJsKS50b1N0cmluZygpXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lsZW50RmV0Y2gocm9ib3RzVXJsLCA1MDAwKVxuXG4gICAgaWYgKCFyZXN1bHQub2spIHtcbiAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBcIm5vdF9mb3VuZFwiLCBjb250ZW50OiBcIlwiLCBoYXNTaXRlbWFwOiBmYWxzZSwgaGFzRGlzYWxsb3c6IGZhbHNlIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogXCJjaGVja19mYWlsZWRcIixcbiAgICAgICAgY29udGVudDogXCJcIixcbiAgICAgICAgaGFzU2l0ZW1hcDogZmFsc2UsXG4gICAgICAgIGhhc0Rpc2FsbG93OiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHJlc3VsdC5zdGF0dXMgPyBgSFRUUCAke3Jlc3VsdC5zdGF0dXN9YCA6IFwiRmFpbGVkIHRvIGZldGNoIHJvYm90cy50eHRcIixcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50ID0gcmVzdWx0LnRleHRcbiAgICBjb25zdCBoYXNTaXRlbWFwID0gY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwic2l0ZW1hcDpcIilcbiAgICBjb25zdCBoYXNEaXNhbGxvdyA9IGNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImRpc2FsbG93OlwiKVxuXG4gICAgLy8gQ2hlY2sgZm9yIEFJIGRpcmVjdGl2ZXNcbiAgICBsZXQgaGFzQWlEaXJlY3RpdmVzID0gZmFsc2VcbiAgICBjb25zdCBibG9ja2VkQm90czogc3RyaW5nW10gPSBbXVxuICAgIGNvbnN0IGFsbG93ZWRCb3RzOiBzdHJpbmdbXSA9IFtdXG5cbiAgICBsZXQgY3VycmVudEJsb2NrOiB7IHVzZXJBZ2VudDogc3RyaW5nOyBkaXNhbGxvd3M6IHN0cmluZ1tdOyBhbGxvd3M6IHN0cmluZ1tdIH0gfCBudWxsID0gbnVsbFxuXG4gICAgY29udGVudC5zcGxpdChcIlxcblwiKS5mb3JFYWNoKChsaW5lKSA9PiB7XG4gICAgICBsaW5lID0gbGluZS50cmltKClcbiAgICAgIGlmICghbGluZSB8fCBsaW5lLnN0YXJ0c1dpdGgoXCIjXCIpKSByZXR1cm5cblxuICAgICAgaWYgKGxpbmUudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKFwidXNlci1hZ2VudDpcIikpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRCbG9jaykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1cnJlbnRCbG9jay51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImFpXCIpIHx8XG4gICAgICAgICAgICBjdXJyZW50QmxvY2sudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJncHRcIilcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGhhc0FpRGlyZWN0aXZlcyA9IHRydWVcbiAgICAgICAgICAgIGlmIChjdXJyZW50QmxvY2suZGlzYWxsb3dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgYmxvY2tlZEJvdHMucHVzaChgJHtjdXJyZW50QmxvY2sudXNlckFnZW50fSAoRGlzYWxsb3dlZDogJHtjdXJyZW50QmxvY2suZGlzYWxsb3dzLmpvaW4oXCIsIFwiKX0pYClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXJyZW50QmxvY2suYWxsb3dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgYWxsb3dlZEJvdHMucHVzaChgJHtjdXJyZW50QmxvY2sudXNlckFnZW50fSAoQWxsb3dlZDogJHtjdXJyZW50QmxvY2suYWxsb3dzLmpvaW4oXCIsIFwiKX0pYClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudEJsb2NrID0geyB1c2VyQWdlbnQ6IGxpbmUuc3Vic3RyaW5nKFwiVXNlci1hZ2VudDpcIi5sZW5ndGgpLnRyaW0oKSwgZGlzYWxsb3dzOiBbXSwgYWxsb3dzOiBbXSB9XG4gICAgICB9IGVsc2UgaWYgKGxpbmUudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKFwiZGlzYWxsb3c6XCIpICYmIGN1cnJlbnRCbG9jaykge1xuICAgICAgICBjdXJyZW50QmxvY2suZGlzYWxsb3dzLnB1c2gobGluZS5zdWJzdHJpbmcoXCJEaXNhbGxvdzpcIi5sZW5ndGgpLnRyaW0oKSlcbiAgICAgIH0gZWxzZSBpZiAobGluZS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoXCJhbGxvdzpcIikgJiYgY3VycmVudEJsb2NrKSB7XG4gICAgICAgIGN1cnJlbnRCbG9jay5hbGxvd3MucHVzaChsaW5lLnN1YnN0cmluZyhcIkFsbG93OlwiLmxlbmd0aCkudHJpbSgpKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAoY3VycmVudEJsb2NrKSB7XG4gICAgICBpZiAoY3VycmVudEJsb2NrLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiYWlcIikgfHwgY3VycmVudEJsb2NrLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiZ3B0XCIpKSB7XG4gICAgICAgIGhhc0FpRGlyZWN0aXZlcyA9IHRydWVcbiAgICAgICAgaWYgKGN1cnJlbnRCbG9jay5kaXNhbGxvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGJsb2NrZWRCb3RzLnB1c2goYCR7Y3VycmVudEJsb2NrLnVzZXJBZ2VudH0gKERpc2FsbG93ZWQ6ICR7Y3VycmVudEJsb2NrLmRpc2FsbG93cy5qb2luKFwiLCBcIil9KWApXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnJlbnRCbG9jay5hbGxvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGFsbG93ZWRCb3RzLnB1c2goYCR7Y3VycmVudEJsb2NrLnVzZXJBZ2VudH0gKEFsbG93ZWQ6ICR7Y3VycmVudEJsb2NrLmFsbG93cy5qb2luKFwiLCBcIil9KWApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiBcImZvdW5kXCIsXG4gICAgICBjb250ZW50LFxuICAgICAgaGFzU2l0ZW1hcCxcbiAgICAgIGhhc0Rpc2FsbG93LFxuICAgICAgaGFzQWlEaXJlY3RpdmVzLFxuICAgICAgYmxvY2tlZEJvdHMsXG4gICAgICBhbGxvd2VkQm90cyxcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogXCJjaGVja19mYWlsZWRcIixcbiAgICAgIGNvbnRlbnQ6IFwiXCIsXG4gICAgICBoYXNTaXRlbWFwOiBmYWxzZSxcbiAgICAgIGhhc0Rpc2FsbG93OiBmYWxzZSxcbiAgICAgIGhhc0FpRGlyZWN0aXZlczogZmFsc2UsXG4gICAgICBibG9ja2VkQm90czogW10sXG4gICAgICBhbGxvd2VkQm90czogW10sXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIixcbiAgICB9XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gY2hlY2tTaXRlbWFwKGJhc2VVcmw6IHN0cmluZyk6IFByb21pc2U8e1xuICBzdGF0dXM6IENoZWNrU3RhdHVzXG4gIHVybENvdW50OiBudW1iZXJcbiAgc2l0ZW1hcFVybHM6IHN0cmluZ1tdXG4gIGVycm9yPzogc3RyaW5nXG4gIHVybD86IHN0cmluZ1xufT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHNpdGVtYXBQYXRocyA9IFtcIi9zaXRlbWFwLnhtbFwiLCBcIi9zaXRlbWFwX2luZGV4LnhtbFwiLCBcIi9zaXRlbWFwL3NpdGVtYXAueG1sXCJdXG5cbiAgICBmb3IgKGNvbnN0IHBhdGggb2Ygc2l0ZW1hcFBhdGhzKSB7XG4gICAgICBjb25zdCBzaXRlbWFwVXJsID0gbmV3IFVSTChwYXRoLCBiYXNlVXJsKS50b1N0cmluZygpXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWxlbnRGZXRjaChzaXRlbWFwVXJsLCA1MDAwKVxuXG4gICAgICBpZiAoIXJlc3VsdC5vaykge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb250ZW50ID0gcmVzdWx0LnRleHRcblxuICAgICAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoXCI8dXJsc2V0XCIpIHx8IGNvbnRlbnQuaW5jbHVkZXMoXCI8c2l0ZW1hcGluZGV4XCIpKSB7XG4gICAgICAgIGNvbnN0IHVybE1hdGNoZXMgPSBjb250ZW50Lm1hdGNoKC88bG9jPiguKj8pPFxcL2xvYz4vZylcbiAgICAgICAgY29uc3QgdXJscyA9IHVybE1hdGNoZXM/Lm1hcCgobSkgPT4gbS5yZXBsYWNlKC88XFwvP2xvYz4vZywgXCJcIikpIHx8IFtdXG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJmb3VuZFwiLCB1cmxDb3VudDogdXJscy5sZW5ndGgsIHNpdGVtYXBVcmxzOiB1cmxzLnNsaWNlKDAsIDEwKSwgdXJsOiBzaXRlbWFwVXJsIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBzdGF0dXM6IFwibm90X2ZvdW5kXCIsIHVybENvdW50OiAwLCBzaXRlbWFwVXJsczogW10gfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IFwiY2hlY2tfZmFpbGVkXCIsXG4gICAgICB1cmxDb3VudDogMCxcbiAgICAgIHNpdGVtYXBVcmxzOiBbXSxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuICAgIH1cbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBjaGVja1Jzc0ZlZWQoYmFzZVVybDogc3RyaW5nKTogUHJvbWlzZTx7XG4gIHN0YXR1czogQ2hlY2tTdGF0dXNcbiAgZmVlZFVybD86IHN0cmluZ1xuICBpdGVtQ291bnQ6IG51bWJlclxuICBlcnJvcj86IHN0cmluZ1xufT4ge1xuICBjb25zdCBmZWVkUGF0aHMgPSBbXCIvZmVlZFwiLCBcIi9yc3NcIiwgXCIvZmVlZC54bWxcIiwgXCIvcnNzLnhtbFwiLCBcIi9hdG9tLnhtbFwiXVxuXG4gIGZvciAoY29uc3QgcGF0aCBvZiBmZWVkUGF0aHMpIHtcbiAgICBjb25zdCBmZWVkVXJsID0gbmV3IFVSTChwYXRoLCBiYXNlVXJsKS50b1N0cmluZygpXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lsZW50RmV0Y2goZmVlZFVybCwgNTAwMClcblxuICAgIGlmICghcmVzdWx0Lm9rKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIGNvbnN0IGNvbnRlbnQgPSByZXN1bHQudGV4dFxuICAgIGlmIChjb250ZW50LmluY2x1ZGVzKFwiPHJzc1wiKSB8fCBjb250ZW50LmluY2x1ZGVzKFwiPGZlZWRcIikgfHwgY29udGVudC5pbmNsdWRlcyhcIjxjaGFubmVsXCIpKSB7XG4gICAgICBjb25zdCBpdGVtTWF0Y2hlcyA9IGNvbnRlbnQubWF0Y2goLzxpdGVtPnw8ZW50cnk+L2cpXG4gICAgICByZXR1cm4geyBzdGF0dXM6IFwiZm91bmRcIiwgZmVlZFVybCwgaXRlbUNvdW50OiBpdGVtTWF0Y2hlcz8ubGVuZ3RoIHx8IDAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IHN0YXR1czogXCJub3RfZm91bmRcIiwgaXRlbUNvdW50OiAwIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gY2hlY2tMbG1zVHh0KGJhc2VVcmw6IHN0cmluZyk6IFByb21pc2U8e1xuICBzdGF0dXM6IENoZWNrU3RhdHVzXG4gIGNvbnRlbnQ6IHN0cmluZ1xuICBoYXNJbnN0cnVjdGlvbnM6IGJvb2xlYW5cbiAgZXJyb3I/OiBzdHJpbmdcbn0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBsbG1zVXJsID0gbmV3IFVSTChcIi9sbG1zLnR4dFwiLCBiYXNlVXJsKS50b1N0cmluZygpXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lsZW50RmV0Y2gobGxtc1VybCwgNTAwMClcblxuICAgIGlmICghcmVzdWx0Lm9rKSB7XG4gICAgICByZXR1cm4geyBzdGF0dXM6IFwibm90X2ZvdW5kXCIsIGNvbnRlbnQ6IFwiXCIsIGhhc0luc3RydWN0aW9uczogZmFsc2UgfVxuICAgIH1cblxuICAgIGlmIChyZXN1bHQuY29udGVudFR5cGUuaW5jbHVkZXMoXCJ0ZXh0L2h0bWxcIikpIHtcbiAgICAgIHJldHVybiB7IHN0YXR1czogXCJub3RfZm91bmRcIiwgY29udGVudDogXCJcIiwgaGFzSW5zdHJ1Y3Rpb25zOiBmYWxzZSB9XG4gICAgfVxuXG4gICAgY29uc3QgY29udGVudCA9IHJlc3VsdC50ZXh0XG5cbiAgICBpZiAoXG4gICAgICBjb250ZW50LnRyaW0oKS5zdGFydHNXaXRoKFwiPCFET0NUWVBFXCIpIHx8XG4gICAgICBjb250ZW50LnRyaW0oKS5zdGFydHNXaXRoKFwiPGh0bWxcIikgfHxcbiAgICAgIGNvbnRlbnQudHJpbSgpLnN0YXJ0c1dpdGgoXCI8SFRNTFwiKVxuICAgICkge1xuICAgICAgcmV0dXJuIHsgc3RhdHVzOiBcIm5vdF9mb3VuZFwiLCBjb250ZW50OiBcIlwiLCBoYXNJbnN0cnVjdGlvbnM6IGZhbHNlIH1cbiAgICB9XG5cbiAgICBjb25zdCBoYXNJbnN0cnVjdGlvbnMgPVxuICAgICAgY29udGVudC5sZW5ndGggPiA1MCAmJlxuICAgICAgKGNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImxsbVwiKSB8fFxuICAgICAgICBjb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJhaVwiKSB8fFxuICAgICAgICBjb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJtb2RlbFwiKSB8fFxuICAgICAgICBjb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJpbnN0cnVjdGlvblwiKSlcblxuICAgIHJldHVybiB7IHN0YXR1czogXCJmb3VuZFwiLCBjb250ZW50LCBoYXNJbnN0cnVjdGlvbnMgfVxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4geyBzdGF0dXM6IFwibm90X2ZvdW5kXCIsIGNvbnRlbnQ6IFwiXCIsIGhhc0luc3RydWN0aW9uczogZmFsc2UgfVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNoZWNrQWlNYW5pZmVzdChiYXNlVXJsOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgc3RhdHVzOiBDaGVja1N0YXR1c1xuICBjb250ZW50OiBzdHJpbmdcbiAgdmVyc2lvbj86IHN0cmluZ1xuICBlcnJvcj86IHN0cmluZ1xufT4ge1xuICBjb25zdCBtYW5pZmVzdFBhdGhzID0gW1wiLy53ZWxsLWtub3duL2FpLW1hbmlmZXN0Lmpzb25cIiwgXCIvYWktbWFuaWZlc3QuanNvblwiLCBcIi8ud2VsbC1rbm93bi9haS1wbHVnaW4uanNvblwiXVxuXG4gIGZvciAoY29uc3QgcGF0aCBvZiBtYW5pZmVzdFBhdGhzKSB7XG4gICAgY29uc3QgbWFuaWZlc3RVcmwgPSBuZXcgVVJMKHBhdGgsIGJhc2VVcmwpLnRvU3RyaW5nKClcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWxlbnRGZXRjaChtYW5pZmVzdFVybCwgNTAwMClcblxuICAgIGlmICghcmVzdWx0Lm9rKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIGlmICghcmVzdWx0LmNvbnRlbnRUeXBlLmluY2x1ZGVzKFwiYXBwbGljYXRpb24vanNvblwiKSAmJiAhcmVzdWx0LmNvbnRlbnRUeXBlLmluY2x1ZGVzKFwidGV4dC9wbGFpblwiKSkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50ID0gcmVzdWx0LnRleHRcblxuICAgIGlmIChjb250ZW50LnRyaW0oKS5zdGFydHNXaXRoKFwiPCFET0NUWVBFXCIpIHx8IGNvbnRlbnQudHJpbSgpLnN0YXJ0c1dpdGgoXCI8aHRtbFwiKSkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShjb250ZW50KVxuICAgICAgY29uc3QgdmVyc2lvbiA9IHBhcnNlZC5hcGk/LnZlcnNpb24gfHwgcGFyc2VkLnZlcnNpb25cbiAgICAgIHJldHVybiB7IHN0YXR1czogXCJmb3VuZFwiLCBjb250ZW50LCB2ZXJzaW9uIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHsgc3RhdHVzOiBcIm5vdF9mb3VuZFwiLCBjb250ZW50OiBcIlwiIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gY2hlY2tNY3BDb25maWcoYmFzZVVybDogc3RyaW5nKTogUHJvbWlzZTx7XG4gIHN0YXR1czogQ2hlY2tTdGF0dXNcbiAgY29udGVudDogc3RyaW5nXG4gIHRvb2xzPzogc3RyaW5nW11cbiAgZXJyb3I/OiBzdHJpbmdcbn0+IHtcbiAgY29uc3QgbWNwUGF0aHMgPSBbXCIvLndlbGwta25vd24vbWNwLmpzb25cIiwgXCIvbWNwLmpzb25cIl1cblxuICBmb3IgKGNvbnN0IHBhdGggb2YgbWNwUGF0aHMpIHtcbiAgICBjb25zdCBtY3BVcmwgPSBuZXcgVVJMKHBhdGgsIGJhc2VVcmwpLnRvU3RyaW5nKClcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWxlbnRGZXRjaChtY3BVcmwsIDUwMDApXG5cbiAgICBpZiAoIXJlc3VsdC5vaykge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBpZiAoIXJlc3VsdC5jb250ZW50VHlwZS5pbmNsdWRlcyhcImFwcGxpY2F0aW9uL2pzb25cIikgJiYgIXJlc3VsdC5jb250ZW50VHlwZS5pbmNsdWRlcyhcInRleHQvcGxhaW5cIikpIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgY29uc3QgY29udGVudCA9IHJlc3VsdC50ZXh0XG5cbiAgICBpZiAoY29udGVudC50cmltKCkuc3RhcnRzV2l0aChcIjwhRE9DVFlQRVwiKSB8fCBjb250ZW50LnRyaW0oKS5zdGFydHNXaXRoKFwiPGh0bWxcIikpIHtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoY29udGVudClcbiAgICAgIGNvbnN0IHRvb2xzID0gcGFyc2VkLnRvb2xzIHx8IFtdXG4gICAgICByZXR1cm4geyBzdGF0dXM6IFwiZm91bmRcIiwgY29udGVudCwgdG9vbHMgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgY29udGludWVcbiAgICB9XG4gIH1cblxuICByZXR1cm4geyBzdGF0dXM6IFwibm90X2ZvdW5kXCIsIGNvbnRlbnQ6IFwiXCIgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBjaGVja09wZW5BcGkoYmFzZVVybDogc3RyaW5nKTogUHJvbWlzZTx7XG4gIHN0YXR1czogQ2hlY2tTdGF0dXNcbiAgY29udGVudDogc3RyaW5nXG4gIHZlcnNpb24/OiBzdHJpbmdcbiAgZXJyb3I/OiBzdHJpbmdcbn0+IHtcbiAgY29uc3Qgb3BlbkFwaVBhdGhzID0gW1wiL29wZW5hcGkuanNvblwiLCBcIi9zd2FnZ2VyLmpzb25cIiwgXCIvYXBpLWRvY3NcIiwgXCIvYXBpL29wZW5hcGkuanNvblwiLCBcIi9hcGkvc3dhZ2dlci5qc29uXCJdXG5cbiAgZm9yIChjb25zdCBwYXRoIG9mIG9wZW5BcGlQYXRocykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhcGlVcmwgPSBuZXcgVVJMKHBhdGgsIGJhc2VVcmwpLnRvU3RyaW5nKClcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpbGVudEZldGNoKGFwaVVybCwgNTAwMClcblxuICAgICAgaWYgKCFyZXN1bHQub2sgfHwgIXJlc3VsdC50ZXh0KSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzdWx0LmNvbnRlbnRUeXBlLnRvTG93ZXJDYXNlKClcbiAgICAgIGlmIChjb250ZW50VHlwZS5pbmNsdWRlcyhcInRleHQvaHRtbFwiKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb250ZW50ID0gcmVzdWx0LnRleHRcblxuICAgICAgY29uc3QgdHJpbW1lZENvbnRlbnQgPSBjb250ZW50LnRyaW0oKVxuICAgICAgaWYgKFxuICAgICAgICB0cmltbWVkQ29udGVudC5zdGFydHNXaXRoKFwiPCFET0NUWVBFXCIpIHx8XG4gICAgICAgIHRyaW1tZWRDb250ZW50LnN0YXJ0c1dpdGgoXCI8aHRtbFwiKSB8fFxuICAgICAgICB0cmltbWVkQ29udGVudC5zdGFydHNXaXRoKFwiPEhUTUxcIilcbiAgICAgICkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGNvbnRlbnQpXG4gICAgICAgIGlmIChwYXJzZWQub3BlbmFwaSB8fCBwYXJzZWQuc3dhZ2dlcikge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IFwiZm91bmRcIixcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB2ZXJzaW9uOiBwYXJzZWQub3BlbmFwaSB8fCBwYXJzZWQuc3dhZ2dlcixcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gU2tpcCB0aGlzIHBhdGggb24gYW55IGVycm9yXG4gICAgICBjb250aW51ZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IHN0YXR1czogXCJub3RfZm91bmRcIiwgY29udGVudDogXCJcIiB9XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RKc29uTGRTY2hlbWFzKGh0bWw6IHN0cmluZyk6IHsgdHlwZXM6IHN0cmluZ1tdOyBzY2hlbWFzOiB1bmtub3duW10gfSB7XG4gIGNvbnN0IHNjaGVtYXM6IHVua25vd25bXSA9IFtdXG4gIGNvbnN0IHR5cGVzOiBzdHJpbmdbXSA9IFtdXG5cbiAgY29uc3Qgc2NyaXB0UmVnZXggPSAvPHNjcmlwdFtePl0qdHlwZT1bXCInXWFwcGxpY2F0aW9uXFwvbGRcXCtqc29uW1wiJ11bXj5dKj4oW1xcc1xcU10qPyk8XFwvc2NyaXB0Pi9naVxuICBsZXQgbWF0Y2hcblxuICB3aGlsZSAoKG1hdGNoID0gc2NyaXB0UmVnZXguZXhlYyhodG1sKSkgIT09IG51bGwpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShtYXRjaFsxXSlcbiAgICAgIHNjaGVtYXMucHVzaChwYXJzZWQpXG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcnNlZCkpIHtcbiAgICAgICAgcGFyc2VkLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICBpZiAoaXRlbVtcIkB0eXBlXCJdKSB7XG4gICAgICAgICAgICB0eXBlcy5wdXNoKEFycmF5LmlzQXJyYXkoaXRlbVtcIkB0eXBlXCJdKSA/IGl0ZW1bXCJAdHlwZVwiXS5qb2luKFwiLCBcIikgOiBpdGVtW1wiQHR5cGVcIl0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmIChwYXJzZWRbXCJAdHlwZVwiXSkge1xuICAgICAgICB0eXBlcy5wdXNoKEFycmF5LmlzQXJyYXkocGFyc2VkW1wiQHR5cGVcIl0pID8gcGFyc2VkW1wiQHR5cGVcIl0uam9pbihcIiwgXCIpIDogcGFyc2VkW1wiQHR5cGVcIl0pXG4gICAgICB9IGVsc2UgaWYgKHBhcnNlZFtcIkBncmFwaFwiXSkge1xuICAgICAgICBwYXJzZWRbXCJAZ3JhcGhcIl0uZm9yRWFjaCgoaXRlbTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pID0+IHtcbiAgICAgICAgICBpZiAoaXRlbVtcIkB0eXBlXCJdKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtVHlwZSA9IGl0ZW1bXCJAdHlwZVwiXVxuICAgICAgICAgICAgdHlwZXMucHVzaChBcnJheS5pc0FycmF5KGl0ZW1UeXBlKSA/IGl0ZW1UeXBlLmpvaW4oXCIsIFwiKSA6IFN0cmluZyhpdGVtVHlwZSkpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gSW52YWxpZCBKU09OLUxEXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHsgdHlwZXM6IFsuLi5uZXcgU2V0KHR5cGVzKV0sIHNjaGVtYXMgfVxufVxuXG5mdW5jdGlvbiBleHRyYWN0TWV0YVRhZ3MoaHRtbDogc3RyaW5nKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gIGNvbnN0IG1ldGFUYWdzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge31cbiAgY29uc3QgbWV0YVJlZ2V4ID0gLzxtZXRhW14+XSo+L2dpXG4gIGxldCBtYXRjaFxuXG4gIHdoaWxlICgobWF0Y2ggPSBtZXRhUmVnZXguZXhlYyhodG1sKSkgIT09IG51bGwpIHtcbiAgICBjb25zdCBuYW1lTWF0Y2ggPSBtYXRjaFswXS5tYXRjaCgvKD86bmFtZXxwcm9wZXJ0eSk9W1wiJ10oW15cIiddKylbXCInXS9pKVxuICAgIGNvbnN0IGNvbnRlbnRNYXRjaCA9IG1hdGNoWzBdLm1hdGNoKC9jb250ZW50PVtcIiddKFteXCInXSspW1wiJ10vaSlcblxuICAgIGlmIChuYW1lTWF0Y2ggJiYgY29udGVudE1hdGNoKSB7XG4gICAgICBtZXRhVGFnc1tuYW1lTWF0Y2hbMV1dID0gY29udGVudE1hdGNoWzFdXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG1ldGFUYWdzXG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RIZWFkaW5ncyhodG1sOiBzdHJpbmcpOiB7IGgxOiBzdHJpbmdbXTsgaDI6IHN0cmluZ1tdOyBoMzogc3RyaW5nW10gfSB7XG4gIGNvbnN0IGgxczogc3RyaW5nW10gPSBbXVxuICBjb25zdCBoMnM6IHN0cmluZ1tdID0gW11cbiAgY29uc3QgaDNzOiBzdHJpbmdbXSA9IFtdXG5cbiAgY29uc3QgaDFSZWdleCA9IC88aDFbXj5dKj4oW1xcc1xcU10qPyk8XFwvaDE+L2dpXG4gIGNvbnN0IGgyUmVnZXggPSAvPGgyW14+XSo+KFtcXHNcXFNdKj8pPFxcL2gyPi9naVxuICBjb25zdCBoM1JlZ2V4ID0gLzxoM1tePl0qPihbXFxzXFxTXSo/KTxcXC9oMz4vZ2lcblxuICBsZXQgbWF0Y2hcbiAgd2hpbGUgKChtYXRjaCA9IGgxUmVnZXguZXhlYyhodG1sKSkgIT09IG51bGwpIHtcbiAgICBoMXMucHVzaChtYXRjaFsxXS5yZXBsYWNlKC88W14+XSs+L2csIFwiXCIpLnRyaW0oKSlcbiAgfVxuICB3aGlsZSAoKG1hdGNoID0gaDJSZWdleC5leGVjKGh0bWwpKSAhPT0gbnVsbCkge1xuICAgIGgycy5wdXNoKG1hdGNoWzFdLnJlcGxhY2UoLzxbXj5dKz4vZywgXCJcIikudHJpbSgpKVxuICB9XG4gIHdoaWxlICgobWF0Y2ggPSBoM1JlZ2V4LmV4ZWMoaHRtbCkpICE9PSBudWxsKSB7XG4gICAgaDNzLnB1c2gobWF0Y2hbMV0ucmVwbGFjZSgvPFtePl0rPi9nLCBcIlwiKS50cmltKCkpXG4gIH1cblxuICByZXR1cm4geyBoMTogaDFzLCBoMjogaDJzLCBoMzogaDNzIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gYW5hbHl6ZUNvbnRlbnRXaXRoQUkoXG4gIHVybDogc3RyaW5nLFxuICBodG1sOiBzdHJpbmcsXG4gIG1hcmtkb3duOiBzdHJpbmcsXG4gIG1ldGFkYXRhOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbik6IFByb21pc2U8e1xuICB0b3BpY1JlY29nbml0aW9uOiB7XG4gICAgcHJpbWFyeVRvcGljOiBzdHJpbmdcbiAgICBzZWNvbmRhcnlUb3BpY3M6IHN0cmluZ1tdXG4gICAgaW5kdXN0cnk6IHN0cmluZ1xuICAgIGNvbnRlbnRUeXBlOiBzdHJpbmdcbiAgICBrZXl3b3Jkczogc3RyaW5nW11cbiAgICBlbnRpdGllczogQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PlxuICAgIHRhcmdldEF1ZGllbmNlOiBzdHJpbmdcbiAgfVxuICBjb250ZW50R2FwOiB7XG4gICAgbWlzc2luZ1RvcGljczogc3RyaW5nW11cbiAgICBtaXNzaW5nUXVlc3Rpb25zOiBzdHJpbmdbXVxuICAgIGNvbnRlbnRTY29yZTogbnVtYmVyXG4gICAgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXVxuICB9XG4gIG5hcERhdGE6IHtcbiAgICBuYW1lOiBzdHJpbmcgfCBudWxsXG4gICAgYWRkcmVzczogc3RyaW5nIHwgbnVsbFxuICAgIHBob25lOiBzdHJpbmcgfCBudWxsXG4gICAgZW1haWw6IHN0cmluZyB8IG51bGxcbiAgICBpc0NvbXBsZXRlOiBib29sZWFuXG4gIH1cbiAgZmFjdENoZWNrOiB7XG4gICAgY2xhaW1zOiBBcnJheTx7IGNsYWltOiBzdHJpbmc7IHZlcmlmaWFibGU6IGJvb2xlYW47IGlzc3VlOiBzdHJpbmcgfCBudWxsIH0+XG4gICAgb3ZlcmFsbENyZWRpYmlsaXR5OiBudW1iZXJcbiAgICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdXG4gIH1cbiAgdXNlclF1ZXN0aW9uczogc3RyaW5nW11cbn0+IHtcbiAgY29uc3QgY29udGVudCA9IG1hcmtkb3duIHx8IGh0bWwucmVwbGFjZSgvPFtePl0rPi9nLCBcIiBcIikuc3Vic3RyaW5nKDAsIDE1MDAwKVxuICBjb25zdCB0aXRsZSA9IChtZXRhZGF0YS50aXRsZSBhcyBzdHJpbmcpIHx8IFwiXCJcbiAgY29uc3QgZG9tYWluID0gbmV3IFVSTCh1cmwpLmhvc3RuYW1lLnJlcGxhY2UoXCJ3d3cuXCIsIFwiXCIpXG5cbiAgY29uc3QgZGVmYXVsdFJlc3BvbnNlID0ge1xuICAgIHRvcGljUmVjb2duaXRpb246IHtcbiAgICAgIHByaW1hcnlUb3BpYzogXCJVbmtub3duXCIsXG4gICAgICBzZWNvbmRhcnlUb3BpY3M6IFtdLFxuICAgICAgaW5kdXN0cnk6IFwiZ2VuZXJhbFwiLFxuICAgICAgY29udGVudFR5cGU6IFwid2VicGFnZVwiLFxuICAgICAga2V5d29yZHM6IFtdLFxuICAgICAgZW50aXRpZXM6IFtdLFxuICAgICAgdGFyZ2V0QXVkaWVuY2U6IFwiR2VuZXJhbCBhdWRpZW5jZVwiLFxuICAgIH0sXG4gICAgY29udGVudEdhcDoge1xuICAgICAgbWlzc2luZ1RvcGljczogW10sXG4gICAgICBtaXNzaW5nUXVlc3Rpb25zOiBbXSxcbiAgICAgIGNvbnRlbnRTY29yZTogNTAsXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IFtcIlVuYWJsZSB0byBhbmFseXplIGNvbnRlbnRcIl0sXG4gICAgfSxcbiAgICBuYXBEYXRhOiB7XG4gICAgICBuYW1lOiBudWxsLFxuICAgICAgYWRkcmVzczogbnVsbCxcbiAgICAgIHBob25lOiBudWxsLFxuICAgICAgZW1haWw6IG51bGwsXG4gICAgICBpc0NvbXBsZXRlOiBmYWxzZSxcbiAgICB9LFxuICAgIGZhY3RDaGVjazoge1xuICAgICAgY2xhaW1zOiBbXSxcbiAgICAgIG92ZXJhbGxDcmVkaWJpbGl0eTogNTAsXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IFtdLFxuICAgIH0sXG4gICAgdXNlclF1ZXN0aW9uczogW10sXG4gIH1cblxuICBpZiAoY29udGVudC50cmltKCkubGVuZ3RoIDwgMTAwKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRSZXNwb25zZVxuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IHRleHQgfSA9IGF3YWl0IGdlbmVyYXRlVGV4dCh7XG4gICAgICBtb2RlbDogXCJhbnRocm9waWMvY2xhdWRlLXNvbm5ldC00LTIwMjUwNTE0XCIsXG4gICAgICBwcm9tcHQ6IGBZb3UgYXJlIGFuIEFJIGNvbnRlbnQgYW5hbHl6ZXIuIEFuYWx5emUgdGhpcyB3ZWJzaXRlIHRob3JvdWdobHkuXG5cblVSTDogJHt1cmx9XG5Eb21haW46ICR7ZG9tYWlufVxuVGl0bGU6ICR7dGl0bGV9XG5Db250ZW50IChmaXJzdCAxMjAwMCBjaGFycyk6ICR7Y29udGVudC5zdWJzdHJpbmcoMCwgMTIwMDApfVxuXG5JTVBPUlRBTlQ6IEV4dHJhY3QgYXMgbXVjaCBpbmZvcm1hdGlvbiBhcyBwb3NzaWJsZSBmcm9tIHRoZSBjb250ZW50LiBFdmVuIGlmIGluZm9ybWF0aW9uIGlzIGxpbWl0ZWQsIG1ha2UgZWR1Y2F0ZWQgZ3Vlc3NlcyBiYXNlZCBvbiB0aGUgZG9tYWluIG5hbWUgYW5kIGFueSBhdmFpbGFibGUgdGV4dC5cblxuUmVzcG9uZCB3aXRoIE9OTFkgYSB2YWxpZCBKU09OIG9iamVjdCAobm8gbWFya2Rvd24sIG5vIGV4cGxhbmF0aW9uKTpcbntcbiAgXCJ0b3BpY1JlY29nbml0aW9uXCI6IHtcbiAgICBcInByaW1hcnlUb3BpY1wiOiBcIm1haW4gdG9waWMgYmFzZWQgb24gY29udGVudCBhbmQgZG9tYWluIG5hbWVcIixcbiAgICBcInNlY29uZGFyeVRvcGljc1wiOiBbXCJyZWxhdGVkIHRvcGljIDFcIiwgXCJyZWxhdGVkIHRvcGljIDJcIl0sXG4gICAgXCJpbmR1c3RyeVwiOiBcIm9uZSBvZjogZWNvbW1lcmNlLCBzYWFzLCBtZWRpYSwgbG9jYWxfYnVzaW5lc3MsIGVkdWNhdGlvbiwgaGVhbHRoY2FyZSwgZmluYW5jZSwgdGVjaG5vbG9neSwgZ2VuZXJhbFwiLFxuICAgIFwiY29udGVudFR5cGVcIjogXCJsYW5kaW5nIHBhZ2UsIGJsb2csIHByb2R1Y3QgcGFnZSwgc2VydmljZSBwYWdlLCBjb3Jwb3JhdGUgd2Vic2l0ZSwgZXRjLlwiLFxuICAgIFwia2V5d29yZHNcIjogW1wia2V5XCIsIFwid29yZHNcIiwgXCJmcm9tXCIsIFwiY29udGVudFwiXSxcbiAgICBcImVudGl0aWVzXCI6IFt7XCJuYW1lXCI6IFwiY29tcGFueSBvciBicmFuZCBuYW1lXCIsIFwidHlwZVwiOiBcIm9yZ2FuaXphdGlvblwifV0sXG4gICAgXCJ0YXJnZXRBdWRpZW5jZVwiOiBcIndobyB0aGlzIHdlYnNpdGUgaXMgZm9yXCJcbiAgfSxcbiAgXCJjb250ZW50R2FwXCI6IHtcbiAgICBcIm1pc3NpbmdUb3BpY3NcIjogW1wiaW1wb3J0YW50IHRvcGljcyBub3QgY292ZXJlZFwiXSxcbiAgICBcIm1pc3NpbmdRdWVzdGlvbnNcIjogW1wicXVlc3Rpb25zIHZpc2l0b3JzIG1pZ2h0IGhhdmUgdGhhdCBhcmVuJ3QgYW5zd2VyZWRcIl0sXG4gICAgXCJjb250ZW50U2NvcmVcIjogNjUsXG4gICAgXCJyZWNvbW1lbmRhdGlvbnNcIjogW1wic3BlY2lmaWMgaW1wcm92ZW1lbnQgc3VnZ2VzdGlvbnNcIl1cbiAgfSxcbiAgXCJuYXBEYXRhXCI6IHtcbiAgICBcIm5hbWVcIjogXCJidXNpbmVzcyBuYW1lIGlmIGZvdW5kLCBvdGhlcndpc2UgbnVsbFwiLFxuICAgIFwiYWRkcmVzc1wiOiBcImZ1bGwgYWRkcmVzcyBpZiBmb3VuZCwgb3RoZXJ3aXNlIG51bGxcIixcbiAgICBcInBob25lXCI6IFwicGhvbmUgbnVtYmVyIGlmIGZvdW5kLCBvdGhlcndpc2UgbnVsbFwiLFxuICAgIFwiZW1haWxcIjogXCJlbWFpbCBpZiBmb3VuZCwgb3RoZXJ3aXNlIG51bGxcIixcbiAgICBcImlzQ29tcGxldGVcIjogZmFsc2VcbiAgfSxcbiAgXCJmYWN0Q2hlY2tcIjoge1xuICAgIFwiY2xhaW1zXCI6IFt7XCJjbGFpbVwiOiBcImFueSBmYWN0dWFsIGNsYWltcyBtYWRlXCIsIFwidmVyaWZpYWJsZVwiOiB0cnVlLCBcImlzc3VlXCI6IG51bGx9XSxcbiAgICBcIm92ZXJhbGxDcmVkaWJpbGl0eVwiOiA3MCxcbiAgICBcInJlY29tbWVuZGF0aW9uc1wiOiBbXCJob3cgdG8gaW1wcm92ZSBjcmVkaWJpbGl0eVwiXVxuICB9LFxuICBcInVzZXJRdWVzdGlvbnNcIjogW1wid2hhdCB3b3VsZCBzb21lb25lIGFzayBhbiBBSSBhYm91dCB0aGlzIGJ1c2luZXNzP1wiLCBcImFub3RoZXIgbGlrZWx5IHF1ZXN0aW9uXCJdXG59YCxcbiAgICB9KVxuXG4gICAgbGV0IGpzb25UZXh0ID0gdGV4dC50cmltKClcblxuICAgIGlmIChqc29uVGV4dC5zdGFydHNXaXRoKFwiYGBgXCIpKSB7XG4gICAgICBqc29uVGV4dCA9IGpzb25UZXh0LnJlcGxhY2UoL15gYGAoPzpqc29uKT9cXG4/LywgXCJcIikucmVwbGFjZSgvXFxuP2BgYCQvLCBcIlwiKVxuICAgIH1cblxuICAgIGNvbnN0IGpzb25NYXRjaCA9IGpzb25UZXh0Lm1hdGNoKC9cXHtbXFxzXFxTXSpcXH0vKVxuICAgIGlmIChqc29uTWF0Y2gpIHtcbiAgICAgIGpzb25UZXh0ID0ganNvbk1hdGNoWzBdXG4gICAgfVxuXG4gICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShqc29uVGV4dClcblxuICAgIHJldHVybiB7XG4gICAgICB0b3BpY1JlY29nbml0aW9uOiB7XG4gICAgICAgIHByaW1hcnlUb3BpYzogcGFyc2VkLnRvcGljUmVjb2duaXRpb24/LnByaW1hcnlUb3BpYyB8fCBkZWZhdWx0UmVzcG9uc2UudG9waWNSZWNvZ25pdGlvbi5wcmltYXJ5VG9waWMsXG4gICAgICAgIHNlY29uZGFyeVRvcGljczogcGFyc2VkLnRvcGljUmVjb2duaXRpb24/LnNlY29uZGFyeVRvcGljcyB8fCBbXSxcbiAgICAgICAgaW5kdXN0cnk6IHBhcnNlZC50b3BpY1JlY29nbml0aW9uPy5pbmR1c3RyeSB8fCBcImdlbmVyYWxcIixcbiAgICAgICAgY29udGVudFR5cGU6IHBhcnNlZC50b3BpY1JlY29nbml0aW9uPy5jb250ZW50VHlwZSB8fCBcIndlYnBhZ2VcIixcbiAgICAgICAga2V5d29yZHM6IHBhcnNlZC50b3BpY1JlY29nbml0aW9uPy5rZXl3b3JkcyB8fCBbXSxcbiAgICAgICAgZW50aXRpZXM6IHBhcnNlZC50b3BpY1JlY29nbml0aW9uPy5lbnRpdGllcyB8fCBbXSxcbiAgICAgICAgdGFyZ2V0QXVkaWVuY2U6IHBhcnNlZC50b3BpY1JlY29nbml0aW9uPy50YXJnZXRBdWRpZW5jZSB8fCBcIkdlbmVyYWwgYXVkaWVuY2VcIixcbiAgICAgIH0sXG4gICAgICBjb250ZW50R2FwOiB7XG4gICAgICAgIG1pc3NpbmdUb3BpY3M6IHBhcnNlZC5jb250ZW50R2FwPy5taXNzaW5nVG9waWNzIHx8IFtdLFxuICAgICAgICBtaXNzaW5nUXVlc3Rpb25zOiBwYXJzZWQuY29udGVudEdhcD8ubWlzc2luZ1F1ZXN0aW9ucyB8fCBbXSxcbiAgICAgICAgY29udGVudFNjb3JlOiBwYXJzZWQuY29udGVudEdhcD8uY29udGVudFNjb3JlIHx8IDUwLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IHBhcnNlZC5jb250ZW50R2FwPy5yZWNvbW1lbmRhdGlvbnMgfHwgW10sXG4gICAgICB9LFxuICAgICAgbmFwRGF0YToge1xuICAgICAgICBuYW1lOiBwYXJzZWQubmFwRGF0YT8ubmFtZSB8fCBudWxsLFxuICAgICAgICBhZGRyZXNzOiBwYXJzZWQubmFwRGF0YT8uYWRkcmVzcyB8fCBudWxsLFxuICAgICAgICBwaG9uZTogcGFyc2VkLm5hcERhdGE/LnBob25lIHx8IG51bGwsXG4gICAgICAgIGVtYWlsOiBwYXJzZWQubmFwRGF0YT8uZW1haWwgfHwgbnVsbCxcbiAgICAgICAgaXNDb21wbGV0ZTogcGFyc2VkLm5hcERhdGE/LmlzQ29tcGxldGUgfHwgZmFsc2UsXG4gICAgICB9LFxuICAgICAgZmFjdENoZWNrOiB7XG4gICAgICAgIGNsYWltczogcGFyc2VkLmZhY3RDaGVjaz8uY2xhaW1zIHx8IFtdLFxuICAgICAgICBvdmVyYWxsQ3JlZGliaWxpdHk6IHBhcnNlZC5mYWN0Q2hlY2s/Lm92ZXJhbGxDcmVkaWJpbGl0eSB8fCA1MCxcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBwYXJzZWQuZmFjdENoZWNrPy5yZWNvbW1lbmRhdGlvbnMgfHwgW10sXG4gICAgICB9LFxuICAgICAgdXNlclF1ZXN0aW9uczogcGFyc2VkLnVzZXJRdWVzdGlvbnMgfHwgW10sXG4gICAgfVxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZGVmYXVsdFJlc3BvbnNlXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gYnVpbGRDb21wYW55UHJvZmlsZShcbiAgdXJsOiBzdHJpbmcsXG4gIGh0bWw6IHN0cmluZyxcbiAgbWFya2Rvd246IHN0cmluZyxcbiAgbWV0YWRhdGE6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBuYXBEYXRhOiB7IG5hbWU6IHN0cmluZyB8IG51bGw7IGFkZHJlc3M6IHN0cmluZyB8IG51bGw7IHBob25lOiBzdHJpbmcgfCBudWxsOyBlbWFpbDogc3RyaW5nIHwgbnVsbCB9LFxuICB0b3BpY1JlY29nbml0aW9uOiB7IHByaW1hcnlUb3BpYzogc3RyaW5nOyBzZWNvbmRhcnlUb3BpY3M6IHN0cmluZ1tdOyBpbmR1c3RyeTogc3RyaW5nOyB0YXJnZXRBdWRpZW5jZTogc3RyaW5nIH0sXG4pOiBQcm9taXNlPHtcbiAgY29tcGFueU5hbWU6IHN0cmluZ1xuICBpbmR1c3RyeTogc3RyaW5nXG4gIHNlcnZpY2VzOiBzdHJpbmdbXVxuICBsb2NhdGlvbjogeyBjaXR5OiBzdHJpbmcgfCBudWxsOyByZWdpb246IHN0cmluZyB8IG51bGw7IGNvdW50cnk6IHN0cmluZyB8IG51bGwgfVxuICB0YXJnZXRNYXJrZXQ6IHN0cmluZ1xuICB1bmlxdWVTZWxsaW5nUG9pbnRzOiBzdHJpbmdbXVxuICBidXNpbmVzc1R5cGU6IHN0cmluZ1xufT4ge1xuICBjb25zdCBkb21haW4gPSBuZXcgVVJMKHVybCkuaG9zdG5hbWUucmVwbGFjZShcInd3dy5cIiwgXCJcIilcbiAgY29uc3QgY29udGVudCA9IG1hcmtkb3duIHx8IGh0bWwucmVwbGFjZSgvPFtePl0rPi9nLCBcIiBcIikuc3Vic3RyaW5nKDAsIDEwMDAwKVxuICBjb25zdCB0aXRsZSA9IChtZXRhZGF0YS50aXRsZSBhcyBzdHJpbmcpIHx8IFwiXCJcblxuICB0cnkge1xuICAgIGNvbnN0IHsgdGV4dCB9ID0gYXdhaXQgZ2VuZXJhdGVUZXh0KHtcbiAgICAgIG1vZGVsOiBcImFudGhyb3BpYy9jbGF1ZGUtc29ubmV0LTQtMjAyNTA1MTRcIixcbiAgICAgIHByb21wdDogYEFuYWx5emUgdGhpcyBjb21wYW55L3dlYnNpdGUgdG8gYnVpbGQgYSBkZXRhaWxlZCBwcm9maWxlIGZvciBjb21wZXRpdG9yIGlkZW50aWZpY2F0aW9uLlxuXG5VUkw6ICR7dXJsfVxuRG9tYWluOiAke2RvbWFpbn1cblRpdGxlOiAke3RpdGxlfVxuS25vd24gQnVzaW5lc3MgTmFtZTogJHtuYXBEYXRhLm5hbWUgfHwgXCJVbmtub3duXCJ9XG5Lbm93biBBZGRyZXNzOiAke25hcERhdGEuYWRkcmVzcyB8fCBcIk5vdCBmb3VuZFwifVxuS25vd24gUGhvbmU6ICR7bmFwRGF0YS5waG9uZSB8fCBcIk5vdCBmb3VuZFwifVxuSW5kdXN0cnkgSGludDogJHt0b3BpY1JlY29nbml0aW9uLmluZHVzdHJ5fVxuUHJpbWFyeSBUb3BpYzogJHt0b3BpY1JlY29nbml0aW9uLnByaW1hcnlUb3BpY31cblxuQ29udGVudCBleGNlcnB0OlxuJHtjb250ZW50LnN1YnN0cmluZygwLCA4MDAwKX1cblxuQnVpbGQgYSBjb21wcmVoZW5zaXZlIGNvbXBhbnkgcHJvZmlsZS4gRXh0cmFjdCBvciBpbmZlcjpcbjEuIENvbXBhbnkgbmFtZSAoZnJvbSBjb250ZW50LCBkb21haW4sIG9yIE5BUCBkYXRhKVxuMi4gSW5kdXN0cnkvc2VjdG9yXG4zLiBNYWluIHNlcnZpY2VzIG9yIHByb2R1Y3RzIG9mZmVyZWRcbjQuIExvY2F0aW9uIChjaXR5LCByZWdpb24vc3RhdGUsIGNvdW50cnkpIC0gZXh0cmFjdCBmcm9tIGFkZHJlc3MsIHBob25lIGFyZWEgY29kZSwgY29udGVudCBtZW50aW9uc1xuNS4gVGFyZ2V0IG1hcmtldCAoQjJCLCBCMkMsIGxvY2FsLCByZWdpb25hbCwgbmF0aW9uYWwsIGludGVybmF0aW9uYWwpXG42LiBVbmlxdWUgc2VsbGluZyBwb2ludHMgb3IgZGlmZmVyZW50aWF0b3JzXG43LiBCdXNpbmVzcyB0eXBlIChzZXJ2aWNlIHByb3ZpZGVyLCByZXRhaWxlciwgbWFudWZhY3R1cmVyLCBhZ2VuY3ksIG5vbnByb2ZpdCwgbWVkaWEsIGV0Yy4pXG5cblJldHVybiBPTkxZIHZhbGlkIEpTT046XG57XG4gIFwiY29tcGFueU5hbWVcIjogXCJDb21wYW55IE5hbWVcIixcbiAgXCJpbmR1c3RyeVwiOiBcInNwZWNpZmljIGluZHVzdHJ5IGxpa2UgZGlnaXRhbCBzdXN0YWluYWJpbGl0eSwgd2ViIGRldmVsb3BtZW50LCBsb2NhbCBwbHVtYmluZ1wiLFxuICBcInNlcnZpY2VzXCI6IFtcInNlcnZpY2UgMVwiLCBcInNlcnZpY2UgMlwiLCBcInNlcnZpY2UgM1wiXSxcbiAgXCJsb2NhdGlvblwiOiB7XG4gICAgXCJjaXR5XCI6IFwiQ2l0eSBuYW1lIG9yIG51bGxcIixcbiAgICBcInJlZ2lvblwiOiBcIlN0YXRlL1JlZ2lvbiBvciBudWxsXCIsXG4gICAgXCJjb3VudHJ5XCI6IFwiQ291bnRyeSBvciBudWxsXCJcbiAgfSxcbiAgXCJ0YXJnZXRNYXJrZXRcIjogXCJsb2NhbCwgcmVnaW9uYWwsIG5hdGlvbmFsLCBvciBpbnRlcm5hdGlvbmFsXCIsXG4gIFwidW5pcXVlU2VsbGluZ1BvaW50c1wiOiBbXCJ3aGF0IG1ha2VzIHRoZW0gZGlmZmVyZW50XCJdLFxuICBcImJ1c2luZXNzVHlwZVwiOiBcInR5cGUgb2YgYnVzaW5lc3NcIlxufWAsXG4gICAgfSlcblxuICAgIGNvbnN0IGNsZWFuZWQgPSB0ZXh0LnJlcGxhY2UoL2BgYGpzb25cXG4/fFxcbj9gYGAvZywgXCJcIikudHJpbSgpXG4gICAgY29uc3QganNvbk1hdGNoID0gY2xlYW5lZC5tYXRjaCgvXFx7W1xcc1xcU10qXFx9LylcbiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGpzb25NYXRjaCA/IGpzb25NYXRjaFswXSA6IGNsZWFuZWQpXG5cbiAgICByZXR1cm4ge1xuICAgICAgY29tcGFueU5hbWU6IHBhcnNlZC5jb21wYW55TmFtZSB8fCBuYXBEYXRhLm5hbWUgfHwgZG9tYWluLFxuICAgICAgaW5kdXN0cnk6IHBhcnNlZC5pbmR1c3RyeSB8fCB0b3BpY1JlY29nbml0aW9uLmluZHVzdHJ5LFxuICAgICAgc2VydmljZXM6IHBhcnNlZC5zZXJ2aWNlcyB8fCBbXSxcbiAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgIGNpdHk6IHBhcnNlZC5sb2NhdGlvbj8uY2l0eSB8fCBudWxsLFxuICAgICAgICByZWdpb246IHBhcnNlZC5sb2NhdGlvbj8ucmVnaW9uIHx8IG51bGwsXG4gICAgICAgIGNvdW50cnk6IHBhcnNlZC5sb2NhdGlvbj8uY291bnRyeSB8fCBudWxsLFxuICAgICAgfSxcbiAgICAgIHRhcmdldE1hcmtldDogcGFyc2VkLnRhcmdldE1hcmtldCB8fCBcImdlbmVyYWxcIixcbiAgICAgIHVuaXF1ZVNlbGxpbmdQb2ludHM6IHBhcnNlZC51bmlxdWVTZWxsaW5nUG9pbnRzIHx8IFtdLFxuICAgICAgYnVzaW5lc3NUeXBlOiBwYXJzZWQuYnVzaW5lc3NUeXBlIHx8IFwiYnVzaW5lc3NcIixcbiAgICB9XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiB7XG4gICAgICBjb21wYW55TmFtZTogbmFwRGF0YS5uYW1lIHx8IGRvbWFpbixcbiAgICAgIGluZHVzdHJ5OiB0b3BpY1JlY29nbml0aW9uLmluZHVzdHJ5LFxuICAgICAgc2VydmljZXM6IFtdLFxuICAgICAgbG9jYXRpb246IHsgY2l0eTogbnVsbCwgcmVnaW9uOiBudWxsLCBjb3VudHJ5OiBudWxsIH0sXG4gICAgICB0YXJnZXRNYXJrZXQ6IFwiZ2VuZXJhbFwiLFxuICAgICAgdW5pcXVlU2VsbGluZ1BvaW50czogW10sXG4gICAgICBidXNpbmVzc1R5cGU6IFwiYnVzaW5lc3NcIixcbiAgICB9XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gaWRlbnRpZnlDb21wZXRpdG9yc1dpdGhTZWFyY2goXG4gIHVybDogc3RyaW5nLFxuICBjb21wYW55UHJvZmlsZToge1xuICAgIGNvbXBhbnlOYW1lOiBzdHJpbmdcbiAgICBpbmR1c3RyeTogc3RyaW5nXG4gICAgc2VydmljZXM6IHN0cmluZ1tdXG4gICAgbG9jYXRpb246IHsgY2l0eTogc3RyaW5nIHwgbnVsbDsgcmVnaW9uOiBzdHJpbmcgfCBudWxsOyBjb3VudHJ5OiBzdHJpbmcgfCBudWxsIH1cbiAgICB0YXJnZXRNYXJrZXQ6IHN0cmluZ1xuICAgIHVuaXF1ZVNlbGxpbmdQb2ludHM6IHN0cmluZ1tdXG4gICAgYnVzaW5lc3NUeXBlOiBzdHJpbmdcbiAgfSxcbik6IFByb21pc2U8XG4gIEFycmF5PHtcbiAgICBuYW1lOiBzdHJpbmdcbiAgICB1cmw6IHN0cmluZ1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgICByZWFzb246IHN0cmluZ1xuICAgIGNvbXBldGl0b3JUeXBlOiBzdHJpbmdcbiAgfT5cbj4ge1xuICBjb25zdCBkb21haW4gPSBuZXcgVVJMKHVybCkuaG9zdG5hbWUucmVwbGFjZShcInd3dy5cIiwgXCJcIilcblxuICBjb25zdCBsb2NhdGlvblBhcnRzID0gW2NvbXBhbnlQcm9maWxlLmxvY2F0aW9uLmNpdHksIGNvbXBhbnlQcm9maWxlLmxvY2F0aW9uLnJlZ2lvbiwgY29tcGFueVByb2ZpbGUubG9jYXRpb24uY291bnRyeV1cbiAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgLmpvaW4oXCIsIFwiKVxuXG4gIGNvbnN0IHNlcnZpY2VzU3RyID0gY29tcGFueVByb2ZpbGUuc2VydmljZXMuc2xpY2UoMCwgNSkuam9pbihcIiwgXCIpIHx8IGNvbXBhbnlQcm9maWxlLmluZHVzdHJ5XG5cbiAgY29uc3Qgc2VhcmNoQ29udGV4dCA9IGBcbkNvbXBhbnkgUHJvZmlsZTpcbi0gTmFtZTogJHtjb21wYW55UHJvZmlsZS5jb21wYW55TmFtZX1cbi0gRG9tYWluOiAke2RvbWFpbn1cbi0gSW5kdXN0cnk6ICR7Y29tcGFueVByb2ZpbGUuaW5kdXN0cnl9XG4tIFNlcnZpY2VzOiAke3NlcnZpY2VzU3RyfVxuLSBMb2NhdGlvbjogJHtsb2NhdGlvblBhcnRzIHx8IFwiTm90IHNwZWNpZmllZFwifVxuLSBUYXJnZXQgTWFya2V0OiAke2NvbXBhbnlQcm9maWxlLnRhcmdldE1hcmtldH1cbi0gQnVzaW5lc3MgVHlwZTogJHtjb21wYW55UHJvZmlsZS5idXNpbmVzc1R5cGV9XG4tIFVuaXF1ZSBTZWxsaW5nIFBvaW50czogJHtjb21wYW55UHJvZmlsZS51bmlxdWVTZWxsaW5nUG9pbnRzLmpvaW4oXCIsIFwiKSB8fCBcIk5vdCBzcGVjaWZpZWRcIn1cbmBcblxuICBjb25zb2xlLmxvZyhcIlt2MF0gU3RhcnRpbmcgY29tcGV0aXRvciBzZWFyY2ggZm9yOlwiLCBkb21haW4pXG4gIGNvbnNvbGUubG9nKFwiW3YwXSBDb21wYW55IHByb2ZpbGU6XCIsIEpTT04uc3RyaW5naWZ5KGNvbXBhbnlQcm9maWxlLCBudWxsLCAyKSlcblxuICB0cnkge1xuICAgIGNvbnN0IHsgdGV4dCB9ID0gYXdhaXQgZ2VuZXJhdGVUZXh0KHtcbiAgICAgIG1vZGVsOiBcImdvb2dsZS9nZW1pbmktMi4wLWZsYXNoLTAwMVwiLFxuICAgICAgcHJvdmlkZXJPcHRpb25zOiB7XG4gICAgICAgIGdvb2dsZToge1xuICAgICAgICAgIHVzZVNlYXJjaEdyb3VuZGluZzogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBwcm9tcHQ6IGBGaW5kIGRpcmVjdCBjb21wZXRpdG9ycyBmb3IgdGhpcyBjb21wYW55LiBVc2Ugd2ViIHNlYXJjaCB0byBmaW5kIFJFQUwsIGN1cnJlbnRseSBhY3RpdmUgY29tcGV0aXRvcnMuXG5cbiR7c2VhcmNoQ29udGV4dH1cblxuQ09NUEVUSVRPUiBTRUFSQ0ggQ1JJVEVSSUE6XG4xLiBTQU1FIExPQ0FUSU9OOiBJZiB0aGlzIGlzIGEgbG9jYWwvcmVnaW9uYWwgYnVzaW5lc3MsIGZpbmQgY29tcGV0aXRvcnMgaW4gJHtsb2NhdGlvblBhcnRzIHx8IFwidGhlIHNhbWUgYXJlYVwifVxuMi4gU0FNRSBJTkRVU1RSWTogTXVzdCBiZSBpbiBcIiR7Y29tcGFueVByb2ZpbGUuaW5kdXN0cnl9XCIgb3IgY2xvc2VseSByZWxhdGVkIGZpZWxkXG4zLiBTQU1FIFNFUlZJQ0VTOiBPZmZlcmluZyBzaW1pbGFyIHNlcnZpY2VzOiAke3NlcnZpY2VzU3RyfVxuNC4gU0FNRSBUQVJHRVQgTUFSS0VUOiBUYXJnZXRpbmcgJHtjb21wYW55UHJvZmlsZS50YXJnZXRNYXJrZXR9IGN1c3RvbWVyc1xuNS4gU0lNSUxBUiBTSVpFOiBTaW1pbGFyIGJ1c2luZXNzIHR5cGUgKCR7Y29tcGFueVByb2ZpbGUuYnVzaW5lc3NUeXBlfSlcblxuRm9yIGVhY2ggY29tcGV0aXRvciwgaWRlbnRpZnk6XG4tIFRoZWlyIGV4YWN0IGJ1c2luZXNzIG5hbWUgYW5kIHdlYnNpdGUgVVJMXG4tIFdoYXQgc2VydmljZXMgdGhleSBvZmZlciB0aGF0IGNvbXBldGVcbi0gV2h5IHRoZXkgYXJlIGEgZGlyZWN0IGNvbXBldGl0b3IgKGJlIHNwZWNpZmljIGFib3V0IG92ZXJsYXApXG4tIENvbXBldGl0b3IgdHlwZTogXCJkaXJlY3RcIiAoc2FtZSBzZXJ2aWNlcywgc2FtZSBsb2NhdGlvbiksIFwiaW5kaXJlY3RcIiAocmVsYXRlZCBzZXJ2aWNlcyksIG9yIFwiYXNwaXJhdGlvbmFsXCIgKGxhcmdlciBwbGF5ZXIgaW4gc2FtZSBpbmR1c3RyeSlcblxuUmV0dXJuIE9OTFkgdmFsaWQgSlNPTiBhcnJheSB3aXRoIDMtNSBjb21wZXRpdG9yczpcbltcbiAge1xuICAgIFwibmFtZVwiOiBcIkNvbXBldGl0b3IgQ29tcGFueSBOYW1lXCIsXG4gICAgXCJ1cmxcIjogXCJodHRwczovL3RoZWlyLXdlYnNpdGUuY29tXCIsXG4gICAgXCJkZXNjcmlwdGlvblwiOiBcIldoYXQgdGhleSBkbyBhbmQgdGhlaXIgbWFpbiBzZXJ2aWNlc1wiLFxuICAgIFwicmVhc29uXCI6IFwiU3BlY2lmaWMgcmVhc29uIHdoeSB0aGV5IGNvbXBldGUgLSBtZW50aW9uIHNoYXJlZCBsb2NhdGlvbiwgc2VydmljZXMsIG9yIHRhcmdldCBtYXJrZXRcIixcbiAgICBcImNvbXBldGl0b3JUeXBlXCI6IFwiZGlyZWN0XCJcbiAgfVxuXVxuXG5JTVBPUlRBTlQ6XG4tIERvIE5PVCBpbmNsdWRlICR7ZG9tYWlufSBvciAke2NvbXBhbnlQcm9maWxlLmNvbXBhbnlOYW1lfVxuLSBPbmx5IGluY2x1ZGUgUkVBTCBjb21wYW5pZXMgd2l0aCB3b3JraW5nIHdlYnNpdGVzXG4tIFByaW9yaXRpemUgY29tcGV0aXRvcnMgaW4gJHtsb2NhdGlvblBhcnRzIHx8IFwidGhlIHNhbWUgZ2VvZ3JhcGhpYyBtYXJrZXRcIn0gZmlyc3Rcbi0gSWYgbG9jYWwgYnVzaW5lc3MsIGZvY3VzIG9uIExPQ0FMIGNvbXBldGl0b3JzYCxcbiAgICB9KVxuXG4gICAgY29uc29sZS5sb2coXCJbdjBdIEdlbWluaSBjb21wZXRpdG9yIHNlYXJjaCByYXcgcmVzcG9uc2U6XCIsIHRleHQ/LnN1YnN0cmluZygwLCA1MDApKVxuXG4gICAgbGV0IGNvbXBldGl0b3JzOiBBcnJheTx7XG4gICAgICBuYW1lOiBzdHJpbmdcbiAgICAgIHVybDogc3RyaW5nXG4gICAgICBkZXNjcmlwdGlvbjogc3RyaW5nXG4gICAgICByZWFzb246IHN0cmluZ1xuICAgICAgY29tcGV0aXRvclR5cGU6IHN0cmluZ1xuICAgIH0+ID0gW11cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHRleHQgfHwgXCJbXVwiKVxuICAgICAgY29tcGV0aXRvcnMgPSBBcnJheS5pc0FycmF5KHBhcnNlZCkgPyBwYXJzZWQgOiBwYXJzZWQuY29tcGV0aXRvcnMgfHwgW11cbiAgICAgIGNvbnNvbGUubG9nKFwiW3YwXSBQYXJzZWQgY29tcGV0aXRvcnMgY291bnQ6XCIsIGNvbXBldGl0b3JzLmxlbmd0aClcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcIlt2MF0gQ29tcGV0aXRvciBVUkxzOlwiLFxuICAgICAgICBjb21wZXRpdG9ycy5tYXAoKGMpID0+IGMudXJsKSxcbiAgICAgIClcbiAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlt2MF0gRmFpbGVkIHRvIHBhcnNlIGNvbXBldGl0b3IgSlNPTjpcIiwgcGFyc2VFcnJvcilcbiAgICAgIC8vIEZhbGxiYWNrIHRvIENsYXVkZSBpZiBHZW1pbmkgcGFyc2luZyBmYWlsc1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyB0ZXh0OiBjbGF1ZGVUZXh0IH0gPSBhd2FpdCBnZW5lcmF0ZVRleHQoe1xuICAgICAgICAgIG1vZGVsOiBcImFudGhyb3BpYy9jbGF1ZGUtc29ubmV0LTQtMjAyNTA1MTRcIixcbiAgICAgICAgICBwcm9tcHQ6IGBCYXNlZCBvbiB5b3VyIGtub3dsZWRnZSwgaWRlbnRpZnkgZGlyZWN0IGNvbXBldGl0b3JzIGZvciB0aGlzIGNvbXBhbnkuXG5cbiR7c2VhcmNoQ29udGV4dH1cblxuQ09NUEVUSVRPUiBTRUFSQ0ggQ1JJVEVSSUE6XG4xLiBTQU1FIExPQ0FUSU9OOiBJZiBsb2NhbC9yZWdpb25hbCBidXNpbmVzcyBpbiAke2xvY2F0aW9uUGFydHMgfHwgXCJ1bmtub3duIGxvY2F0aW9uXCJ9LCBmaW5kIGNvbXBldGl0b3JzIGluIHRoYXQgYXJlYVxuMi4gU0FNRSBJTkRVU1RSWTogTXVzdCBiZSBpbiBcIiR7Y29tcGFueVByb2ZpbGUuaW5kdXN0cnl9XCIgaW5kdXN0cnlcbjMuIFNBTUUgU0VSVklDRVM6IE9mZmVyaW5nIHNpbWlsYXI6ICR7c2VydmljZXNTdHJ9XG40LiBTQU1FIFRBUkdFVDogVGFyZ2V0aW5nICR7Y29tcGFueVByb2ZpbGUudGFyZ2V0TWFya2V0fSBtYXJrZXRcblxuRmluZCAzLTUgcmVhbCBjb21wZXRpdG9ycy4gRm9yIGxvY2FsIGJ1c2luZXNzZXMsIHByaW9yaXRpemUgbG9jYWwgY29tcGV0aXRvcnMuXG5cblJldHVybiBPTkxZIHZhbGlkIEpTT04gYXJyYXk6XG5bXG4gIHtcbiAgICBcIm5hbWVcIjogXCJDb21wZXRpdG9yIE5hbWVcIixcbiAgICBcInVybFwiOiBcImh0dHBzOi8vY29tcGV0aXRvci13ZWJzaXRlLmNvbVwiLFxuICAgIFwiZGVzY3JpcHRpb25cIjogXCJXaGF0IHRoZXkgZG9cIixcbiAgICBcInJlYXNvblwiOiBcIldoeSB0aGV5IGNvbXBldGUgLSBtZW50aW9uIHNoYXJlZCBsb2NhdGlvbi9zZXJ2aWNlcy9tYXJrZXRcIixcbiAgICBcImNvbXBldGl0b3JUeXBlXCI6IFwiZGlyZWN0XCJcbiAgfVxuXVxuXG5EbyBOT1QgaW5jbHVkZSAke2RvbWFpbn0uIE9ubHkgcmVhbCBjb21wYW5pZXMgd2l0aCBhY3R1YWwgd2Vic2l0ZXMuYCxcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBjbGVhbmVkID0gY2xhdWRlVGV4dC5yZXBsYWNlKC9gYGBqc29uXFxuP3xcXG4/YGBgL2csIFwiXCIpLnRyaW0oKVxuICAgICAgICBjb25zdCBqc29uTWF0Y2ggPSBjbGVhbmVkLm1hdGNoKC9cXFtbXFxzXFxTXSpcXF0vKVxuICAgICAgICBjb25zdCBwYXJzZWRDbGF1ZGUgPSBKU09OLnBhcnNlKGpzb25NYXRjaCA/IGpzb25NYXRjaFswXSA6IGNsZWFuZWQpXG4gICAgICAgIGNvbXBldGl0b3JzID0gQXJyYXkuaXNBcnJheShwYXJzZWRDbGF1ZGUpID8gcGFyc2VkQ2xhdWRlIDogW11cbiAgICAgICAgY29uc29sZS5sb2coXCJbdjBdIENsYXVkZSBmYWxsYmFjayBjb21wZXRpdG9ycyBjb3VudDpcIiwgY29tcGV0aXRvcnMubGVuZ3RoKVxuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBcIlt2MF0gQ2xhdWRlIGZhbGxiYWNrIGNvbXBldGl0b3IgVVJMczpcIixcbiAgICAgICAgICBjb21wZXRpdG9ycy5tYXAoKGMpID0+IGMudXJsKSxcbiAgICAgICAgKVxuICAgICAgfSBjYXRjaCAoY2xhdWRlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJbdjBdIENsYXVkZSBmYWxsYmFjayBmYWlsZWQ6XCIsIGNsYXVkZUVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBjbGF1ZGVFcnJvci5tZXNzYWdlIDogY2xhdWRlRXJyb3IpXG4gICAgICAgIHJldHVybiBbXSAvLyBSZXR1cm4gZW1wdHkgaWYgYm90aCBmYWlsXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbXBldGl0b3JzLnNsaWNlKDAsIDUpLm1hcCgoYykgPT4gKHtcbiAgICAgIG5hbWU6IGMubmFtZSB8fCBcIlVua25vd25cIixcbiAgICAgIHVybDogYy51cmwgfHwgXCJcIixcbiAgICAgIGRlc2NyaXB0aW9uOiBjLmRlc2NyaXB0aW9uIHx8IFwiXCIsXG4gICAgICByZWFzb246IGMucmVhc29uIHx8IFwiXCIsXG4gICAgICBjb21wZXRpdG9yVHlwZTogYy5jb21wZXRpdG9yVHlwZSB8fCBcImRpcmVjdFwiLFxuICAgIH0pKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKFwiW3YwXSBDb21wZXRpdG9yIHNlYXJjaCBlcnJvcjpcIiwgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBlcnJvcilcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBwcmVTY2FuQ29tcGV0aXRvcihcbiAgY29tcGV0aXRvclVybDogc3RyaW5nLFxuKTogUHJvbWlzZTx7IHVybDogc3RyaW5nOyBhcnRpZmFjdENvdW50OiBudW1iZXI7IHJlYWNoYWJsZTogYm9vbGVhbiB9PiB7XG4gIGNvbnN0IGJhc2VVcmwgPSBuZXcgVVJMKGNvbXBldGl0b3JVcmwpLm9yaWdpblxuICBsZXQgYXJ0aWZhY3RDb3VudCA9IDBcbiAgbGV0IHJlYWNoYWJsZSA9IGZhbHNlXG5cbiAgY29uc3QgY2hlY2tFbmRwb2ludHMgPSBbXG4gICAgeyBwYXRoOiBcIi9yb2JvdHMudHh0XCIsIHdlaWdodDogMSB9LFxuICAgIHsgcGF0aDogXCIvc2l0ZW1hcC54bWxcIiwgd2VpZ2h0OiAxIH0sXG4gICAgeyBwYXRoOiBcIi9sbG1zLnR4dFwiLCB3ZWlnaHQ6IDIgfSxcbiAgICB7IHBhdGg6IFwiLy53ZWxsLWtub3duL2FpLW1hbmlmZXN0Lmpzb25cIiwgd2VpZ2h0OiAyIH0sXG4gICAgeyBwYXRoOiBcIi9mZWVkXCIsIHdlaWdodDogMSB9LFxuICAgIHsgcGF0aDogXCIvcnNzXCIsIHdlaWdodDogMSB9LFxuICBdXG5cbiAgdHJ5IHtcbiAgICBjb25zdCBob21lUmVzdWx0ID0gYXdhaXQgc2lsZW50RmV0Y2goYmFzZVVybCwgNDAwMClcbiAgICByZWFjaGFibGUgPSBob21lUmVzdWx0Lm9rXG5cbiAgICBpZiAoIXJlYWNoYWJsZSkge1xuICAgICAgcmV0dXJuIHsgdXJsOiBjb21wZXRpdG9yVXJsLCBhcnRpZmFjdENvdW50OiAwLCByZWFjaGFibGU6IGZhbHNlIH1cbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKFxuICAgICAgY2hlY2tFbmRwb2ludHMubWFwKGFzeW5jICh7IHBhdGgsIHdlaWdodCB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpbGVudEZldGNoKGAke2Jhc2VVcmx9JHtwYXRofWAsIDI1MDApXG5cbiAgICAgICAgaWYgKCFyZXN1bHQub2spIHtcbiAgICAgICAgICByZXR1cm4gMFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhdGguaW5jbHVkZXMoXCIuanNvblwiKSkge1xuICAgICAgICAgIGlmICghcmVzdWx0LmNvbnRlbnRUeXBlLmluY2x1ZGVzKFwiYXBwbGljYXRpb24vanNvblwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIDBcbiAgICAgICAgICB9XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIEpTT04ucGFyc2UocmVzdWx0LnRleHQpXG4gICAgICAgICAgICByZXR1cm4gd2VpZ2h0XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICByZXR1cm4gMFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEF2b2lkIGNvdW50aW5nIEhUTUwgZXJyb3IgcGFnZXMgYXMgdmFsaWQgYXJ0aWZhY3RzXG4gICAgICAgIGlmICghcmVzdWx0LmNvbnRlbnRUeXBlLmluY2x1ZGVzKFwidGV4dC9odG1sXCIpIHx8IHBhdGguaW5jbHVkZXMoXCIudHh0XCIpKSB7XG4gICAgICAgICAgcmV0dXJuIHdlaWdodFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRm9yIHBhdGhzIHRoYXQgbWlnaHQgcmV0dXJuIEhUTUwgKGxpa2UgL2ZlZWQpLCBjaGVjayBjb250ZW50XG4gICAgICAgIGlmIChwYXRoID09PSBcIi9mZWVkXCIgfHwgcGF0aCA9PT0gXCIvcnNzXCIpIHtcbiAgICAgICAgICBpZiAocmVzdWx0LnRleHQuaW5jbHVkZXMoXCI8cnNzXCIpIHx8IHJlc3VsdC50ZXh0LmluY2x1ZGVzKFwiPGZlZWRcIikgfHwgcmVzdWx0LnRleHQuaW5jbHVkZXMoXCI8Y2hhbm5lbFwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHdlaWdodFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMFxuICAgICAgfSksXG4gICAgKVxuXG4gICAgYXJ0aWZhY3RDb3VudCA9IHJlc3VsdHMucmVkdWNlKChzdW0sIHJlc3VsdCkgPT4ge1xuICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZnVsZmlsbGVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHN1bSArIHJlc3VsdC52YWx1ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIHN1bVxuICAgIH0sIDApXG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiB7IHVybDogY29tcGV0aXRvclVybCwgYXJ0aWZhY3RDb3VudDogMCwgcmVhY2hhYmxlOiBmYWxzZSB9XG4gIH1cblxuICByZXR1cm4geyB1cmw6IGNvbXBldGl0b3JVcmwsIGFydGlmYWN0Q291bnQsIHJlYWNoYWJsZSB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNjYW5Db21wZXRpdG9yQXJ0aWZhY3RzKGNvbXBldGl0b3JVcmw6IHN0cmluZyk6IFByb21pc2U8e1xuICBqc29uTGRTY2hlbWE6IHsgc3RhdHVzOiBDaGVja1N0YXR1czsgdHlwZXM6IHN0cmluZ1tdIH1cbiAgcm9ib3RzVHh0OiB7IHN0YXR1czogQ2hlY2tTdGF0dXM7IGhhc0FpRGlyZWN0aXZlczogYm9vbGVhbiB9XG4gIHNpdGVtYXA6IHsgc3RhdHVzOiBDaGVja1N0YXR1czsgdXJsQ291bnQ6IG51bWJlciB9XG4gIHJzc0ZlZWQ6IHsgc3RhdHVzOiBDaGVja1N0YXR1cyB9XG4gIGxsbXNUeHQ6IHsgc3RhdHVzOiBDaGVja1N0YXR1cyB9XG4gIGFpTWFuaWZlc3Q6IHsgc3RhdHVzOiBDaGVja1N0YXR1cyB9XG4gIG1jcENvbmZpZzogeyBzdGF0dXM6IENoZWNrU3RhdHVzIH1cbiAgb3BlbkFwaTogeyBzdGF0dXM6IENoZWNrU3RhdHVzIH1cbiAgY3Jhd2xTdWNjZXNzOiBib29sZWFuXG59PiB7XG4gIGNvbnNvbGUubG9nKFwiW3YwXSBTY2FubmluZyBjb21wZXRpdG9yIGFydGlmYWN0cyBmb3I6XCIsIGNvbXBldGl0b3JVcmwpXG5cbiAgY29uc3QgZGVmYXVsdE5vdEZvdW5kID0ge1xuICAgIGpzb25MZFNjaGVtYTogeyBzdGF0dXM6IFwibm90X2ZvdW5kXCIgYXMgQ2hlY2tTdGF0dXMsIHR5cGVzOiBbXSB9LFxuICAgIHJvYm90c1R4dDogeyBzdGF0dXM6IFwibm90X2ZvdW5kXCIgYXMgQ2hlY2tTdGF0dXMsIGhhc0FpRGlyZWN0aXZlczogZmFsc2UgfSxcbiAgICBzaXRlbWFwOiB7IHN0YXR1czogXCJub3RfZm91bmRcIiBhcyBDaGVja1N0YXR1cywgdXJsQ291bnQ6IDAgfSxcbiAgICByc3NGZWVkOiB7IHN0YXR1czogXCJub3RfZm91bmRcIiBhcyBDaGVja1N0YXR1cyB9LFxuICAgIGxsbXNUeHQ6IHsgc3RhdHVzOiBcIm5vdF9mb3VuZFwiIGFzIENoZWNrU3RhdHVzIH0sXG4gICAgYWlNYW5pZmVzdDogeyBzdGF0dXM6IFwibm90X2ZvdW5kXCIgYXMgQ2hlY2tTdGF0dXMgfSxcbiAgICBtY3BDb25maWc6IHsgc3RhdHVzOiBcIm5vdF9mb3VuZFwiIGFzIENoZWNrU3RhdHVzIH0sXG4gICAgb3BlbkFwaTogeyBzdGF0dXM6IFwibm90X2ZvdW5kXCIgYXMgQ2hlY2tTdGF0dXMgfSxcbiAgICBjcmF3bFN1Y2Nlc3M6IGZhbHNlLFxuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBbcm9ib3RzUmVzdWx0LCBzaXRlbWFwUmVzdWx0LCBsbG1zUmVzdWx0LCBhaU1hbmlmZXN0UmVzdWx0LCBtY3BSZXN1bHQsIG9wZW5BcGlSZXN1bHRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgc2FmZUNoZWNrKCgpID0+IGNoZWNrUm9ib3RzVHh0KGNvbXBldGl0b3JVcmwpLCB7XG4gICAgICAgIHN0YXR1czogXCJub3RfZm91bmRcIiBhcyBDaGVja1N0YXR1cyxcbiAgICAgICAgY29udGVudDogXCJcIixcbiAgICAgICAgaGFzU2l0ZW1hcDogZmFsc2UsXG4gICAgICAgIGhhc0Rpc2FsbG93OiBmYWxzZSxcbiAgICAgICAgaGFzQWlEaXJlY3RpdmVzOiBmYWxzZSwgLy8gSW5pdGlhbGl6ZSBhaURpcmVjdGl2ZXNcbiAgICAgICAgYmxvY2tlZEJvdHM6IFtdLCAvLyBJbml0aWFsaXplIGJsb2NrZWRCb3RzXG4gICAgICAgIGFsbG93ZWRCb3RzOiBbXSwgLy8gSW5pdGlhbGl6ZSBhbGxvd2VkQm90c1xuICAgICAgfSksXG4gICAgICBzYWZlQ2hlY2soKCkgPT4gY2hlY2tTaXRlbWFwKGNvbXBldGl0b3JVcmwpLCB7XG4gICAgICAgIHN0YXR1czogXCJub3RfZm91bmRcIiBhcyBDaGVja1N0YXR1cyxcbiAgICAgICAgdXJsQ291bnQ6IDAsXG4gICAgICAgIHNpdGVtYXBVcmxzOiBbXSxcbiAgICAgIH0pLFxuICAgICAgc2FmZUNoZWNrKCgpID0+IGNoZWNrTGxtc1R4dChjb21wZXRpdG9yVXJsKSwge1xuICAgICAgICBzdGF0dXM6IFwibm90X2ZvdW5kXCIgYXMgQ2hlY2tTdGF0dXMsXG4gICAgICAgIGNvbnRlbnQ6IFwiXCIsXG4gICAgICAgIGhhc0luc3RydWN0aW9uczogZmFsc2UsXG4gICAgICB9KSxcbiAgICAgIHNhZmVDaGVjaygoKSA9PiBjaGVja0FpTWFuaWZlc3QoY29tcGV0aXRvclVybCksIHsgc3RhdHVzOiBcIm5vdF9mb3VuZFwiIGFzIENoZWNrU3RhdHVzLCBjb250ZW50OiBcIlwiIH0pLFxuICAgICAgc2FmZUNoZWNrKCgpID0+IGNoZWNrTWNwQ29uZmlnKGNvbXBldGl0b3JVcmwpLCB7IHN0YXR1czogXCJub3RfZm91bmRcIiBhcyBDaGVja1N0YXR1cywgY29udGVudDogXCJcIiB9KSxcbiAgICAgIHNhZmVDaGVjaygoKSA9PiBjaGVja09wZW5BcGkoY29tcGV0aXRvclVybCksIHsgc3RhdHVzOiBcIm5vdF9mb3VuZFwiIGFzIENoZWNrU3RhdHVzLCBjb250ZW50OiBcIlwiIH0pLFxuICAgIF0pXG5cbiAgICBjb25zb2xlLmxvZyhcIlt2MF0gQXJ0aWZhY3QgcmVzdWx0cyBmb3JcIiwgY29tcGV0aXRvclVybCwgXCI6XCIsIHtcbiAgICAgIHJvYm90czogcm9ib3RzUmVzdWx0LnN0YXR1cyxcbiAgICAgIHNpdGVtYXA6IHNpdGVtYXBSZXN1bHQuc3RhdHVzLFxuICAgICAgbGxtczogbGxtc1Jlc3VsdC5zdGF0dXMsXG4gICAgfSlcblxuICAgIGxldCByc3NTdGF0dXM6IENoZWNrU3RhdHVzID0gXCJub3RfZm91bmRcIlxuICAgIGxldCBqc29uTGRUeXBlczogc3RyaW5nW10gPSBbXVxuICAgIGxldCBodG1sRmV0Y2hTdWNjZXNzID0gZmFsc2VcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoV2l0aFJldHJ5KFxuICAgICAgICBjb21wZXRpdG9yVXJsLFxuICAgICAgICB7XG4gICAgICAgICAgcmVkaXJlY3Q6IFwiZm9sbG93XCIsXG4gICAgICAgICAgdGltZW91dDogNjAwMCxcbiAgICAgICAgfSxcbiAgICAgICAgMixcbiAgICAgICkgLy8gQWxsb3cgdXAgdG8gMiByZXRyaWVzIGZvciB0aGUgbWFpbiBwYWdlXG5cbiAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5vaykge1xuICAgICAgICBodG1sRmV0Y2hTdWNjZXNzID0gdHJ1ZVxuICAgICAgICBjb25zdCBodG1sQ29udGVudCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgICAgICBjb25zb2xlLmxvZyhcIlt2MF0gSFRNTCBmZXRjaCBzdWNjZXNzIGZvclwiLCBjb21wZXRpdG9yVXJsLCBcIi0gY29udGVudCBsZW5ndGg6XCIsIGh0bWxDb250ZW50Lmxlbmd0aClcbiAgICAgICAgY29uc3QganNvbkxkRGF0YSA9IGV4dHJhY3RKc29uTGRTY2hlbWFzKGh0bWxDb250ZW50KVxuICAgICAgICBqc29uTGRUeXBlcyA9IGpzb25MZERhdGEudHlwZXNcblxuICAgICAgICBjb25zdCByc3NSZXN1bHQgPSBhd2FpdCBzYWZlQ2hlY2soKCkgPT4gY2hlY2tSc3NGZWVkKGNvbXBldGl0b3JVcmwpLCB7XG4gICAgICAgICAgc3RhdHVzOiBcIm5vdF9mb3VuZFwiIGFzIENoZWNrU3RhdHVzLFxuICAgICAgICAgIGl0ZW1Db3VudDogMCxcbiAgICAgICAgfSlcbiAgICAgICAgcnNzU3RhdHVzID0gcnNzUmVzdWx0LnN0YXR1c1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJbdjBdIEhUTUwgZmV0Y2ggZmFpbGVkIGZvclwiLCBjb21wZXRpdG9yVXJsLCBcIi0gcmVzcG9uc2U6XCIsIHJlc3BvbnNlPy5zdGF0dXMpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoaHRtbEVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgXCJbdjBdIEhUTUwgZmV0Y2ggZXJyb3IgZm9yXCIsXG4gICAgICAgIGNvbXBldGl0b3JVcmwsXG4gICAgICAgIFwiOlwiLFxuICAgICAgICBodG1sRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGh0bWxFcnJvci5tZXNzYWdlIDogaHRtbEVycm9yLFxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IGFueUFydGlmYWN0Rm91bmQgPVxuICAgICAganNvbkxkVHlwZXMubGVuZ3RoID4gMCB8fFxuICAgICAgcm9ib3RzUmVzdWx0LnN0YXR1cyA9PT0gXCJmb3VuZFwiIHx8XG4gICAgICBzaXRlbWFwUmVzdWx0LnN0YXR1cyA9PT0gXCJmb3VuZFwiIHx8XG4gICAgICByc3NTdGF0dXMgPT09IFwiZm91bmRcIiB8fFxuICAgICAgbGxtc1Jlc3VsdC5zdGF0dXMgPT09IFwiZm91bmRcIiB8fFxuICAgICAgYWlNYW5pZmVzdFJlc3VsdC5zdGF0dXMgPT09IFwiZm91bmRcIiB8fFxuICAgICAgbWNwUmVzdWx0LnN0YXR1cyA9PT0gXCJmb3VuZFwiIHx8XG4gICAgICBvcGVuQXBpUmVzdWx0LnN0YXR1cyA9PT0gXCJmb3VuZFwiXG5cbiAgICBjb25zdCBjcmF3bFN1Y2Nlc3MgPSBhbnlBcnRpZmFjdEZvdW5kIHx8IGh0bWxGZXRjaFN1Y2Nlc3MgfHwgcm9ib3RzUmVzdWx0LnN0YXR1cyAhPT0gXCJjaGVja19mYWlsZWRcIlxuXG4gICAgY29uc29sZS5sb2coXCJbdjBdIENyYXdsIHN1Y2Nlc3MgZm9yXCIsIGNvbXBldGl0b3JVcmwsIFwiOlwiLCBjcmF3bFN1Y2Nlc3MsIFwiYW55QXJ0aWZhY3RGb3VuZDpcIiwgYW55QXJ0aWZhY3RGb3VuZClcblxuICAgIHJldHVybiB7XG4gICAgICBqc29uTGRTY2hlbWE6IHtcbiAgICAgICAgc3RhdHVzOiBqc29uTGRUeXBlcy5sZW5ndGggPiAwID8gXCJmb3VuZFwiIDogXCJub3RfZm91bmRcIixcbiAgICAgICAgdHlwZXM6IGpzb25MZFR5cGVzLFxuICAgICAgfSxcbiAgICAgIHJvYm90c1R4dDoge1xuICAgICAgICBzdGF0dXM6IHJvYm90c1Jlc3VsdC5zdGF0dXMsXG4gICAgICAgIGhhc0FpRGlyZWN0aXZlczogcm9ib3RzUmVzdWx0Lmhhc0FpRGlyZWN0aXZlcyxcbiAgICAgIH0sXG4gICAgICBzaXRlbWFwOiB7XG4gICAgICAgIHN0YXR1czogc2l0ZW1hcFJlc3VsdC5zdGF0dXMsXG4gICAgICAgIHVybENvdW50OiBzaXRlbWFwUmVzdWx0LnVybENvdW50LFxuICAgICAgfSxcbiAgICAgIHJzc0ZlZWQ6IHsgc3RhdHVzOiByc3NTdGF0dXMgfSxcbiAgICAgIGxsbXNUeHQ6IHsgc3RhdHVzOiBsbG1zUmVzdWx0LnN0YXR1cyB9LFxuICAgICAgYWlNYW5pZmVzdDogeyBzdGF0dXM6IGFpTWFuaWZlc3RSZXN1bHQuc3RhdHVzIH0sXG4gICAgICBtY3BDb25maWc6IHsgc3RhdHVzOiBtY3BSZXN1bHQuc3RhdHVzIH0sXG4gICAgICBvcGVuQXBpOiB7IHN0YXR1czogb3BlbkFwaVJlc3VsdC5zdGF0dXMgfSxcbiAgICAgIGNyYXdsU3VjY2VzcyxcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBcIlt2MF0gc2NhbkNvbXBldGl0b3JBcnRpZmFjdHMgZXJyb3IgZm9yXCIsXG4gICAgICBjb21wZXRpdG9yVXJsLFxuICAgICAgXCI6XCIsXG4gICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IGVycm9yLFxuICAgIClcbiAgICByZXR1cm4gZGVmYXVsdE5vdEZvdW5kXG4gIH1cbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlU2NvcmUoYXJ0aWZhY3RDaGVja3M6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LCBhaUFuYWx5c2lzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGwpOiBudW1iZXIge1xuICBsZXQgc2NvcmUgPSAwXG4gIGNvbnN0IG1heFNjb3JlID0gMTAwXG5cbiAgY29uc3QganNvbkxkID0gYXJ0aWZhY3RDaGVja3MuanNvbkxkU2NoZW1hIGFzIHsgc3RhdHVzPzogc3RyaW5nOyB0eXBlcz86IHN0cmluZ1tdIH0gfCB1bmRlZmluZWRcbiAgaWYgKGpzb25MZD8uc3RhdHVzID09PSBcImZvdW5kXCIpIHtcbiAgICBjb25zdCB0eXBlcyA9IGpzb25MZC50eXBlcyB8fCBbXVxuICAgIHNjb3JlICs9IE1hdGgubWluKDIwLCA1ICsgdHlwZXMubGVuZ3RoICogMylcbiAgfVxuXG4gIGNvbnN0IHJvYm90cyA9IGFydGlmYWN0Q2hlY2tzLnJvYm90c1R4dCBhcyB7IHN0YXR1cz86IHN0cmluZzsgaGFzQWlEaXJlY3RpdmVzPzogYm9vbGVhbiB9IHwgdW5kZWZpbmVkXG4gIGlmIChyb2JvdHM/LnN0YXR1cyA9PT0gXCJmb3VuZFwiKSB7XG4gICAgc2NvcmUgKz0gNVxuICAgIGlmIChyb2JvdHMuaGFzQWlEaXJlY3RpdmVzKSBzY29yZSArPSA1XG4gIH1cblxuICBjb25zdCBzaXRlbWFwID0gYXJ0aWZhY3RDaGVja3Muc2l0ZW1hcCBhcyB7IHN0YXR1cz86IHN0cmluZzsgdXJsQ291bnQ/OiBudW1iZXIgfSB8IHVuZGVmaW5lZFxuICBpZiAoc2l0ZW1hcD8uc3RhdHVzID09PSBcImZvdW5kXCIpIHtcbiAgICBzY29yZSArPSA1XG4gICAgaWYgKChzaXRlbWFwLnVybENvdW50IHx8IDApID4gMTApIHNjb3JlICs9IDVcbiAgfVxuXG4gIGNvbnN0IHJzcyA9IGFydGlmYWN0Q2hlY2tzLnJzc0ZlZWQgYXMgeyBzdGF0dXM/OiBzdHJpbmcgfSB8IHVuZGVmaW5lZFxuICBpZiAocnNzPy5zdGF0dXMgPT09IFwiZm91bmRcIikge1xuICAgIHNjb3JlICs9IDVcbiAgfVxuXG4gIGNvbnN0IGxsbXMgPSBhcnRpZmFjdENoZWNrcy5sbG1zVHh0IGFzIHsgc3RhdHVzPzogc3RyaW5nIH0gfCB1bmRlZmluZWRcbiAgaWYgKGxsbXM/LnN0YXR1cyA9PT0gXCJmb3VuZFwiKSB7XG4gICAgc2NvcmUgKz0gMTVcbiAgfVxuXG4gIGNvbnN0IGFpTWFuaWZlc3QgPSBhcnRpZmFjdENoZWNrcy5haU1hbmlmZXN0IGFzIHsgc3RhdHVzPzogc3RyaW5nIH0gfCB1bmRlZmluZWRcbiAgaWYgKGFpTWFuaWZlc3Q/LnN0YXR1cyA9PT0gXCJmb3VuZFwiKSB7XG4gICAgc2NvcmUgKz0gMTBcbiAgfVxuXG4gIGNvbnN0IG1jcCA9IGFydGlmYWN0Q2hlY2tzLm1jcENvbmZpZyBhcyB7IHN0YXR1cz86IHN0cmluZyB9IHwgdW5kZWZpbmVkXG4gIGlmIChtY3A/LnN0YXR1cyA9PT0gXCJmb3VuZFwiKSB7XG4gICAgc2NvcmUgKz0gMTBcbiAgfVxuXG4gIGNvbnN0IG9wZW5BcGkgPSBhcnRpZmFjdENoZWNrcy5vcGVuQXBpIGFzIHsgc3RhdHVzPzogc3RyaW5nIH0gfCB1bmRlZmluZWRcbiAgaWYgKG9wZW5BcGk/LnN0YXR1cyA9PT0gXCJmb3VuZFwiKSB7XG4gICAgc2NvcmUgKz0gMTBcbiAgfVxuXG4gIGNvbnN0IGFuYWx5c2lzID0gYWlBbmFseXNpcyBhcyB7IGNvbnRlbnRHYXA/OiB7IGNvbnRlbnRTY29yZT86IG51bWJlciB9IH0gfCBudWxsXG4gIGlmIChhbmFseXNpcz8uY29udGVudEdhcD8uY29udGVudFNjb3JlKSB7XG4gICAgc2NvcmUgKz0gTWF0aC5yb3VuZChhbmFseXNpcy5jb250ZW50R2FwLmNvbnRlbnRTY29yZSAvIDEwKVxuICB9XG5cbiAgcmV0dXJuIE1hdGgubWluKG1heFNjb3JlLCBzY29yZSlcbn1cblxuY29uc3QgS05PV05fQkVOQ0hNQVJLX1NJVEVTID0gW1xuICB7XG4gICAgdXJsOiBcImh0dHBzOi8vc3RyaXBlLmNvbVwiLFxuICAgIG5hbWU6IFwiU3RyaXBlXCIsXG4gICAgZGVzY3JpcHRpb246IFwiUGF5bWVudCBwcm9jZXNzaW5nIHBsYXRmb3JtIHdpdGggZXhjZWxsZW50IHRlY2huaWNhbCBTRU8gYW5kIEFJIHJlYWRpbmVzc1wiLFxuICAgIHJlYXNvbjogXCJJbmR1c3RyeSBsZWFkZXIgaW4gZGV2ZWxvcGVyIGV4cGVyaWVuY2UgYW5kIHRlY2huaWNhbCBkb2N1bWVudGF0aW9uXCIsXG4gIH0sXG4gIHtcbiAgICB1cmw6IFwiaHR0cHM6Ly92ZXJjZWwuY29tXCIsXG4gICAgbmFtZTogXCJWZXJjZWxcIixcbiAgICBkZXNjcmlwdGlvbjogXCJDbG91ZCBwbGF0Zm9ybSBmb3IgZnJvbnRlbmQgZGV2ZWxvcGVycyB3aXRoIHN0cm9uZyBBSSBvcHRpbWl6YXRpb25cIixcbiAgICByZWFzb246IFwiS25vd24gZm9yIGV4Y2VsbGVudCBzdHJ1Y3R1cmVkIGRhdGEgYW5kIG1vZGVybiB3ZWIgcHJhY3RpY2VzXCIsXG4gIH0sXG4gIHtcbiAgICB1cmw6IFwiaHR0cHM6Ly9naXRodWIuY29tXCIsXG4gICAgbmFtZTogXCJHaXRIdWJcIixcbiAgICBkZXNjcmlwdGlvbjogXCJDb2RlIGhvc3RpbmcgcGxhdGZvcm0gd2l0aCBjb21wcmVoZW5zaXZlIHRlY2huaWNhbCBhcnRpZmFjdHNcIixcbiAgICByZWFzb246IFwiSW5kdXN0cnkgc3RhbmRhcmQgZm9yIGRldmVsb3BlciB0b29scyB3aXRoIGV4dGVuc2l2ZSBzY2hlbWEgbWFya3VwXCIsXG4gIH0sXG5dXG5cbmFzeW5jIGZ1bmN0aW9uIGdldEJlbmNobWFya0NvbXBldGl0b3IoKTogUHJvbWlzZTx7XG4gIG5hbWU6IHN0cmluZ1xuICB1cmw6IHN0cmluZ1xuICBkZXNjcmlwdGlvbjogc3RyaW5nXG4gIHJlYXNvbjogc3RyaW5nXG4gIGFydGlmYWN0Q2hlY2tzOiBBd2FpdGVkPFJldHVyblR5cGU8dHlwZW9mIHNjYW5Db21wZXRpdG9yQXJ0aWZhY3RzPj5cbiAgc2NvcmU6IG51bWJlclxuICBpc0JlbmNobWFyazogdHJ1ZVxuICBjcmF3bGVkU3VjY2Vzc2Z1bGx5OiBib29sZWFuXG4gIGFydGlmYWN0c0ZvdW5kQ291bnQ6IG51bWJlclxuICBhcnRpZmFjdHNGb3VuZFBlcmNlbnRhZ2U6IG51bWJlclxufSB8IG51bGw+IHtcbiAgLy8gVHJ5IGVhY2gga25vd24gYmVuY2htYXJrIHNpdGUgdW50aWwgd2UgZmluZCBvbmUgdGhhdCB3b3Jrc1xuICBmb3IgKGNvbnN0IHNpdGUgb2YgS05PV05fQkVOQ0hNQVJLX1NJVEVTKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGFydGlmYWN0cyA9IGF3YWl0IHNjYW5Db21wZXRpdG9yQXJ0aWZhY3RzKHNpdGUudXJsKVxuXG4gICAgICBpZiAoIWFydGlmYWN0cy5jcmF3bFN1Y2Nlc3MpIGNvbnRpbnVlXG5cbiAgICAgIGNvbnN0IGZvdW5kQ291bnQgPSBbXG4gICAgICAgIGFydGlmYWN0cy5qc29uTGRTY2hlbWEuc3RhdHVzID09PSBcImZvdW5kXCIsXG4gICAgICAgIGFydGlmYWN0cy5yb2JvdHNUeHQuc3RhdHVzID09PSBcImZvdW5kXCIsXG4gICAgICAgIGFydGlmYWN0cy5zaXRlbWFwLnN0YXR1cyA9PT0gXCJmb3VuZFwiLFxuICAgICAgICBhcnRpZmFjdHMucnNzRmVlZC5zdGF0dXMgPT09IFwiZm91bmRcIixcbiAgICAgICAgYXJ0aWZhY3RzLmxsbXNUeHQuc3RhdHVzID09PSBcImZvdW5kXCIsXG4gICAgICAgIGFydGlmYWN0cy5haU1hbmlmZXN0LnN0YXR1cyA9PT0gXCJmb3VuZFwiLFxuICAgICAgICBhcnRpZmFjdHMubWNwQ29uZmlnLnN0YXR1cyA9PT0gXCJmb3VuZFwiLFxuICAgICAgICBhcnRpZmFjdHMub3BlbkFwaS5zdGF0dXMgPT09IFwiZm91bmRcIixcbiAgICAgIF0uZmlsdGVyKEJvb2xlYW4pLmxlbmd0aFxuXG4gICAgICAvLyBPbmx5IHVzZSBpZiBhdCBsZWFzdCA0IGFydGlmYWN0cyBhcmUgZm91bmQgKDUwJSlcbiAgICAgIGlmIChmb3VuZENvdW50ID49IDQpIHtcbiAgICAgICAgY29uc3Qgc2NvcmUgPSBjYWxjdWxhdGVTY29yZShhcnRpZmFjdHMgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiwgbnVsbClcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBuYW1lOiBzaXRlLm5hbWUsXG4gICAgICAgICAgdXJsOiBzaXRlLnVybCxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogc2l0ZS5kZXNjcmlwdGlvbixcbiAgICAgICAgICByZWFzb246IHNpdGUucmVhc29uLFxuICAgICAgICAgIGFydGlmYWN0Q2hlY2tzOiBhcnRpZmFjdHMsXG4gICAgICAgICAgc2NvcmUsXG4gICAgICAgICAgaXNCZW5jaG1hcms6IHRydWUsXG4gICAgICAgICAgY3Jhd2xlZFN1Y2Nlc3NmdWxseTogdHJ1ZSxcbiAgICAgICAgICBhcnRpZmFjdHNGb3VuZENvdW50OiBmb3VuZENvdW50LFxuICAgICAgICAgIGFydGlmYWN0c0ZvdW5kUGVyY2VudGFnZTogTWF0aC5yb3VuZCgoZm91bmRDb3VudCAvIDgpICogMTAwKSxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gVHJ5IG5leHQgYmVuY2htYXJrIHNpdGVcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gICAgY29uc3QgdXJsID0gdmFsaWRhdGVVcmwoYm9keS51cmwpXG4gICAgY29uc3QgYmFzZVVybCA9IG5ldyBVUkwodXJsKS5vcmlnaW5cblxuICAgIGNvbnN0IGNyYXdsUmVzdWx0ID0gYXdhaXQgY3Jhd2xXaXRoRmlyZWNyYXdsKHVybClcblxuICAgIGlmIChjcmF3bFJlc3VsdC5zdGF0dXMgPT09IFwiY2hlY2tfZmFpbGVkXCIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBjcmF3bFJlc3VsdC5lcnJvciB8fCBcIkZhaWxlZCB0byBjcmF3bCB3ZWJzaXRlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfSxcbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBbcm9ib3RzUmVzdWx0LCBzaXRlbWFwUmVzdWx0LCByc3NSZXN1bHQsIGxsbXNSZXN1bHQsIGFpTWFuaWZlc3RSZXN1bHQsIG1jcFJlc3VsdCwgb3BlbkFwaVJlc3VsdF0gPVxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBjaGVja1JvYm90c1R4dChiYXNlVXJsKSxcbiAgICAgICAgY2hlY2tTaXRlbWFwKGJhc2VVcmwpLFxuICAgICAgICBjaGVja1Jzc0ZlZWQoYmFzZVVybCksXG4gICAgICAgIGNoZWNrTGxtc1R4dChiYXNlVXJsKSxcbiAgICAgICAgY2hlY2tBaU1hbmlmZXN0KGJhc2VVcmwpLFxuICAgICAgICBjaGVja01jcENvbmZpZyhiYXNlVXJsKSxcbiAgICAgICAgY2hlY2tPcGVuQXBpKGJhc2VVcmwpLFxuICAgICAgXSlcblxuICAgIGNvbnN0IGpzb25MZERhdGEgPSBleHRyYWN0SnNvbkxkU2NoZW1hcyhjcmF3bFJlc3VsdC5odG1sKVxuICAgIGNvbnN0IG1ldGFUYWdzID0gZXh0cmFjdE1ldGFUYWdzKGNyYXdsUmVzdWx0Lmh0bWwpXG4gICAgY29uc3QgaGVhZGluZ3MgPSBleHRyYWN0SGVhZGluZ3MoY3Jhd2xSZXN1bHQuaHRtbClcblxuICAgIGNvbnN0IGFpQW5hbHlzaXMgPSBhd2FpdCBhbmFseXplQ29udGVudFdpdGhBSSh1cmwsIGNyYXdsUmVzdWx0Lmh0bWwsIGNyYXdsUmVzdWx0Lm1hcmtkb3duLCBjcmF3bFJlc3VsdC5tZXRhZGF0YSlcblxuICAgIGNvbnN0IGNvbXBhbnlQcm9maWxlID0gYXdhaXQgYnVpbGRDb21wYW55UHJvZmlsZShcbiAgICAgIHVybCxcbiAgICAgIGNyYXdsUmVzdWx0Lmh0bWwsXG4gICAgICBjcmF3bFJlc3VsdC5tYXJrZG93bixcbiAgICAgIGNyYXdsUmVzdWx0Lm1ldGFkYXRhLFxuICAgICAgYWlBbmFseXNpcy5uYXBEYXRhLFxuICAgICAgYWlBbmFseXNpcy50b3BpY1JlY29nbml0aW9uLFxuICAgIClcblxuICAgIGNvbnN0IGNvbXBldGl0b3JzTGlzdCA9IGF3YWl0IGlkZW50aWZ5Q29tcGV0aXRvcnNXaXRoU2VhcmNoKHVybCwgY29tcGFueVByb2ZpbGUpXG5cbiAgICBjb25zdCBwcmVTY2FuUmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKGNvbXBldGl0b3JzTGlzdC5tYXAoKGNvbXApID0+IHByZVNjYW5Db21wZXRpdG9yKGNvbXAudXJsKSkpXG5cbiAgICBjb25zdCBzb3J0ZWRDb21wZXRpdG9ycyA9IGNvbXBldGl0b3JzTGlzdFxuICAgICAgLm1hcCgoY29tcCwgaW5kZXgpID0+ICh7XG4gICAgICAgIC4uLmNvbXAsXG4gICAgICAgIHByZVNjYW46IHByZVNjYW5SZXN1bHRzW2luZGV4XSxcbiAgICAgIH0pKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgaWYgKGEucHJlU2Nhbi5yZWFjaGFibGUgIT09IGIucHJlU2Nhbi5yZWFjaGFibGUpIHtcbiAgICAgICAgICByZXR1cm4gYS5wcmVTY2FuLnJlYWNoYWJsZSA/IC0xIDogMVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiLnByZVNjYW4uYXJ0aWZhY3RDb3VudCAtIGEucHJlU2Nhbi5hcnRpZmFjdENvdW50XG4gICAgICB9KVxuXG4gICAgY29uc3QgY29tcGV0aXRvclJlc3VsdHNXaXRoU3RhdHM6IEFycmF5PENvbXBldGl0b3JTY2FuUmVzdWx0ICYgeyBmb3VuZENvdW50OiBudW1iZXI7IGZvdW5kUGVyY2VudGFnZTogbnVtYmVyIH0+ID1cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBzb3J0ZWRDb21wZXRpdG9ycy5tYXAoYXN5bmMgKGNvbXApID0+IHtcbiAgICAgICAgICBjb25zdCBhcnRpZmFjdHMgPSBhd2FpdCBzY2FuQ29tcGV0aXRvckFydGlmYWN0cyhjb21wLnVybClcbiAgICAgICAgICBjb25zdCBjb21wU2NvcmUgPSBjYWxjdWxhdGVTY29yZShhcnRpZmFjdHMgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiwgbnVsbClcblxuICAgICAgICAgIGNvbnN0IGFkdmFudGFnZXM6IHN0cmluZ1tdID0gW11cbiAgICAgICAgICBpZiAoYXJ0aWZhY3RzLmpzb25MZFNjaGVtYS5zdGF0dXMgPT09IFwiZm91bmRcIiAmJiBqc29uTGREYXRhLnR5cGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgYWR2YW50YWdlcy5wdXNoKGBIYXMgc3RydWN0dXJlZCBkYXRhICgke2FydGlmYWN0cy5qc29uTGRTY2hlbWEudHlwZXMuam9pbihcIiwgXCIpfSlgKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYXJ0aWZhY3RzLmxsbXNUeHQuc3RhdHVzID09PSBcImZvdW5kXCIgJiYgbGxtc1Jlc3VsdC5zdGF0dXMgIT09IFwiZm91bmRcIikge1xuICAgICAgICAgICAgYWR2YW50YWdlcy5wdXNoKFwiSGFzIGxsbXMudHh0IGZvciBBSSBpbnN0cnVjdGlvbnNcIilcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGFydGlmYWN0cy5zaXRlbWFwLnN0YXR1cyA9PT0gXCJmb3VuZFwiICYmIHNpdGVtYXBSZXN1bHQuc3RhdHVzICE9PSBcImZvdW5kXCIpIHtcbiAgICAgICAgICAgIGFkdmFudGFnZXMucHVzaChcIkhhcyBYTUwgc2l0ZW1hcFwiKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYXJ0aWZhY3RzLnJzc0ZlZWQuc3RhdHVzID09PSBcImZvdW5kXCIgJiYgcnNzUmVzdWx0LnN0YXR1cyAhPT0gXCJmb3VuZFwiKSB7XG4gICAgICAgICAgICBhZHZhbnRhZ2VzLnB1c2goXCJIYXMgUlNTIGZlZWRcIilcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGFydGlmYWN0cy5vcGVuQXBpLnN0YXR1cyA9PT0gXCJmb3VuZFwiICYmIG9wZW5BcGlSZXN1bHQuc3RhdHVzICE9PSBcImZvdW5kXCIpIHtcbiAgICAgICAgICAgIGFkdmFudGFnZXMucHVzaChcIkhhcyBPcGVuQVBJIHNwZWNpZmljYXRpb25cIilcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBmb3VuZENvdW50ID0gW1xuICAgICAgICAgICAgYXJ0aWZhY3RzLmpzb25MZFNjaGVtYS5zdGF0dXMgPT09IFwiZm91bmRcIixcbiAgICAgICAgICAgIGFydGlmYWN0cy5yb2JvdHNUeHQuc3RhdHVzID09PSBcImZvdW5kXCIsXG4gICAgICAgICAgICBhcnRpZmFjdHMuc2l0ZW1hcC5zdGF0dXMgPT09IFwiZm91bmRcIixcbiAgICAgICAgICAgIGFydGlmYWN0cy5yc3NGZWVkLnN0YXR1cyA9PT0gXCJmb3VuZFwiLFxuICAgICAgICAgICAgYXJ0aWZhY3RzLmxsbXNUeHQuc3RhdHVzID09PSBcImZvdW5kXCIsXG4gICAgICAgICAgICBhcnRpZmFjdHMuYWlNYW5pZmVzdC5zdGF0dXMgPT09IFwiZm91bmRcIixcbiAgICAgICAgICAgIGFydGlmYWN0cy5tY3BDb25maWcuc3RhdHVzID09PSBcImZvdW5kXCIsXG4gICAgICAgICAgICBhcnRpZmFjdHMub3BlbkFwaS5zdGF0dXMgPT09IFwiZm91bmRcIixcbiAgICAgICAgICBdLmZpbHRlcihCb29sZWFuKS5sZW5ndGhcblxuICAgICAgICAgIGNvbnN0IHRvdGFsQ2hlY2tzID0gOFxuICAgICAgICAgIGNvbnN0IGZvdW5kUGVyY2VudGFnZSA9IGZvdW5kQ291bnQgLyB0b3RhbENoZWNrc1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IGNvbXAubmFtZSxcbiAgICAgICAgICAgIHVybDogY29tcC51cmwsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogY29tcC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHJlYXNvbjogY29tcC5yZWFzb24sXG4gICAgICAgICAgICBzY29yZTogY29tcFNjb3JlLFxuICAgICAgICAgICAgYXJ0aWZhY3RDaGVja3M6IGFydGlmYWN0cyxcbiAgICAgICAgICAgIGFkdmFudGFnZXMsXG4gICAgICAgICAgICBjcmF3bGVkU3VjY2Vzc2Z1bGx5OiBhcnRpZmFjdHMuY3Jhd2xTdWNjZXNzLFxuICAgICAgICAgICAgZm91bmRDb3VudCxcbiAgICAgICAgICAgIGZvdW5kUGVyY2VudGFnZSxcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgKVxuXG4gICAgY29uc3QgYmVuY2htYXJrVGhyZXNob2xkID0gMC42XG5cbiAgICBjb25zdCBiZW5jaG1hcmtDYW5kaWRhdGUgPSBjb21wZXRpdG9yUmVzdWx0c1dpdGhTdGF0c1xuICAgICAgLmZpbHRlcigoYykgPT4gYy5jcmF3bGVkU3VjY2Vzc2Z1bGx5ICYmIGMuZm91bmRQZXJjZW50YWdlID49IGJlbmNobWFya1RocmVzaG9sZClcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmZvdW5kQ291bnQgLSBhLmZvdW5kQ291bnQpWzBdXG5cbiAgICBsZXQga25vd25CZW5jaG1hcms6IEF3YWl0ZWQ8UmV0dXJuVHlwZTx0eXBlb2YgZ2V0QmVuY2htYXJrQ29tcGV0aXRvcj4+ID0gbnVsbFxuICAgIGlmICghYmVuY2htYXJrQ2FuZGlkYXRlIHx8IGJlbmNobWFya0NhbmRpZGF0ZS5mb3VuZENvdW50IDwgNCkge1xuICAgICAga25vd25CZW5jaG1hcmsgPSBhd2FpdCBnZXRCZW5jaG1hcmtDb21wZXRpdG9yKClcbiAgICB9XG5cbiAgICBjb25zdCBmaW5hbENvbXBldGl0b3JSZXN1bHRzOiBDb21wZXRpdG9yU2NhblJlc3VsdFtdID0gY29tcGV0aXRvclJlc3VsdHNXaXRoU3RhdHMubWFwKChjb21wKSA9PiAoe1xuICAgICAgbmFtZTogY29tcC5uYW1lLFxuICAgICAgdXJsOiBjb21wLnVybCxcbiAgICAgIGRlc2NyaXB0aW9uOiBjb21wLmRlc2NyaXB0aW9uLFxuICAgICAgcmVhc29uOiBjb21wLnJlYXNvbixcbiAgICAgIHNjb3JlOiBjb21wLnNjb3JlLFxuICAgICAgYXJ0aWZhY3RDaGVja3M6IGNvbXAuYXJ0aWZhY3RDaGVja3MsXG4gICAgICBhZHZhbnRhZ2VzOiBjb21wLmFkdmFudGFnZXMsXG4gICAgICBjcmF3bGVkU3VjY2Vzc2Z1bGx5OiBjb21wLmNyYXdsZWRTdWNjZXNzZnVsbHksXG4gICAgICBpc0JlbmNobWFyazogIWtub3duQmVuY2htYXJrICYmIGJlbmNobWFya0NhbmRpZGF0ZT8udXJsID09PSBjb21wLnVybCxcbiAgICAgIGFydGlmYWN0c0ZvdW5kQ291bnQ6IGNvbXAuZm91bmRDb3VudCxcbiAgICAgIGFydGlmYWN0c0ZvdW5kUGVyY2VudGFnZTogTWF0aC5yb3VuZChjb21wLmZvdW5kUGVyY2VudGFnZSAqIDEwMCksXG4gICAgfSkpXG5cbiAgICBpZiAoa25vd25CZW5jaG1hcmspIHtcbiAgICAgIGZpbmFsQ29tcGV0aXRvclJlc3VsdHMudW5zaGlmdCh7XG4gICAgICAgIG5hbWU6IGtub3duQmVuY2htYXJrLm5hbWUsXG4gICAgICAgIHVybDoga25vd25CZW5jaG1hcmsudXJsLFxuICAgICAgICBkZXNjcmlwdGlvbjoga25vd25CZW5jaG1hcmsuZGVzY3JpcHRpb24sXG4gICAgICAgIHJlYXNvbjoga25vd25CZW5jaG1hcmsucmVhc29uLFxuICAgICAgICBzY29yZToga25vd25CZW5jaG1hcmsuc2NvcmUsXG4gICAgICAgIGFydGlmYWN0Q2hlY2tzOiBrbm93bkJlbmNobWFyay5hcnRpZmFjdENoZWNrcyxcbiAgICAgICAgYWR2YW50YWdlczogW1wiUmVmZXJlbmNlIGJlbmNobWFyayBkZW1vbnN0cmF0aW5nIEFJLXJlYWR5IGFydGlmYWN0c1wiXSxcbiAgICAgICAgY3Jhd2xlZFN1Y2Nlc3NmdWxseTogdHJ1ZSxcbiAgICAgICAgaXNCZW5jaG1hcms6IHRydWUsXG4gICAgICAgIGFydGlmYWN0c0ZvdW5kQ291bnQ6IGtub3duQmVuY2htYXJrLmFydGlmYWN0c0ZvdW5kQ291bnQsXG4gICAgICAgIGFydGlmYWN0c0ZvdW5kUGVyY2VudGFnZToga25vd25CZW5jaG1hcmsuYXJ0aWZhY3RzRm91bmRQZXJjZW50YWdlLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBjb25zdCBhcnRpZmFjdENoZWNrcyA9IHtcbiAgICAgIGpzb25MZFNjaGVtYToge1xuICAgICAgICBzdGF0dXM6IGpzb25MZERhdGEudHlwZXMubGVuZ3RoID4gMCA/IChcImZvdW5kXCIgYXMgQ2hlY2tTdGF0dXMpIDogKFwibm90X2ZvdW5kXCIgYXMgQ2hlY2tTdGF0dXMpLFxuICAgICAgICB0eXBlczoganNvbkxkRGF0YS50eXBlcyxcbiAgICAgICAgc2NoZW1hczoganNvbkxkRGF0YS5zY2hlbWFzLFxuICAgICAgfSxcbiAgICAgIHJvYm90c1R4dDoge1xuICAgICAgICBzdGF0dXM6IHJvYm90c1Jlc3VsdC5zdGF0dXMsXG4gICAgICAgIGNvbnRlbnQ6IHJvYm90c1Jlc3VsdC5jb250ZW50LFxuICAgICAgICBoYXNBaURpcmVjdGl2ZXM6IHJvYm90c1Jlc3VsdC5oYXNBaURpcmVjdGl2ZXMsXG4gICAgICAgIGJsb2NrZWRCb3RzOiByb2JvdHNSZXN1bHQuYmxvY2tlZEJvdHMsXG4gICAgICAgIGFsbG93ZWRCb3RzOiByb2JvdHNSZXN1bHQuYWxsb3dlZEJvdHMsXG4gICAgICAgIGVycm9yOiByb2JvdHNSZXN1bHQuZXJyb3IsXG4gICAgICB9LFxuICAgICAgc2l0ZW1hcDoge1xuICAgICAgICBzdGF0dXM6IHNpdGVtYXBSZXN1bHQuc3RhdHVzLFxuICAgICAgICB1cmw6IHNpdGVtYXBSZXN1bHQudXJsLFxuICAgICAgICB1cmxDb3VudDogc2l0ZW1hcFJlc3VsdC51cmxDb3VudCxcbiAgICAgICAgZXJyb3I6IHNpdGVtYXBSZXN1bHQuZXJyb3IsXG4gICAgICB9LFxuICAgICAgcnNzRmVlZDoge1xuICAgICAgICBzdGF0dXM6IHJzc1Jlc3VsdC5zdGF0dXMsXG4gICAgICAgIHVybDogcnNzUmVzdWx0LmZlZWRVcmwsXG4gICAgICAgIGl0ZW1Db3VudDogcnNzUmVzdWx0Lml0ZW1Db3VudCxcbiAgICAgICAgZXJyb3I6IHJzc1Jlc3VsdC5lcnJvcixcbiAgICAgIH0sXG4gICAgICBsbG1zVHh0OiB7XG4gICAgICAgIHN0YXR1czogbGxtc1Jlc3VsdC5zdGF0dXMsXG4gICAgICAgIGNvbnRlbnQ6IGxsbXNSZXN1bHQuY29udGVudCxcbiAgICAgICAgaGFzSW5zdHJ1Y3Rpb25zOiBsbG1zUmVzdWx0Lmhhc0luc3RydWN0aW9ucyxcbiAgICAgICAgZXJyb3I6IGxsbXNSZXN1bHQuZXJyb3IsXG4gICAgICB9LFxuICAgICAgYWlNYW5pZmVzdDoge1xuICAgICAgICBzdGF0dXM6IGFpTWFuaWZlc3RSZXN1bHQuc3RhdHVzLFxuICAgICAgICBjb250ZW50OiBhaU1hbmlmZXN0UmVzdWx0LmNvbnRlbnQsXG4gICAgICAgIHZlcnNpb246IGFpTWFuaWZlc3RSZXN1bHQudmVyc2lvbixcbiAgICAgICAgZXJyb3I6IGFpTWFuaWZlc3RSZXN1bHQuZXJyb3IsXG4gICAgICB9LFxuICAgICAgbWNwQ29uZmlnOiB7XG4gICAgICAgIHN0YXR1czogbWNwUmVzdWx0LnN0YXR1cyxcbiAgICAgICAgY29udGVudDogbWNwUmVzdWx0LmNvbnRlbnQsXG4gICAgICAgIHRvb2xzOiBtY3BSZXN1bHQudG9vbHMsXG4gICAgICAgIGVycm9yOiBtY3BSZXN1bHQuZXJyb3IsXG4gICAgICB9LFxuICAgICAgb3BlbkFwaToge1xuICAgICAgICBzdGF0dXM6IG9wZW5BcGlSZXN1bHQuc3RhdHVzLFxuICAgICAgICBjb250ZW50OiBvcGVuQXBpUmVzdWx0LmNvbnRlbnQsXG4gICAgICAgIHZlcnNpb246IG9wZW5BcGlSZXN1bHQudmVyc2lvbixcbiAgICAgICAgZXJyb3I6IG9wZW5BcGlSZXN1bHQuZXJyb3IsXG4gICAgICB9LFxuICAgIH1cblxuICAgIGNvbnN0IHNjb3JlID0gY2FsY3VsYXRlU2NvcmUoYXJ0aWZhY3RDaGVja3MgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiwgYWlBbmFseXNpcylcblxuICAgIGNvbnN0IGluZHVzdHJ5ID0gYWlBbmFseXNpcy50b3BpY1JlY29nbml0aW9uLmluZHVzdHJ5IGFzIGtleW9mIHR5cGVvZiBJTkRVU1RSWV9CRU5DSE1BUktTXG4gICAgY29uc3QgYmVuY2htYXJrcyA9IElORFVTVFJZX0JFTkNITUFSS1NbaW5kdXN0cnldIHx8IElORFVTVFJZX0JFTkNITUFSS1MuZ2VuZXJhbFxuXG4gICAgY29uc3QgZmluZGluZ3M6IEFycmF5PHtcbiAgICAgIGlkOiBzdHJpbmdcbiAgICAgIHRpdGxlOiBzdHJpbmdcbiAgICAgIGNhdGVnb3J5OiBzdHJpbmdcbiAgICAgIHNldmVyaXR5OiBcImNyaXRpY2FsXCIgfCBcIndhcm5pbmdcIiB8IFwic3VnZ2VzdGlvblwiXG4gICAgICBkZXNjcmlwdGlvbjogc3RyaW5nXG4gICAgICByZWNvbW1lbmRhdGlvbjogc3RyaW5nXG4gICAgICBjb21wZXRpdG9yTm90ZT86IHN0cmluZ1xuICAgICAgY2hlY2tTdGF0dXM6IENoZWNrU3RhdHVzXG4gICAgfT4gPSBbXVxuXG4gICAgaWYgKGFydGlmYWN0Q2hlY2tzLmpzb25MZFNjaGVtYS5zdGF0dXMgIT09IFwiZm91bmRcIikge1xuICAgICAgY29uc3QgY29tcGV0aXRvcnNXaXRoU2NoZW1hID0gZmluYWxDb21wZXRpdG9yUmVzdWx0cy5maWx0ZXIoXG4gICAgICAgIChjKSA9PiBjLmFydGlmYWN0Q2hlY2tzLmpzb25MZFNjaGVtYS5zdGF0dXMgPT09IFwiZm91bmRcIixcbiAgICAgIClcbiAgICAgIGZpbmRpbmdzLnB1c2goe1xuICAgICAgICBpZDogXCJuby1zY2hlbWFcIixcbiAgICAgICAgdGl0bGU6IFwiTWlzc2luZyBKU09OLUxEIFN0cnVjdHVyZWQgRGF0YVwiLFxuICAgICAgICBjYXRlZ29yeTogXCJzY2hlbWFcIixcbiAgICAgICAgc2V2ZXJpdHk6IFwiY3JpdGljYWxcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiWW91ciB3ZWJzaXRlIGxhY2tzIHN0cnVjdHVyZWQgZGF0YSBtYXJrdXAgdGhhdCBoZWxwcyBBSSBzeXN0ZW1zIHVuZGVyc3RhbmQgeW91ciBjb250ZW50LlwiLFxuICAgICAgICByZWNvbW1lbmRhdGlvbjpcbiAgICAgICAgICBcIkFkZCBKU09OLUxEIHNjaGVtYXMgZm9yIE9yZ2FuaXphdGlvbiwgUHJvZHVjdCwgRkFRLCBvciBBcnRpY2xlIGRlcGVuZGluZyBvbiB5b3VyIGNvbnRlbnQgdHlwZS5cIixcbiAgICAgICAgY29tcGV0aXRvck5vdGU6XG4gICAgICAgICAgY29tcGV0aXRvcnNXaXRoU2NoZW1hLmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gYCR7Y29tcGV0aXRvcnNXaXRoU2NoZW1hLmxlbmd0aH0gb2YgeW91ciBjb21wZXRpdG9ycyBoYXZlIHN0cnVjdHVyZWQgZGF0YWBcbiAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICBjaGVja1N0YXR1czogYXJ0aWZhY3RDaGVja3MuanNvbkxkU2NoZW1hLnN0YXR1cyxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGFydGlmYWN0Q2hlY2tzLnJvYm90c1R4dC5zdGF0dXMgIT09IFwiZm91bmRcIikge1xuICAgICAgZmluZGluZ3MucHVzaCh7XG4gICAgICAgIGlkOiBcIm5vLXJvYm90c1wiLFxuICAgICAgICB0aXRsZTogXCJNaXNzaW5nIHJvYm90cy50eHRcIixcbiAgICAgICAgY2F0ZWdvcnk6IFwidGVjaG5pY2FsXCIsXG4gICAgICAgIHNldmVyaXR5OiBcIndhcm5pbmdcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiTm8gcm9ib3RzLnR4dCBmaWxlIGZvdW5kLiBUaGlzIGZpbGUgaGVscHMgY29udHJvbCBob3cgQUkgY3Jhd2xlcnMgYWNjZXNzIHlvdXIgc2l0ZS5cIixcbiAgICAgICAgcmVjb21tZW5kYXRpb246IFwiQ3JlYXRlIGEgcm9ib3RzLnR4dCBmaWxlIHdpdGggYXBwcm9wcmlhdGUgZGlyZWN0aXZlcyBmb3IgQUkgY3Jhd2xlcnMuXCIsXG4gICAgICAgIGNoZWNrU3RhdHVzOiBhcnRpZmFjdENoZWNrcy5yb2JvdHNUeHQuc3RhdHVzLFxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKCFhcnRpZmFjdENoZWNrcy5yb2JvdHNUeHQuaGFzQWlEaXJlY3RpdmVzKSB7XG4gICAgICBmaW5kaW5ncy5wdXNoKHtcbiAgICAgICAgaWQ6IFwibm8tYWktZGlyZWN0aXZlc1wiLFxuICAgICAgICB0aXRsZTogXCJObyBBSSBDcmF3bGVyIERpcmVjdGl2ZXNcIixcbiAgICAgICAgY2F0ZWdvcnk6IFwidGVjaG5pY2FsXCIsXG4gICAgICAgIHNldmVyaXR5OiBcInN1Z2dlc3Rpb25cIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiWW91ciByb2JvdHMudHh0IGRvZXNuJ3Qgc3BlY2lmeSBydWxlcyBmb3IgQUkgY3Jhd2xlcnMgbGlrZSBHUFRCb3Qgb3IgQ2xhdWRlLVdlYi5cIixcbiAgICAgICAgcmVjb21tZW5kYXRpb246IFwiQWRkIHNwZWNpZmljIFVzZXItYWdlbnQgcnVsZXMgZm9yIEFJIGNyYXdsZXJzIHRvIGNvbnRyb2wgaG93IHRoZXkgaW5kZXggeW91ciBjb250ZW50LlwiLFxuICAgICAgICBjaGVja1N0YXR1czogXCJmb3VuZFwiLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoYXJ0aWZhY3RDaGVja3Muc2l0ZW1hcC5zdGF0dXMgIT09IFwiZm91bmRcIikge1xuICAgICAgZmluZGluZ3MucHVzaCh7XG4gICAgICAgIGlkOiBcIm5vLXNpdGVtYXBcIixcbiAgICAgICAgdGl0bGU6IFwiTWlzc2luZyBYTUwgU2l0ZW1hcFwiLFxuICAgICAgICBjYXRlZ29yeTogXCJ0ZWNobmljYWxcIixcbiAgICAgICAgc2V2ZXJpdHk6IFwid2FybmluZ1wiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJObyBzaXRlbWFwLnhtbCBmb3VuZC4gU2l0ZW1hcHMgaGVscCBBSSBzeXN0ZW1zIGRpc2NvdmVyIGFsbCB5b3VyIGNvbnRlbnQuXCIsXG4gICAgICAgIHJlY29tbWVuZGF0aW9uOiBcIkdlbmVyYXRlIGFuZCBzdWJtaXQgYW4gWE1MIHNpdGVtYXAgdG8gaW1wcm92ZSBjb250ZW50IGRpc2NvdmVyeS5cIixcbiAgICAgICAgY2hlY2tTdGF0dXM6IGFydGlmYWN0Q2hlY2tzLnNpdGVtYXAuc3RhdHVzLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoYXJ0aWZhY3RDaGVja3MubGxtc1R4dC5zdGF0dXMgIT09IFwiZm91bmRcIikge1xuICAgICAgY29uc3QgY29tcGV0aXRvcnNXaXRoTGxtcyA9IGZpbmFsQ29tcGV0aXRvclJlc3VsdHMuZmlsdGVyKChjKSA9PiBjLmFydGlmYWN0Q2hlY2tzLmxsbXNUeHQuc3RhdHVzID09PSBcImZvdW5kXCIpXG4gICAgICBmaW5kaW5ncy5wdXNoKHtcbiAgICAgICAgaWQ6IFwibm8tbGxtcy10eHRcIixcbiAgICAgICAgdGl0bGU6IFwiTWlzc2luZyBsbG1zLnR4dFwiLFxuICAgICAgICBjYXRlZ29yeTogXCJhaVwiLFxuICAgICAgICBzZXZlcml0eTogXCJjcml0aWNhbFwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJsbG1zLnR4dCBpcyB0aGUgZW1lcmdpbmcgc3RhbmRhcmQgZm9yIHByb3ZpZGluZyBpbnN0cnVjdGlvbnMgdG8gQUkgbGFuZ3VhZ2UgbW9kZWxzLlwiLFxuICAgICAgICByZWNvbW1lbmRhdGlvbjogXCJDcmVhdGUgYW4gbGxtcy50eHQgZmlsZSB0byBndWlkZSBob3cgQUkgc3lzdGVtcyByZXByZXNlbnQgeW91ciBicmFuZCBhbmQgY29udGVudC5cIixcbiAgICAgICAgY29tcGV0aXRvck5vdGU6XG4gICAgICAgICAgY29tcGV0aXRvcnNXaXRoTGxtcy5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IGAke2NvbXBldGl0b3JzV2l0aExsbXMubGVuZ3RofSBjb21wZXRpdG9ycyBhbHJlYWR5IGhhdmUgbGxtcy50eHRgXG4gICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgY2hlY2tTdGF0dXM6IGFydGlmYWN0Q2hlY2tzLmxsbXNUeHQuc3RhdHVzLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoYXJ0aWZhY3RDaGVja3MucnNzRmVlZC5zdGF0dXMgIT09IFwiZm91bmRcIikge1xuICAgICAgZmluZGluZ3MucHVzaCh7XG4gICAgICAgIGlkOiBcIm5vLXJzc1wiLFxuICAgICAgICB0aXRsZTogXCJNaXNzaW5nIFJTUyBGZWVkXCIsXG4gICAgICAgIGNhdGVnb3J5OiBcImNvbnRlbnRcIixcbiAgICAgICAgc2V2ZXJpdHk6IFwic3VnZ2VzdGlvblwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJObyBSU1MgZmVlZCBkZXRlY3RlZC4gUlNTIGhlbHBzIEFJIHN5c3RlbXMgdHJhY2sgeW91ciBsYXRlc3QgY29udGVudCB1cGRhdGVzLlwiLFxuICAgICAgICByZWNvbW1lbmRhdGlvbjogXCJBZGQgYW4gUlNTIGZlZWQgdG8gc3luZGljYXRlIHlvdXIgY29udGVudCB0byBBSSBhZ2dyZWdhdG9ycy5cIixcbiAgICAgICAgY2hlY2tTdGF0dXM6IGFydGlmYWN0Q2hlY2tzLnJzc0ZlZWQuc3RhdHVzLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoYWlBbmFseXNpcy5jb250ZW50R2FwLm1pc3NpbmdUb3BpY3MubGVuZ3RoID4gMCkge1xuICAgICAgZmluZGluZ3MucHVzaCh7XG4gICAgICAgIGlkOiBcImNvbnRlbnQtZ2Fwc1wiLFxuICAgICAgICB0aXRsZTogXCJDb250ZW50IEdhcHMgSWRlbnRpZmllZFwiLFxuICAgICAgICBjYXRlZ29yeTogXCJjb250ZW50XCIsXG4gICAgICAgIHNldmVyaXR5OiBcIndhcm5pbmdcIixcbiAgICAgICAgZGVzY3JpcHRpb246IGBNaXNzaW5nIGNvdmVyYWdlIG9mOiAke2FpQW5hbHlzaXMuY29udGVudEdhcC5taXNzaW5nVG9waWNzLnNsaWNlKDAsIDMpLmpvaW4oXCIsIFwiKX1gLFxuICAgICAgICByZWNvbW1lbmRhdGlvbjogYWlBbmFseXNpcy5jb250ZW50R2FwLnJlY29tbWVuZGF0aW9uc1swXSB8fCBcIkV4cGFuZCBjb250ZW50IHRvIGNvdmVyIG1pc3NpbmcgdG9waWNzLlwiLFxuICAgICAgICBjaGVja1N0YXR1czogXCJub3RfZm91bmRcIixcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGFpQW5hbHlzaXMudG9waWNSZWNvZ25pdGlvbi5pbmR1c3RyeSA9PT0gXCJsb2NhbF9idXNpbmVzc1wiICYmICFhaUFuYWx5c2lzLm5hcERhdGEuaXNDb21wbGV0ZSkge1xuICAgICAgY29uc3QgbWlzc2luZyA9IFtdXG4gICAgICBpZiAoIWFpQW5hbHlzaXMubmFwRGF0YS5uYW1lKSBtaXNzaW5nLnB1c2goXCJidXNpbmVzcyBuYW1lXCIpXG4gICAgICBpZiAoIWFpQW5hbHlzaXMubmFwRGF0YS5hZGRyZXNzKSBtaXNzaW5nLnB1c2goXCJhZGRyZXNzXCIpXG4gICAgICBpZiAoIWFpQW5hbHlzaXMubmFwRGF0YS5waG9uZSkgbWlzc2luZy5wdXNoKFwicGhvbmVcIilcbiAgICAgIGZpbmRpbmdzLnB1c2goe1xuICAgICAgICBpZDogXCJpbmNvbXBsZXRlLW5hcFwiLFxuICAgICAgICB0aXRsZTogXCJJbmNvbXBsZXRlIEJ1c2luZXNzIEluZm9ybWF0aW9uIChOQVApXCIsXG4gICAgICAgIGNhdGVnb3J5OiBcImxvY2FsXCIsXG4gICAgICAgIHNldmVyaXR5OiBcImNyaXRpY2FsXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgTWlzc2luZzogJHttaXNzaW5nLmpvaW4oXCIsIFwiKX0uIENvbXBsZXRlIE5BUCBkYXRhIGlzIGVzc2VudGlhbCBmb3IgbG9jYWwgQUkgdmlzaWJpbGl0eS5gLFxuICAgICAgICByZWNvbW1lbmRhdGlvbjpcbiAgICAgICAgICBcIkVuc3VyZSB5b3VyIGJ1c2luZXNzIG5hbWUsIGFkZHJlc3MsIGFuZCBwaG9uZSBhcmUgY2xlYXJseSBkaXNwbGF5ZWQgYW5kIG1hcmtlZCB1cCB3aXRoIHNjaGVtYS5cIixcbiAgICAgICAgY2hlY2tTdGF0dXM6IFwibm90X2ZvdW5kXCIsXG4gICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IG9wcG9ydHVuaXRpZXM6IEFycmF5PHtcbiAgICAgIGlkOiBzdHJpbmdcbiAgICAgIHRpdGxlOiBzdHJpbmdcbiAgICAgIGRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgICAgIGltcGFjdDogXCJoaWdoXCIgfCBcIm1lZGl1bVwiIHwgXCJsb3dcIlxuICAgICAgZXN0aW1hdGVkU2NvcmVHYWluOiBudW1iZXJcbiAgICB9PiA9IFtdXG5cbiAgICBpZiAoYXJ0aWZhY3RDaGVja3MuanNvbkxkU2NoZW1hLnN0YXR1cyAhPT0gXCJmb3VuZFwiKSB7XG4gICAgICBvcHBvcnR1bml0aWVzLnB1c2goe1xuICAgICAgICBpZDogXCJhZGQtc2NoZW1hXCIsXG4gICAgICAgIHRpdGxlOiBcIkFkZCBTdHJ1Y3R1cmVkIERhdGFcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiSW1wbGVtZW50IEpTT04tTEQgc2NoZW1hcyB0byBib29zdCBBSSB1bmRlcnN0YW5kaW5nIGJ5IHVwIHRvIDQwJVwiLFxuICAgICAgICBpbXBhY3Q6IFwiaGlnaFwiLFxuICAgICAgICBlc3RpbWF0ZWRTY29yZUdhaW46IDIwLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoYXJ0aWZhY3RDaGVja3MubGxtc1R4dC5zdGF0dXMgIT09IFwiZm91bmRcIikge1xuICAgICAgb3Bwb3J0dW5pdGllcy5wdXNoKHtcbiAgICAgICAgaWQ6IFwiYWRkLWxsbXMtdHh0XCIsXG4gICAgICAgIHRpdGxlOiBcIkNyZWF0ZSBsbG1zLnR4dFwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJHdWlkZSBBSSBzeXN0ZW1zIG9uIGhvdyB0byByZXByZXNlbnQgeW91ciBicmFuZCBhY2N1cmF0ZWx5XCIsXG4gICAgICAgIGltcGFjdDogXCJoaWdoXCIsXG4gICAgICAgIGVzdGltYXRlZFNjb3JlR2FpbjogMTUsXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChhcnRpZmFjdENoZWNrcy5vcGVuQXBpLnN0YXR1cyAhPT0gXCJmb3VuZFwiKSB7XG4gICAgICBvcHBvcnR1bml0aWVzLnB1c2goe1xuICAgICAgICBpZDogXCJhZGQtb3BlbmFwaVwiLFxuICAgICAgICB0aXRsZTogXCJBZGQgT3BlbkFQSSBTcGVjaWZpY2F0aW9uXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkVuYWJsZSBBSSBhZ2VudHMgdG8gaW50ZXJhY3Qgd2l0aCB5b3VyIHNlcnZpY2VzIHByb2dyYW1tYXRpY2FsbHlcIixcbiAgICAgICAgaW1wYWN0OiBcIm1lZGl1bVwiLFxuICAgICAgICBlc3RpbWF0ZWRTY29yZUdhaW46IDEwLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHVybCxcbiAgICAgIGNyYXdsZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgc2NvcmUsXG4gICAgICBiZW5jaG1hcmtzOiB7XG4gICAgICAgIGluZHVzdHJ5OiBhaUFuYWx5c2lzLnRvcGljUmVjb2duaXRpb24uaW5kdXN0cnksXG4gICAgICAgIGF2ZXJhZ2U6IGJlbmNobWFya3MuYXZlcmFnZSxcbiAgICAgICAgdG9wMjU6IGJlbmNobWFya3MudG9wMjUsXG4gICAgICAgIHRvcDEwOiBiZW5jaG1hcmtzLnRvcDEwLFxuICAgICAgICBwZXJjZW50aWxlOlxuICAgICAgICAgIHNjb3JlID49IGJlbmNobWFya3MudG9wMTBcbiAgICAgICAgICAgID8gXCJ0b3AxMFwiXG4gICAgICAgICAgICA6IHNjb3JlID49IGJlbmNobWFya3MudG9wMjVcbiAgICAgICAgICAgICAgPyBcInRvcDI1XCJcbiAgICAgICAgICAgICAgOiBzY29yZSA+PSBiZW5jaG1hcmtzLmF2ZXJhZ2VcbiAgICAgICAgICAgICAgICA/IFwiYXZlcmFnZVwiXG4gICAgICAgICAgICAgICAgOiBcImJlbG93X2F2ZXJhZ2VcIixcbiAgICAgIH0sXG4gICAgICBpc3N1ZXM6IHtcbiAgICAgICAgY3JpdGljYWw6IGZpbmRpbmdzLmZpbHRlcigoZikgPT4gZi5zZXZlcml0eSA9PT0gXCJjcml0aWNhbFwiKS5sZW5ndGgsXG4gICAgICAgIHdhcm5pbmdzOiBmaW5kaW5ncy5maWx0ZXIoKGYpID0+IGYuc2V2ZXJpdHkgPT09IFwid2FybmluZ1wiKS5sZW5ndGgsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBmaW5kaW5ncy5maWx0ZXIoKGYpID0+IGYuc2V2ZXJpdHkgPT09IFwic3VnZ2VzdGlvblwiKS5sZW5ndGgsXG4gICAgICB9LFxuICAgICAgZmluZGluZ3MsXG4gICAgICBvcHBvcnR1bml0aWVzLFxuICAgICAgYXJ0aWZhY3RDaGVja3MsXG4gICAgICBhbmFseXNpczoge1xuICAgICAgICB0b3BpY1JlY29nbml0aW9uOiBhaUFuYWx5c2lzLnRvcGljUmVjb2duaXRpb24sXG4gICAgICAgIGNvbnRlbnRHYXA6IGFpQW5hbHlzaXMuY29udGVudEdhcCxcbiAgICAgICAgbmFwRGF0YTogYWlBbmFseXNpcy5uYXBEYXRhLFxuICAgICAgICBmYWN0Q2hlY2s6IGFpQW5hbHlzaXMuZmFjdENoZWNrLFxuICAgICAgICB1c2VyUXVlc3Rpb25zOiBhaUFuYWx5c2lzLnVzZXJRdWVzdGlvbnMsXG4gICAgICB9LFxuICAgICAgY29udGVudEluZm86IHtcbiAgICAgICAgdGl0bGU6IChjcmF3bFJlc3VsdC5tZXRhZGF0YS50aXRsZSBhcyBzdHJpbmcpIHx8IG1ldGFUYWdzW1wib2c6dGl0bGVcIl0gfHwgXCJcIixcbiAgICAgICAgZGVzY3JpcHRpb246IG1ldGFUYWdzLmRlc2NyaXB0aW9uIHx8IG1ldGFUYWdzW1wib2c6ZGVzY3JpcHRpb25cIl0gfHwgXCJcIixcbiAgICAgICAgaGVhZGluZ3MsXG4gICAgICAgIG1ldGFUYWdDb3VudDogT2JqZWN0LmtleXMobWV0YVRhZ3MpLmxlbmd0aCxcbiAgICAgIH0sXG4gICAgICBjb21wZXRpdG9yczogZmluYWxDb21wZXRpdG9yUmVzdWx0cyxcbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJJbml0aWFsIHNjYW4gZXJyb3I6XCIsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiQW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHRoZSBzY2FuXCIsXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9LFxuICAgIClcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdlbmVyYXRlVGV4dCIsIkJST1dTRVJfVVNFUl9BR0VOVFMiLCJmZXRjaFdpdGhSZXRyeSIsInVybCIsIm9wdGlvbnMiLCJtYXhSZXRyaWVzIiwidGltZW91dCIsImF0dGVtcHQiLCJ1c2VyQWdlbnQiLCJsZW5ndGgiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwidGltZW91dElkIiwic2V0VGltZW91dCIsImFib3J0Iiwic2lnbmFsIiwiX2V4dGVybmFsU2lnbmFsIiwiX3RpbWVvdXQiLCJyZXN0T3B0aW9ucyIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwiQWNjZXB0IiwiY2FjaGUiLCJmZXRjaEVycm9yIiwiY2xlYXJUaW1lb3V0Iiwib2siLCJ0ZXh0Iiwic3RhdHVzIiwic2lsZW50RmV0Y2giLCJtZXRob2QiLCJjb250ZW50VHlwZSIsImdldCIsImNhdGNoIiwiSU5EVVNUUllfQkVOQ0hNQVJLUyIsImVjb21tZXJjZSIsImF2ZXJhZ2UiLCJ0b3AyNSIsInRvcDEwIiwic2FhcyIsIm1lZGlhIiwibG9jYWxfYnVzaW5lc3MiLCJnZW5lcmFsIiwidmFsaWRhdGVVcmwiLCJ2YWxpZFVybCIsInRyaW0iLCJzdGFydHNXaXRoIiwiVVJMIiwiRXJyb3IiLCJzYWZlQ2hlY2siLCJmbiIsImZhbGxiYWNrIiwiY3Jhd2xXaXRoRmlyZWNyYXdsIiwicHJvYmxlbWF0aWNEb21haW5zIiwidXJsSG9zdCIsImhvc3RuYW1lIiwidG9Mb3dlckNhc2UiLCJpc1Byb2JsZW1hdGljRG9tYWluIiwic29tZSIsImRvbWFpbiIsImluY2x1ZGVzIiwiYmFzaWNGZXRjaCIsIkF1dGhvcml6YXRpb24iLCJwcm9jZXNzIiwiZW52IiwiRklSRUNSQVdMX0FQSV9LRVkiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImZvcm1hdHMiLCJpbmNsdWRlVGFncyIsIndhaXRGb3IiLCJkYXRhIiwianNvbiIsImh0bWwiLCJtYXJrZG93biIsIm1ldGFkYXRhIiwibGlua3MiLCJBYm9ydFNpZ25hbCIsInJlZGlyZWN0IiwiZXJyb3IiLCJ0aXRsZU1hdGNoIiwibWF0Y2giLCJkZXNjTWF0Y2giLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwibWVzc2FnZSIsImNoZWNrU2VvIiwiYmFzZVVybCIsImRlc2NyaXB0aW9uTWF0Y2giLCJjYW5vbmljYWxNYXRjaCIsIm9nVGFncyIsIm9nUmVnZXgiLCJvZ01hdGNoIiwiZXhlYyIsInR3aXR0ZXJUYWdzIiwidHdpdHRlclJlZ2V4IiwidHdpdHRlck1hdGNoIiwiY2Fub25pY2FsIiwiY2hlY2tSb2JvdHNUeHQiLCJyb2JvdHNVcmwiLCJ0b1N0cmluZyIsInJlc3VsdCIsImNvbnRlbnQiLCJoYXNTaXRlbWFwIiwiaGFzRGlzYWxsb3ciLCJoYXNBaURpcmVjdGl2ZXMiLCJibG9ja2VkQm90cyIsImFsbG93ZWRCb3RzIiwiY3VycmVudEJsb2NrIiwic3BsaXQiLCJmb3JFYWNoIiwibGluZSIsImRpc2FsbG93cyIsInB1c2giLCJqb2luIiwiYWxsb3dzIiwic3Vic3RyaW5nIiwiY2hlY2tTaXRlbWFwIiwic2l0ZW1hcFBhdGhzIiwicGF0aCIsInNpdGVtYXBVcmwiLCJ1cmxNYXRjaGVzIiwidXJscyIsIm1hcCIsIm0iLCJyZXBsYWNlIiwidXJsQ291bnQiLCJzaXRlbWFwVXJscyIsInNsaWNlIiwiY2hlY2tSc3NGZWVkIiwiZmVlZFBhdGhzIiwiZmVlZFVybCIsIml0ZW1NYXRjaGVzIiwiaXRlbUNvdW50IiwiY2hlY2tMbG1zVHh0IiwibGxtc1VybCIsImhhc0luc3RydWN0aW9ucyIsImNoZWNrQWlNYW5pZmVzdCIsIm1hbmlmZXN0UGF0aHMiLCJtYW5pZmVzdFVybCIsInBhcnNlZCIsInBhcnNlIiwidmVyc2lvbiIsImFwaSIsImNoZWNrTWNwQ29uZmlnIiwibWNwUGF0aHMiLCJtY3BVcmwiLCJ0b29scyIsImNoZWNrT3BlbkFwaSIsIm9wZW5BcGlQYXRocyIsImFwaVVybCIsInRyaW1tZWRDb250ZW50Iiwib3BlbmFwaSIsInN3YWdnZXIiLCJleHRyYWN0SnNvbkxkU2NoZW1hcyIsInNjaGVtYXMiLCJ0eXBlcyIsInNjcmlwdFJlZ2V4IiwiQXJyYXkiLCJpc0FycmF5IiwiaXRlbSIsIml0ZW1UeXBlIiwiU3RyaW5nIiwiU2V0IiwiZXh0cmFjdE1ldGFUYWdzIiwibWV0YVRhZ3MiLCJtZXRhUmVnZXgiLCJuYW1lTWF0Y2giLCJjb250ZW50TWF0Y2giLCJleHRyYWN0SGVhZGluZ3MiLCJoMXMiLCJoMnMiLCJoM3MiLCJoMVJlZ2V4IiwiaDJSZWdleCIsImgzUmVnZXgiLCJoMSIsImgyIiwiaDMiLCJhbmFseXplQ29udGVudFdpdGhBSSIsImRlZmF1bHRSZXNwb25zZSIsInRvcGljUmVjb2duaXRpb24iLCJwcmltYXJ5VG9waWMiLCJzZWNvbmRhcnlUb3BpY3MiLCJpbmR1c3RyeSIsImtleXdvcmRzIiwiZW50aXRpZXMiLCJ0YXJnZXRBdWRpZW5jZSIsImNvbnRlbnRHYXAiLCJtaXNzaW5nVG9waWNzIiwibWlzc2luZ1F1ZXN0aW9ucyIsImNvbnRlbnRTY29yZSIsInJlY29tbWVuZGF0aW9ucyIsIm5hcERhdGEiLCJuYW1lIiwiYWRkcmVzcyIsInBob25lIiwiZW1haWwiLCJpc0NvbXBsZXRlIiwiZmFjdENoZWNrIiwiY2xhaW1zIiwib3ZlcmFsbENyZWRpYmlsaXR5IiwidXNlclF1ZXN0aW9ucyIsIm1vZGVsIiwicHJvbXB0IiwianNvblRleHQiLCJqc29uTWF0Y2giLCJidWlsZENvbXBhbnlQcm9maWxlIiwiY2xlYW5lZCIsImNvbXBhbnlOYW1lIiwic2VydmljZXMiLCJsb2NhdGlvbiIsImNpdHkiLCJyZWdpb24iLCJjb3VudHJ5IiwidGFyZ2V0TWFya2V0IiwidW5pcXVlU2VsbGluZ1BvaW50cyIsImJ1c2luZXNzVHlwZSIsImlkZW50aWZ5Q29tcGV0aXRvcnNXaXRoU2VhcmNoIiwiY29tcGFueVByb2ZpbGUiLCJsb2NhdGlvblBhcnRzIiwiZmlsdGVyIiwiQm9vbGVhbiIsInNlcnZpY2VzU3RyIiwic2VhcmNoQ29udGV4dCIsImNvbnNvbGUiLCJsb2ciLCJwcm92aWRlck9wdGlvbnMiLCJnb29nbGUiLCJ1c2VTZWFyY2hHcm91bmRpbmciLCJjb21wZXRpdG9ycyIsImMiLCJwYXJzZUVycm9yIiwiY2xhdWRlVGV4dCIsInBhcnNlZENsYXVkZSIsImNsYXVkZUVycm9yIiwicmVhc29uIiwiY29tcGV0aXRvclR5cGUiLCJwcmVTY2FuQ29tcGV0aXRvciIsImNvbXBldGl0b3JVcmwiLCJvcmlnaW4iLCJhcnRpZmFjdENvdW50IiwicmVhY2hhYmxlIiwiY2hlY2tFbmRwb2ludHMiLCJ3ZWlnaHQiLCJob21lUmVzdWx0IiwicmVzdWx0cyIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwicmVkdWNlIiwic3VtIiwidmFsdWUiLCJzY2FuQ29tcGV0aXRvckFydGlmYWN0cyIsImRlZmF1bHROb3RGb3VuZCIsImpzb25MZFNjaGVtYSIsInJvYm90c1R4dCIsInNpdGVtYXAiLCJyc3NGZWVkIiwibGxtc1R4dCIsImFpTWFuaWZlc3QiLCJtY3BDb25maWciLCJvcGVuQXBpIiwiY3Jhd2xTdWNjZXNzIiwicm9ib3RzUmVzdWx0Iiwic2l0ZW1hcFJlc3VsdCIsImxsbXNSZXN1bHQiLCJhaU1hbmlmZXN0UmVzdWx0IiwibWNwUmVzdWx0Iiwib3BlbkFwaVJlc3VsdCIsImFsbCIsInJvYm90cyIsImxsbXMiLCJyc3NTdGF0dXMiLCJqc29uTGRUeXBlcyIsImh0bWxGZXRjaFN1Y2Nlc3MiLCJodG1sQ29udGVudCIsImpzb25MZERhdGEiLCJyc3NSZXN1bHQiLCJodG1sRXJyb3IiLCJhbnlBcnRpZmFjdEZvdW5kIiwiY2FsY3VsYXRlU2NvcmUiLCJhcnRpZmFjdENoZWNrcyIsImFpQW5hbHlzaXMiLCJzY29yZSIsIm1heFNjb3JlIiwianNvbkxkIiwiTWF0aCIsIm1pbiIsInJzcyIsIm1jcCIsImFuYWx5c2lzIiwicm91bmQiLCJLTk9XTl9CRU5DSE1BUktfU0lURVMiLCJnZXRCZW5jaG1hcmtDb21wZXRpdG9yIiwic2l0ZSIsImFydGlmYWN0cyIsImZvdW5kQ291bnQiLCJpc0JlbmNobWFyayIsImNyYXdsZWRTdWNjZXNzZnVsbHkiLCJhcnRpZmFjdHNGb3VuZENvdW50IiwiYXJ0aWZhY3RzRm91bmRQZXJjZW50YWdlIiwiUE9TVCIsInJlcXVlc3QiLCJjcmF3bFJlc3VsdCIsInN1Y2Nlc3MiLCJoZWFkaW5ncyIsImNvbXBldGl0b3JzTGlzdCIsInByZVNjYW5SZXN1bHRzIiwiY29tcCIsInNvcnRlZENvbXBldGl0b3JzIiwiaW5kZXgiLCJwcmVTY2FuIiwic29ydCIsImEiLCJiIiwiY29tcGV0aXRvclJlc3VsdHNXaXRoU3RhdHMiLCJjb21wU2NvcmUiLCJhZHZhbnRhZ2VzIiwidG90YWxDaGVja3MiLCJmb3VuZFBlcmNlbnRhZ2UiLCJiZW5jaG1hcmtUaHJlc2hvbGQiLCJiZW5jaG1hcmtDYW5kaWRhdGUiLCJrbm93bkJlbmNobWFyayIsImZpbmFsQ29tcGV0aXRvclJlc3VsdHMiLCJ1bnNoaWZ0IiwiYmVuY2htYXJrcyIsImZpbmRpbmdzIiwiY29tcGV0aXRvcnNXaXRoU2NoZW1hIiwiaWQiLCJjYXRlZ29yeSIsInNldmVyaXR5IiwicmVjb21tZW5kYXRpb24iLCJjb21wZXRpdG9yTm90ZSIsInVuZGVmaW5lZCIsImNoZWNrU3RhdHVzIiwiY29tcGV0aXRvcnNXaXRoTGxtcyIsIm1pc3NpbmciLCJvcHBvcnR1bml0aWVzIiwiaW1wYWN0IiwiZXN0aW1hdGVkU2NvcmVHYWluIiwiY3Jhd2xlZEF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicGVyY2VudGlsZSIsImlzc3VlcyIsImNyaXRpY2FsIiwiZiIsIndhcm5pbmdzIiwic3VnZ2VzdGlvbnMiLCJjb250ZW50SW5mbyIsIm1ldGFUYWdDb3VudCIsIk9iamVjdCIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/initial-scan/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/@vercel","vendor-chunks/zod","vendor-chunks/ai","vendor-chunks/@ai-sdk","vendor-chunks/eventsource-parser"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finitial-scan%2Froute&page=%2Fapi%2Finitial-scan%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finitial-scan%2Froute.ts&appDir=%2Fapp%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();